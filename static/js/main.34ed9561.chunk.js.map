{"version":3,"sources":["constants/theme.js","constants/style.js","components/Header/Nav.js","components/Loader.js","components/Img.js","webAPI/productAPI.js","features/cart/cartSlice.js","hooks/useCart.js","components/Header/Cart.js","assets/logo.png","components/Logo.js","components/Header/Header.js","components/Header/index.js","components/Footer/Footer.js","components/Footer/index.js","pages/HomePage/Carousel.js","hooks/useCarousel.js","assets/arrival_female.jpeg","assets/arrival_male.jpeg","pages/HomePage/Arrival.js","components/Feed.js","components/TestProductCards.js","features/general/generalSlice.js","features/product/productSlice.js","hooks/useProduct.js","components/ProductItem.js","pages/HomePage/Trend.js","pages/HomePage/HomePage.js","constants/mapping.js","components/CrumbNav.js","hooks/usePriceFilter.js","pages/ListPage/Filter.js","components/Trend.js","components/Aside.js","pages/ListPage/Sort.js","pages/ListPage/Pagination.js","pages/ListPage/ProductList.js","pages/ProductPage/CartPopup.js","components/LoginPopup.js","hooks/useAdminProduct.js","pages/AdminPages/AdminProductPage/AddProduct.js","pages/AdminPages/AdminProductPage/InfoPopup.js","components/Popup.js","pages/ListPage/ListPage.js","pages/ProductPage/Image.js","components/QtySelector.js","pages/ProductPage/Content.js","pages/ProductPage/Detail.js","pages/ProductPage/ProductPage.js","components/CheckoutFlow.js","pages/CartPage/CartItem.js","pages/CartPage/CartPage.js","pages/AdminPages/AdminProductPage/Information.js","pages/AdminPages/AdminProductPage/Quantity.js","pages/AdminPages/AdminProductPage/Price.js","pages/AdminPages/AdminProductPage/AdminProductPage.js","pages/AdminPages/AdminPage.js","App.js","app/store.js","index.js"],"names":["theme","fontSize","bannerLarge","bannerMedium","svgLarge","h2","svg","btn","h3","h4","bodyLarge","body","bodySmall","fontWeight","xxl","xl","l","m","s","xs","color","lightGrey","grey","black","white","light_primary","alert","success","brown","yellow","MEDIA_QUERY","LinkedTag","styled","Link","fontTheme","css","h5","p","span","H2","H3","H4","P","Span","H5","Btn","button","TextBtn","props","$active","$white","PageWrapper","div","PageContainer","MenuNav","nav","Menu","ul","SubMenu","SubMenuListFlex","SubMenuListBlock","MenuLink","$small","$large","$medium","SubMenuLink","SubMenuTitle","MobileMenuNav","MobileMenu","MobileLink","ToggleBtn","$size","ToggleInput","input","CheckBox","id","type","htmlFor","icon","faChevronDown","MobileNav","to","Nav","spin_loader","keyframes","LoaderBase","FullPageLoader","ImgLoader","Mask","Loader","Img","image","useState","isLoading","setIsLoading","src","alt","onLoad","url","baseURL","getProductsAPI","pathname","search","Arr","URLSearchParams","gender","category","push","men","women","has","sizes","get","split","map","size","colors","prices","order","page","is_on","is_sale","query","fetch","then","res","msg","status","Error","statusText","console","log","json","data","ok","message","catch","e","getProductAPI","updateProductAPI","product","method","headers","JSON","stringify","cartSlice","createSlice","name","initialState","cart","errorMessage","reducers","setCart","state","action","payload","setCartQty","find","item","pattern_id","qty","deleteCart","filter","index","addCart","setErrorMessage","actions","getProductInfo","result","error","itemPattern","patterns","pattern","group","Category","slice","Color","total","price_standard","price_sale","mainImg","Images","img","is_main","setCartStorage","items","dispatch","Promise","all","a","useCart","useDispatch","handleDeleteCart","cartLocal","parse","localStorage","getItem","i","setItem","handleQtyChange","target","value","parseInt","handleBtnClick","direction","getTotal","length","reduce","acc","cur","hasError","some","err","MenuBtn","CartContainer","CartCard","li","CartImage","CartInfo","ToCartBtn","Cover","label","Cart","useSelector","cartDOM","useRef","useLocation","useEffect","cartItem","current","checked","faShoppingCart","ref","onClick","faTrashAlt","LogoContainer","h1","Logo","logo","height","HeaderWrapper","HeaderContainer","HeaderLeft","HeaderRight","BurgerBtn","BurgerInput","MenuBtnGroup","ToAdminBtn","Header","navDOM","style","position","zIndex","faBars","faUser","faHeart","FooterWrapper","FooterContainer","BottomWrapper","BottomContainer","FooterLeft","FooterRight","LinkBtn","LinkBtnGroup","LinkedList","ListTitle","ListItem","Footer","BannerWrapper","BannerContainer","LeftBtn","RightBtn","Dot","DotContainer","ArrowContainer","BannerImage","handleClick","link","Carousel","W","setW","currentPage","setCurrentPage","isDragging","setIsDragging","isClicked","setIsClicked","isHovered","setIsHovered","X","banner","timeoutID","setTimeout","transition","transform","clearTimeout","handleTransform","pageX","handleMouseDown","preventDefault","handleMouseMove","handleMouseUp","handleMouseLeave","handleMouseOver","handleButtonClick","handleRadioChange","handleRadioClick","useCarousel","onMouseLeave","onMouseOver","onChange","onMouseDown","onMouseMove","onMouseUp","ArrivalWrapper","ArrivalContainer","ArrivalItem","TitleWrapper","TitleContainer","Arrival","arrival_female_img","arrival_male_img","FeedWrapper","FeedContainer","Feed","feeds","setFeeds","process","topics","orientation","count","toString","desc","description","urls","small","feed","rel","href","ProductCard","section","ImageContainer","ImageMask","ProductPrice","ProductReminder","ProductReminderSale","ProductReminderNew","TestProductCards","faCartPlus","fasHeart","generalSlice","isOpened","popupCode","setIsOpened","setPopupCode","productSlice","unfilteredProducts","products","spec","setUnfilteredProducts","setProducts","setProduct","setError","setSize","setColor","setQty","getProducts","useProduct","isChecked","setIsChecked","setMainImg","scaledImg","size_Initialized","addCommaToPrice","price","arr","reverse","join","offsetX","nativeEvent","offsetY","offsetWidth","perX","perY","left","top","handleImgClick","tagName","handleCheckedChange","handleSizeChange","handleColorChange","isNull","handleAddToCart","newItem","WriteToLocalStorage","handleAddToWishList","handleClosePopup","BtnContainer","ProductItem","TrendingWrapper","TrendingContainer","Subtitle","ProductContainer","Trend","male","female","trends","setTrends","trend","defaultChecked","HomePage","crumbMap","collection","admin","user","tops","shirts","knit","one_piece","outer","bottoms","skirts","general","information","quantity","new","sizeMap","Size_top","sleeve_length","body_length","body_width","Size_bottom","waist","hip","rise","inseam","Size_skirt","CrumbWrapper","CrumbContainer","CrumbPath","CrumbNav","pathArr","faHome","path","usePriceFilter","useContext","LocationContext","minInitailizer","Math","min","maxInitailizer","max","getUnfilteredProducts","minimum","maximum","setMin","setMax","WR","WL","perLeft","perRight","bar","barSelected","knobLeft","knobRight","priceParam","minTemp","maxTemp","right","history","useHistory","isNaN","per","Number","toFixed","offsetLeft","newSearch","set","append","delete","priceURL","ControllerBtn","AsideBlock","FilterContainer","SizeFilter","ColorFilter","ColorSpan","$border","$color","PriceFilter","PriceTag","PriceBar","PriceKnob","ClearBtn","SizeSelect","param","faSquare","includes","faCheckSquare","newParam","ColorSelect","border","PriceSelect","$left","$right","Filter","clearedSearch","clearURL","faFilter","TrendContainer","TrendCard","TrendImage","TrendInfo","TrendPrice","TrendItem","PictureContainer","AsideContainer","aside","Controller","Aside","SortContainer","GalleryBtnGroup","GalleryBtn","$four","GalleryRadio","$two","$three","MenuContainer","SortSelect","sortMap","SortMenu","currentOrder","sortMenuDOM","sold_desc","price_desc","price_asc","title","Object","keys","Sort","faThLarge","faTh","faAlignJustify","rotate","PageBtn","$selected","Result","PageSelect","selected","Page","page_count","n","Pagination","per_page","number_start","number_end","IndexContainer","ProductList","rows","PopupItem","PopupBtnGroup","PopupBtn","$checked","CartPopup","PopupContent","LoginPopup","useAdminProduct","step","setStep","productToAdd","setProductToAdd","setName","setGender","setCategory","setDesc","material","setMaterial","washing","setWashing","Array","fill","images","setImages","setSizes","setColors","setPatterns","isOn","setIsOn","isSale","setIsSale","priceStandard","setPriceStandard","priceSale","setPriceSale","Colors","isSubmitted","setIsSubmitted","addProductAPI","lastProduct","window","scrollTo","checkForm","every","Set","saveProduct","handleInputChange","toUpperCase","toLowerCase","handleSetStep","searchProductAPI","handleFormSubmit","stepName","scrollIntoView","go","handleAddPattern","obj","ele","code","handleDeletePattern","currentTarget","handleUploadImage","StepContainer","FirstStepContainer","SecondStepContainer","$step","ThirdStepContainer","MainContainer","main","LeftContainer","RightContainer","FlowNode","FlowText","$fixed","FlowContent","InputBlock","UploadBtn","AddBtn","ImgInput","CheckInput","InputTitle","SizeInput","ColorInput","PatternInput","PriceInput","FirstStepInputs","files","file","FormData","uploadImageAPI","disabled","required","placeholder","accept","FirstStep","SecondStepInputs","sizesLength","colorsLength","entries","j","faTimes","SecondStep","getGroup","useCallback","ThirdStepInputs","ThirdStep","onSubmit","AddProduct","unblock","block","confirm","TableContainer","SizePopup","element","measure","word","ColorPopup","EditPopup","DeletePopup","PopupCover","$isOpened","PopupWrapper","PopupContainer","$type","PopupHeader","$cart","PopupTitle","Popup","faCheck","createContext","ListPage","currentPath","currentTitle","previousPath","Provider","ImageMain","$isLoading","ImageCarousel","Image","Qty","QtyInput","QtyDiv","QtyBtn","QtySelector","ContentContainer","SpecContainer","ColorSelector","Msg","SizeSelector","ColorLabel","$isNull","PriceIsSale","QtyAndAdd","WishList","Content","DetailContainer","DetailTag","TagBtn","DetailContent","InfoContainer","SizeContainer","Detail","ItemContainer","OffMessage","BreadCrumb","setPath","ProductPage","useParams","getProduct","FlowMobile","FlowContainer","CheckoutFlow","NameNote","Price","SellingPrice","ErrorMsg","MobileItem","ItemTitle","ItemContent","ItemImage","ItemName","CartItem","subtotal","MobileCartItem","ADDSTYLE","TotalContainer","MobileCartContainer","CartPage","ToDetailBtn","Item","info","setInfo","handleIsOpened","faPen","Information","handleSelectChange","faPlus","FilterBtn","Input","Form","td","$isError","Total","$safe","$caution","$danger","SubItem","setType","isEditing","setIsEditing","handleIsEditing","updatePatternAPI","updatedAt","Quantity","SortBtn","BooleanSvg","FontAwesomeIcon","NaN","sold","setOrder","handleSort","AdminProductPage","useRouteMatch","AsideContent","AdminPage","subPath","library","add","fab","App","exact","store","configureStore","reducer","productReducer","generalReducer","cartReducer","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.34ed9561.chunk.js","sourcesContent":["export const theme = {\n\tfontSize: {\n\t\tbannerLarge: '64px',\n\t\tbannerMedium: '48px',\n\t\tsvgLarge: '40px',\n\t\th2: '32px',\n\t\tsvg: '28px',\n\t\tbtn: '24px',\n\t\th3: '22px',\n\t\th4: '18px',\n\t\tbodyLarge: '16px',\n\t\tbody: '14px',\n\t\tbodySmall: '12px',\n\t},\n\tfontWeight: {\n\t\txxl: '900',\n\t\txl: '700',\n\t\tl: '500',\n\t\tm: '400',\n\t\ts: '300',\n\t\txs: '100',\n\t},\n\tcolor: {\n\t\tlightGrey: '#aaa',\n\t\tgrey: '#555',\n\t\tblack: '#333',\n\t\twhite: '#fff',\n\t\tlight_primary: '#eee',\n\t\talert: '#e83927',\n\t\tsuccess: '#40a85f',\n\t\tbrown: '#918481',\n\t\tyellow: '#d4ad54',\n\t},\n};\n","import { Link } from 'react-router-dom';\nimport styled, { css } from 'styled-components';\nimport { theme } from './theme';\n\nexport const MEDIA_QUERY = {\n\tl: '@media (max-width: 1366px)',\n\tmain: '@media (max-width: 1024px)',\n\tm: '@media (max-width: 768px)',\n\ts: '@media (max-width: 512px)',\n\txs: '@media (max-width: 256px)',\n};\n\nexport const LinkedTag = styled(Link)`\n\t&::after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\twidth: 0%;\n\t\theight: 2px;\n\t\tbackground-color: ${theme.color.black};\n\t\ttransition: width 0.4s;\n\t}\n\t&:hover {\n\t\t&::after {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n`;\n\nexport const fontTheme = {\n\th2: css`\n\t\tfont-size: ${theme.fontSize.h2};\n\t\tfont-weight: ${theme.fontWeight.xl};\n\t\tline-height: 2em;\n\t`,\n\th3: css`\n\t\tfont-size: ${theme.fontSize.h3};\n\t\tfont-weight: ${theme.fontWeight.xl};\n\t\tline-height: 1.5em;\n\t`,\n\th4: css`\n\t\tfont-size: ${theme.fontSize.h4};\n\t\tfont-weight: ${theme.fontWeight.l};\n\t\tline-height: 1.5em;\n\t`,\n\th5: css`\n\t\tfont-size: ${theme.fontSize.bodySmall};\n\t\tfont-weight: ${theme.fontWeight.s};\n\t\tline-height: 1.5em;\n\t`,\n\tp: css`\n\t\tfont-size: ${theme.fontSize.bodyLarge};\n\t\tfont-weight: ${theme.fontWeight.l};\n\t\tline-height: 1.5em;\n\t`,\n\tspan: css`\n\t\tfont-size: ${theme.fontSize.body};\n\t\tfont-weight: ${theme.fontWeight.m};\n\t\tline-height: 1.5em;\n\t`,\n};\n\nexport const H2 = styled.h2`\n\t${fontTheme.h2}\n\tcolor: ${theme.color.black};\n`;\n\nexport const H3 = styled.h3`\n\t${fontTheme.h3}\n\tcolor: ${theme.color.black};\n`;\n\nexport const H4 = styled.h4`\n\t${fontTheme.h4}\n\tcolor: ${theme.color.black};\n`;\n\nexport const P = styled.p`\n\t${fontTheme.p}\n\tcolor: ${theme.color.black};\n`;\n\nexport const Span = styled.span`\n\t${fontTheme.span}\n\tcolor: ${theme.color.black};\n`;\n\nexport const H5 = styled.h5`\n\t${fontTheme.h5}\n\tcolor: ${theme.color.black};\n`;\n\nexport const Btn = styled.button`\n\t& svg {\n\t\tfont-size: ${theme.fontSize.svg};\n\t\tcolor: ${theme.color.lightGrey};\n\t\ttransition: 0.2s;\n\t}\n\t&:hover svg {\n\t\tcursor: pointer;\n\t\tcolor: ${theme.color.grey};\n\t}\n`;\n\nexport const TextBtn = styled.button`\n\tpadding: 5px 15px;\n\tborder-radius: 0.25em;\n\ttransition: 0.2s;\n\n\t${fontTheme.span}\n\tfont-weight: ${props => props.theme.fontWeight.l};\n\n\tborder: 1px solid\n\t\t${props =>\n\t\t\tprops.$active\n\t\t\t\t? props.theme.color.black\n\t\t\t\t: props.theme.color.lightGrey};\n\tbackground-color: ${props =>\n\t\tprops.$white && props.$active\n\t\t\t? props.theme.color.white\n\t\t\t: props.$white\n\t\t\t? props.theme.color.light_primary\n\t\t\t: props.$active\n\t\t\t? props.theme.color.black\n\t\t\t: props.theme.color.lightGrey};\n\tcolor: ${props =>\n\t\t!props.$white\n\t\t\t? props.theme.color.white\n\t\t\t: props.$active\n\t\t\t? props.theme.color.black\n\t\t\t: props.theme.color.grey};\n\t&:hover {\n\t\tborder-color: ${props =>\n\t\t\tprops.$white && props.$active\n\t\t\t\t? props.theme.color.black\n\t\t\t\t: props.theme.color.lightGrey};\n\t\tbackground-color: ${props =>\n\t\t\t!props.$white\n\t\t\t\t? props.theme.color.lightGrey\n\t\t\t\t: props.$active\n\t\t\t\t? props.theme.color.black\n\t\t\t\t: props.theme.color.light_primary};\n\t\tcolor: ${props =>\n\t\t\tprops.$white && !props.$active\n\t\t\t\t? props.theme.color.grey\n\t\t\t\t: props.theme.color.white};\n\t}\n\tcursor: ${props => (props.$active ? 'pointer' : 'not-allowed')};\n`;\n\nexport const PageWrapper = styled.div``;\nexport const PageContainer = styled.div`\n\twidth: 90%;\n\t${MEDIA_QUERY.s} {\n\t\twidth: 100%;\n\t}\n\tmargin: 0 auto;\n\tdisplay: flex;\n\talign-items: flex-start;\n`;\n","import styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport { fontTheme, MEDIA_QUERY, Btn, LinkedTag } from '../../constants/style';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons';\n\nconst MenuNav = styled.nav`\n\t${MEDIA_QUERY.main} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst Menu = styled.ul`\n\tmargin: 0 20px;\n\tdisplay: flex;\n\n\t& > li {\n\t\t& > a {\n\t\t\tdisplay: block;\n\t\t}\n\t\tmargin: 0 5px;\n\t\tpadding: 16px 0;\n\t\tposition: relative;\n\t\t& > div {\n\t\t\tdisplay: none;\n\t\t\tposition: absolute;\n\t\t}\n\t\t&:hover > div {\n\t\t\tdisplay: flex;\n\t\t}\n\t}\n`;\n\nconst SubMenu = styled.div`\n\ttop: 71px;\n\tbox-shadow: 1px 1px 5px #aaa;\n\tbackground-color: #fff;\n\t& > div {\n\t\tmargin: 20px 30px;\n\t}\n\t& li > a {\n\t\tdisplay: block;\n\t}\n`;\n\nconst SubMenuListFlex = styled.div`\n\twidth: 240px;\n\t& ul {\n\t\theight: 150px;\n\t\tpadding: 10px 0;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tflex-wrap: wrap;\n\t}\n`;\n\nconst SubMenuListBlock = styled.div`\n\twidth: 180px;\n\t& ul {\n\t\ttext-align: center;\n\t\t& li {\n\t\t\tdisplay: inline-block;\n\t\t}\n\t}\n`;\n\nconst MenuLink = styled(LinkedTag)`\n\t${fontTheme.h4};\n\t${props => (props.$small ? fontTheme.p : 'line-height: 2em')};\n\tcolor: ${props => props.theme.color.black};\n\tpadding: 0 10px;\n\n\t${MEDIA_QUERY.main} {\n\t\theight: ${props =>\n\t\t\tprops.$large\n\t\t\t\t? '60px'\n\t\t\t\t: props.$medium\n\t\t\t\t? '50px'\n\t\t\t\t: props.$small\n\t\t\t\t? '40px'\n\t\t\t\t: '0px'};\n\t\tdisplay: table-cell;\n\t\tvertical-align: middle;\n\t}\n`;\n\nconst SubMenuLink = styled(LinkedTag)`\n\t${fontTheme.p}\n\tcolor: ${props => props.theme.color.black};\n\tpadding: 5px 5px;\n`;\n\nconst SubMenuTitle = styled(MenuLink)`\n\tdisplay: inline-block;\n\tpadding-bottom: 10px;\n\tfont-weight: ${props => props.theme.fontWeight.xl};\n\tpadding: 5px 5px;\n\t& + ul {\n\t\tborder-top: 1px solid #ddd;\n\t}\n`;\n\nconst MobileMenuNav = styled.nav`\n\tdisplay: none;\n\t${MEDIA_QUERY.main} {\n\t\tdisplay: block;\n\t}\n`;\n\nconst MobileMenu = styled.ul`\n\tposition: fixed;\n\tleft: 0;\n\ttop: 0;\n\tz-index: 20;\n\twidth: 75%;\n\tmax-width: 360px;\n\theight: 100vh;\n\tpadding: 0 10px;\n\tbackground-color: ${props => props.theme.color.white};\n\tbox-shadow: 1px 0px 5px ${props => props.theme.color.lightGrey};\n\toverflow-y: auto;\n\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\n\t& li {\n\t\tposition: relative;\n\t}\n\n\t& > div {\n\t\t& > li {\n\t\t\twidth: 100%;\n\t\t\tdisplay: block;\n\t\t\t& > ul {\n\t\t\t\tmargin-left: 30px;\n\t\t\t\tdisplay: none;\n\t\t\t\t& > li {\n\t\t\t\t\t& > ul {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\tmargin-left: 30px;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst MobileLink = styled(Link)`\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n`;\n\nconst ToggleBtn = styled(Btn)`\n\twidth: 60px;\n\theight: ${props => (props.$size === 'large' ? '60px' : '50px')};\n\tposition: absolute;\n\tright: 0;\n\tz-index: 21;\n\t& label {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tcursor: pointer;\n\t}\n\t& svg {\n\t\tfont-size: ${props => props.theme.fontSize.h4};\n\t}\n`;\n\nconst ToggleInput = styled.input`\n\tposition: absolute;\n\tright: 0;\n\topacity: 0;\n\tz-index: -1;\n\t&:checked ~ ul {\n\t\tdisplay: block;\n\t}\n\t&:checked + button {\n\t\t& svg {\n\t\t\tcolor: ${props => props.theme.color.grey};\n\t\t\ttransform: rotate(0.5turn);\n\t\t}\n\t}\n`;\n\nconst CheckBox = ({ id, $size }) => {\n\treturn (\n\t\t<>\n\t\t\t<ToggleInput id={id} type=\"checkbox\" />\n\t\t\t<ToggleBtn {...{ $size }}>\n\t\t\t\t<label htmlFor={id}>\n\t\t\t\t\t<FontAwesomeIcon icon={faChevronDown} />\n\t\t\t\t</label>\n\t\t\t</ToggleBtn>\n\t\t</>\n\t);\n};\n\nexport const MobileNav = () => {\n\treturn (\n\t\t<MobileMenuNav>\n\t\t\t<MobileMenu>\n\t\t\t\t<div>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<MenuLink to=\"#\" $large>\n\t\t\t\t\t\t\t新品上市\n\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t<MobileLink to=\"#\" />\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<CheckBox id=\"collection\" $size=\"large\" />\n\t\t\t\t\t\t<MenuLink to=\"/collection\" $large>\n\t\t\t\t\t\t\t商品一覽\n\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t<MobileLink to=\"/collection\" />\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<CheckBox id=\"collection-men\" />\n\t\t\t\t\t\t\t\t<MenuLink to=\"/collection/men\" $medium>\n\t\t\t\t\t\t\t\t\t男裝\n\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/men\" />\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/men/tops\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t上衣類\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/men/tops\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/men/shirts\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t襯衫類\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/men/shirts\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/men/knit\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t針織衫 / 毛衣\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/men/knit\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/men/bottoms\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t褲裝類\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/men/bottoms\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/men/outer\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t外套類\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/men/outer\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/men/general\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t配件類\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/men/general\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<CheckBox id=\"collection-women\" />\n\t\t\t\t\t\t\t\t<MenuLink to=\"/collection/women\" $medium>\n\t\t\t\t\t\t\t\t\t女裝\n\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/women\" />\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/women/tops\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t上衣 / 襯衫\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/women/tops\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/women/knit\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t針織衫 / 毛衣\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/women/knit\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/women/bottoms\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t褲裝類\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/women/bottoms\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/women/skirts\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t裙子類\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/women/skirts\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/women/one_piece\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t洋裝類\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/women/one_piece\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/women/outer\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t外套類\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/women/outer\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<MenuLink\n\t\t\t\t\t\t\t\t\t\t\tto=\"/collection/women/general\"\n\t\t\t\t\t\t\t\t\t\t\t$small\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t配件類\n\t\t\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t\t\t<MobileLink to=\"/collection/women/general\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<CheckBox id=\"on-sale\" $size=\"large\" />\n\t\t\t\t\t\t<MenuLink to=\"#\" $large>\n\t\t\t\t\t\t\t特價專區\n\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t<MobileLink to=\"#\" />\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<MenuLink to=\"#\" $medium>\n\t\t\t\t\t\t\t\t\t秋冬女裝新品_7折起\n\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t<MobileLink to=\"#\" />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<MenuLink to=\"#\" $medium>\n\t\t\t\t\t\t\t\t\t秋冬男裝新品_7折起\n\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t<MobileLink to=\"#\" />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<MenuLink to=\"#\" $medium>\n\t\t\t\t\t\t\t\t\t春夏商品出清_3折起\n\t\t\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t\t\t<MobileLink to=\"#\" />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<MenuLink to=\"#\" $large>\n\t\t\t\t\t\t\t關於我們\n\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t<MobileLink to=\"#\" />\n\t\t\t\t\t</li>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<MenuLink to=\"#\" $large>\n\t\t\t\t\t\t\t登入\n\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t<MobileLink to=\"#\" />\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<MenuLink to=\"#\" $large>\n\t\t\t\t\t\t\t願望清單\n\t\t\t\t\t\t</MenuLink>\n\t\t\t\t\t\t<MobileLink to=\"#\" />\n\t\t\t\t\t</li>\n\t\t\t\t</div>\n\t\t\t</MobileMenu>\n\t\t</MobileMenuNav>\n\t);\n};\n\nexport const Nav = () => {\n\treturn (\n\t\t<MenuNav>\n\t\t\t<Menu>\n\t\t\t\t<li>\n\t\t\t\t\t<MenuLink to=\"#\">新品上市</MenuLink>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<MenuLink to=\"/collection\">商品一覽</MenuLink>\n\t\t\t\t\t<SubMenu>\n\t\t\t\t\t\t<SubMenuListFlex>\n\t\t\t\t\t\t\t<SubMenuTitle to=\"/collection/men\">\n\t\t\t\t\t\t\t\t男裝\n\t\t\t\t\t\t\t</SubMenuTitle>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/men/tops\">\n\t\t\t\t\t\t\t\t\t\t上衣類\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/men/shirts\">\n\t\t\t\t\t\t\t\t\t\t襯衫類\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/men/knit\">\n\t\t\t\t\t\t\t\t\t\t針織衫 / 毛衣\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/men/bottoms\">\n\t\t\t\t\t\t\t\t\t\t褲裝類\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/men/outer\">\n\t\t\t\t\t\t\t\t\t\t外套類\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/men/general\">\n\t\t\t\t\t\t\t\t\t\t配件類\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</SubMenuListFlex>\n\t\t\t\t\t\t<SubMenuListFlex>\n\t\t\t\t\t\t\t<SubMenuTitle to=\"/collection/women\">\n\t\t\t\t\t\t\t\t女裝\n\t\t\t\t\t\t\t</SubMenuTitle>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/women/tops\">\n\t\t\t\t\t\t\t\t\t\t上衣 / 襯衫\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/women/knit\">\n\t\t\t\t\t\t\t\t\t\t針織衫 / 毛衣\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/women/bottoms\">\n\t\t\t\t\t\t\t\t\t\t褲裝類\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/women/skirts\">\n\t\t\t\t\t\t\t\t\t\t裙子類\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/women/one_piece\">\n\t\t\t\t\t\t\t\t\t\t洋裝類\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/women/outer\">\n\t\t\t\t\t\t\t\t\t\t外套類\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"/collection/women/general\">\n\t\t\t\t\t\t\t\t\t\t配件類\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</SubMenuListFlex>\n\t\t\t\t\t</SubMenu>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<MenuLink to=\"#\">特價專區</MenuLink>\n\t\t\t\t\t<SubMenu>\n\t\t\t\t\t\t<SubMenuListBlock>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"#\">\n\t\t\t\t\t\t\t\t\t\t秋冬女裝新品_7折起\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"#\">\n\t\t\t\t\t\t\t\t\t\t秋冬男裝新品_7折起\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<SubMenuLink to=\"#\">\n\t\t\t\t\t\t\t\t\t\t春夏商品出清_3折起\n\t\t\t\t\t\t\t\t\t</SubMenuLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</SubMenuListBlock>\n\t\t\t\t\t</SubMenu>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<MenuLink to=\"#\">關於我們</MenuLink>\n\t\t\t\t</li>\n\t\t\t</Menu>\n\t\t</MenuNav>\n\t);\n};\n","import styled, { keyframes } from 'styled-components';\n\nconst spin_loader = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\nconst LoaderBase = styled.div`\n\ttop: 0;\n\tbottom: 0;\n\tright: 0;\n\tleft: 0;\n\tmargin: auto;\n\tborder: solid #f3f3f3;\n\tborder-top-color: #aaa;\n\tborder-radius: 50%;\n\twidth: 10%;\n\theight: 10%;\n\tanimation: ${spin_loader} 1s linear infinite;\n`;\n\nexport const FullPageLoader = styled(LoaderBase)`\n\tposition: fixed;\n\tborder-width: 8px;\n`;\n\nexport const ImgLoader = styled(LoaderBase)`\n\tposition: absolute;\n\tborder-width: 4px;\n\twidth: 20px;\n\theight: 20px;\n`;\n\nconst Mask = styled.div`\n\tposition: fixed;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: 10;\n\tbackground-color: ${props => props.theme.color.lightGrey}5;\n`;\n\nexport const Loader = () => {\n\treturn (\n\t\t<Mask>\n\t\t\t<FullPageLoader />\n\t\t</Mask>\n\t);\n};\n","import { useState } from 'react';\nimport { ImgLoader } from './Loader';\n\nexport const Img = ({ image }) => {\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tconst handleImgLoad = () => {\n\t\tsetIsLoading(false);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{isLoading && <ImgLoader />}\n\t\t\t<img src={image.src} alt={image.alt} onLoad={handleImgLoad} />\n\t\t</>\n\t);\n};\n","const baseURL = process.env.NODE_ENV === 'production' ? 'https://erika-backend.herokuapp.com' : 'http://localhost:5000'\nconst url = baseURL + '/api/v1'\n\nconst getProductsAPI = (pathname, search) => {\n\n    const Arr = [];\n    search = new URLSearchParams(search);\n    const gender = pathname[0]\n    const category = pathname[1]\n    const genderObj = {\n        men: 'M',\n        women: 'F',\n    }\n\n    if(gender){\n        Arr.push(['_gender', genderObj[gender]])\n    }\n    if(category){\n        Arr.push(['_category', category])\n    }\n\n    if(search.has('size')){\n        const sizes = search.get('size').split(' ').map(size => (\n            ['_size[]', size]\n        ))\n        Arr.push(...sizes)\n    }\n\n    if(search.has('color')){\n        const colors = search.get('color').split(' ').map(size => (\n            ['_color[]', size]\n        ))\n        Arr.push(...colors)\n    }\n\n    if(search.has('price')){\n        const prices = search.get('price').split('-')\n        Arr.push(['_min', prices[0]], ['_max', prices[1]])\n    }\n\n    if(search.has('order')){\n        const order = search.get('order')\n        Arr.push(['_order', order])\n    }\n\n    if(search.has('page')){\n        const page = search.get('page')\n        Arr.push(['_page', page])\n    }\n\n    if(search.has('is_on')){\n        const is_on = search.get('is_on')\n        Arr.push(['_is_on', is_on])\n    }\n\n    if(search.has('is_sale')){\n        const is_sale = search.get('is_sale')\n        Arr.push(['_is_sale', is_sale])\n    }\n\n    const query = new URLSearchParams(Arr);\n\n    return fetch(`${url}/products?${query}`)\n    .then(res => {\n        let msg = null;\n        if (res.status === 200){\n            msg = \"取得商品成功\";\n        } else {\n            throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })\n}\n\nconst getProductAPI = id => {\n    return fetch(url + `/products/${id}`)\n    .then(res => {\n        let msg = null;\n        if (res.status === 404) {\n            msg = \"無此id對應的商品\";\n        } else if (res.status === 200){\n            msg = \"取得商品成功\";\n        } else {\n            throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })\n}\n\nconst addProductAPI = product => {\n    return fetch(`${url}/products`, {\n        method: 'POST',\n        headers: {\n            'content-type': 'application/json'\n        },\n        body: JSON.stringify(product)\n    })\n    .then(res => {\n        let msg = null;\n        if (res.status === 403) {\n            msg = '缺少必要欄位'\n        } else if (res.status === 409) {\n            msg = \"商品名稱重複\";\n        } else if (res.status === 201){\n            msg = \"新增商品成功\";\n        } else {\n            throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })\n}\n\nconst updateProductAPI = (id, product) => {\n    return fetch(`${url}/products/${id}`, {\n        method: 'PATCH',\n        headers: {\n            'content-type': 'application/json'\n        },\n        body: JSON.stringify(product)\n    })\n    .then(res => {\n        let msg = null;\n        switch (res.status) {\n            case 200: {\n                msg = \"更新商品成功\";\n                break\n            }\n            case 404: {\n                msg = \"無此id對應的商品\";\n                break\n            }\n            case 409: {\n                msg = \"商品名稱重複\";\n                break\n            }\n            default: throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })\n}\n\nconst deleteProductAPI = id => {\n    return fetch(`${url}/products/${id}`, {\n        method: 'DELETE',\n        headers: {\n            'content-type': 'application/json'\n        }\n    })\n    .then(res => {\n        let msg = null;\n        switch (res.status) {\n            case 204: {\n                msg = \"刪除商品成功\";\n                return {ok: res.ok, message: msg}\n            }\n            case 404: {\n                msg = \"無此id對應的商品\";\n                break\n            }\n            default: throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })    \n}\n\nconst searchProductAPI = arr => {\n\n    const query = new URLSearchParams(arr);\n\n    return fetch(url + `/product/search?${query}`)\n    .then(res => {\n        let msg = null;\n        if (res.status === 404) {\n            msg = \"目前暫無商品\";\n        } else if (res.status === 200){\n            msg = \"搜尋商品成功\";\n        } else {\n            throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })\n}\n\nconst updatePatternAPI = (id, pattern) => {\n    return fetch(`${url}/product/patterns/${id}`, {\n        method: 'PATCH',\n        headers: {\n            'content-type': 'application/json'\n        },\n        body: JSON.stringify(pattern)\n    })\n    .then(res => {\n        let msg = null;\n        switch (res.status) {\n            case 200: {\n                msg = \"更新存貨數量成功\";\n                return {ok: res.ok, message: msg}\n            }\n            case 403: {\n                msg = \"存貨數量不可為負\";\n                break\n            }\n            case 404: {\n                msg = \"無此id對應的存貨\";\n                break\n            }\n            default: throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })    \n}\n\nconst getFeedImagesAPI = () => {\n    return fetch('https://api.unsplash.com/topics/fashion', {\n        method: 'GET',\n        headers: {\n            'Accept-Version': 'v1',\n            'Authorization': `Client-ID ${process.env.REACT_APP_UNSPLASH_KEY}`,\n        },\n    })\n    .then(res => res.json())\n    .then(data => {\n        const query = new URLSearchParams({\n            topics: data.id,\n            orientation: 'squarish',\n            count: 6,\n        }).toString()\n        return fetch('https://api.unsplash.com/photos/random?' + query, {\n            method: 'GET',\n            headers: {\n                'Accept-Version': 'v1',\n                'Authorization': `Client-ID ${process.env.REACT_APP_UNSPLASH_KEY}`,\n            },\n        })\n        .then(res => res.json())\n    })\n}\n\nconst uploadImageAPI = file => {\n    const data = new FormData()\n    data.append('image', file)\n    return fetch('https://api.imgur.com/3/image', {\n        method: 'POST',\n        headers: {\n            'Authorization': `Client-ID ${process.env.REACT_APP_IMGUR_KEY}`\n        },\n        body: data\n    }).then(res => res.json())\n}\n\nexport { getProductsAPI, getProductAPI, addProductAPI, updateProductAPI, deleteProductAPI, searchProductAPI, updatePatternAPI, getFeedImagesAPI, uploadImageAPI };","import { createSlice } from '@reduxjs/toolkit'\nimport { getProductAPI } from '../../webAPI/productAPI';\n\nconst initialState = {\n  cart: null, \n  errorMessage: '',\n}\n\nexport const cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    setCart: (state, action) => {\n      state.cart = action.payload;\n    },\n    setCartQty: (state, action) => {\n      state.cart.find(item => \n        item.pattern_id === action.payload.pattern_id\n      ).qty = action.payload.qty\n    },\n    deleteCart: (state, action) => {\n      state.cart = state.cart.filter((item, index) => index !== action.payload)\n    },\n    addCart: (state, action) => {\n      state.cart.push(action.payload);\n    },\n    setErrorMessage: (state, action) => {\n      state.errorMessage = action.payload;\n    },\n  },\n})\n\nexport const { \n  setCart,\n  setCartQty,\n  addCart,\n  deleteCart,\n  setErrorMessage\n} = cartSlice.actions\n\n\nexport const getCartStorage = () => dispatch => {\n  const cartItem = JSON.parse(localStorage.getItem('cart')) || [];\n  dispatch(setCartStorage(cartItem))\n}\n\nconst getProductInfo = item => {\n  return getProductAPI(item.id)\n    .then(result => {\n      if(!result.ok) {\n        item.error = true;\n        const msg = result.message === '無此id對應的商品' ? 'localStorage 的 cart 裡面包含已被管理者刪除的商品' : result.message\n        throw new Error(msg)\n      }\n      return result.data\n    })\n    .then(product => {\n      item.name = product.product.name;\n      const itemPattern = product.patterns.find(pattern => (pattern.id === item.pattern_id))\n      const group = product.product.Category.group.slice(0, -1)\n      item.size = itemPattern[group].size;\n      item.color = itemPattern.Color.name;\n      item.total = itemPattern.total;\n      item.price_standard = product.product.price_standard;\n      item.price_sale = product.product.price_sale;\n      item.is_on = product.product.is_on;\n      item.is_sale = product.product.is_sale;\n      const mainImg = product.product.Images.find(img => img.is_main)\n      item.src = mainImg.src;\n      item.alt = mainImg.alt;\n    })\n    .catch(e => console.log(e.message))\n}\n\nexport const setCartStorage = items => dispatch => {\n  Promise.all(\n    items.map(async item => {\n        await getProductInfo(item)\n        return item\n    })\n  ).then(items => {\n    dispatch(setCart(items.filter(item => !item.error)))\n  })\n}\n\nexport const addCartStorage = item => dispatch => {\n  getProductInfo(item)\n    .then(() => dispatch(addCart(item)))\n}\n\nexport default cartSlice.reducer","import { useDispatch } from \"react-redux\";\nimport { deleteCart, setCartQty } from \"../features/cart/cartSlice\";\n\nexport default function useCart (item) {\n\n    const dispatch = useDispatch()\n\n    const handleDeleteCart = index => () => {\n        dispatch(deleteCart(index))\n        let cartLocal = JSON.parse(localStorage.getItem('cart')) || [];\n        cartLocal = cartLocal.filter((item, i) => i !== index)\n        localStorage.setItem('cart', JSON.stringify(cartLocal))\n    }\n\n    const handleQtyChange = e => {\n        if(!e.target.value) return\n        dispatch(setCartQty({pattern_id: item.pattern_id, qty: parseInt(e.target.value)}))\n        let cartLocal = JSON.parse(localStorage.getItem('cart')) || [];\n        cartLocal = cartLocal.map(i => {\n            if(i.pattern_id === item.pattern_id){\n                i.qty = parseInt(e.target.value)\n            }\n            return i\n        })\n        localStorage.setItem('cart', JSON.stringify(cartLocal))\n    }\n\n    const handleBtnClick = (direction) => {\n        let cartLocal = JSON.parse(localStorage.getItem('cart')) || [];\n        if(direction === 'inc') {\n            dispatch(setCartQty({pattern_id: item.pattern_id, qty: item.qty+1}))\n            cartLocal = cartLocal.map(i => {\n                if(i.pattern_id === item.pattern_id){\n                    i.qty += 1\n                }\n                return i\n            })\n        }\n        if(direction === 'dec') {\n            if(item.qty<=1) return \n            dispatch(setCartQty({pattern_id: item.pattern_id, qty: item.qty-1}))\n            cartLocal = cartLocal.map(i => {\n                if(i.pattern_id === item.pattern_id){\n                    i.qty -= 1\n                }\n                return i\n            })\n        }\n        localStorage.setItem('cart', JSON.stringify(cartLocal))\n    }\n\n    const getTotal = cart => {\n        if(cart.length === 0) return\n        return cart.map(item => \n            (item.is_sale ? item.price_sale : item.price_standard) * item.qty\n        ).reduce((acc, cur) => acc + cur)\n    }\n\n    const hasError = errorMessage => {\n        if(!errorMessage.length) return false\n        return errorMessage.some(err => err)\n    }\n\n    return {\n        handleDeleteCart,\n        handleQtyChange,\n        handleBtnClick,\n        getTotal,\n        hasError\n    }\n}","import styled from 'styled-components';\nimport { useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faShoppingCart, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\n\nimport { Span, H4, Btn, fontTheme, TextBtn } from '../../constants/style';\n\nimport { Img } from '../Img';\nimport useCart from '../../hooks/useCart';\n\nimport { setCartStorage } from '../../features/cart/cartSlice';\n\nconst MenuBtn = styled.div`\n\tposition: relative;\n\t& > input {\n\t\tdisplay: none;\n\t\t&:checked {\n\t\t\t& ~ div {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\t& + label {\n\t\t\t\tdisplay: block;\n\t\t\t}\n\t\t}\n\t}\n\t& > button {\n\t\t&:hover span {\n\t\t\tcursor: pointer;\n\t\t}\n\t\t& span {\n\t\t\tposition: absolute;\n\t\t\twidth: 15px;\n\t\t\tline-height: 15px;\n\t\t\tvertical-align: middle;\n\t\t\ttop: -5px;\n\t\t\tright: -5px;\n\t\t\tfont-size: ${props => props.theme.fontSize.bodySmall};\n\t\t\tbackground-color: ${props => props.theme.color.black};\n\t\t\tcolor: ${props => props.theme.color.white};\n\t\t\tborder-radius: 50%;\n\t\t}\n\t}\n`;\n\nconst CartContainer = styled.div`\n\tposition: absolute;\n\ttop: calc(35px + calc(28.5px / 2));\n\tright: 0;\n\twidth: 50vw;\n\tmax-width: 300px;\n\tbackground-color: ${props => props.theme.color.white};\n\tborder: 1px solid ${props => props.theme.color.lightGrey};\n\tdisplay: none;\n\tflex-direction: column;\n\talign-items: center;\n\t& > ul {\n\t\tmax-height: 240px;\n\t\toverflow: auto;\n\t}\n\t& > h4 {\n\t\tpadding: 20px;\n\t}\n`;\n\nconst CartCard = styled.li`\n\tdisplay: flex;\n\talign-items: flex-start;\n\ttext-align: left;\n\t& > button {\n\t\tpadding: 5px;\n\t\t& svg {\n\t\t\tfont-size: ${props => props.theme.fontSize.body};\n\t\t\tcolor: ${props => props.theme.color.black};\n\t\t}\n\t}\n`;\n\nconst CartImage = styled.div`\n\tmargin: 5px;\n\twidth: 30%;\n\tposition: relative;\n\t& img {\n\t\twidth: 100%;\n\t}\n`;\nconst CartInfo = styled.div`\n\tpadding: 5px;\n\twidth: 70%;\n\t${fontTheme.span}\n\tfont-weight: ${props => props.theme.fontWeight.l};\n\t& p {\n\t\tfont-size: ${props => props.theme.fontSize.bodySmall};\n\t\tfont-weight: ${props => props.theme.fontWeight.m};\n\t}\n\t& > span {\n\t\tcolor: ${props => props.theme.color.alert};\n\t\tfont-weight: ${props => props.theme.fontWeight.l};\n\t\t& > span {\n\t\t\ttext-decoration: line-through;\n\t\t\tcolor: ${props => props.theme.color.grey};\n\t\t\tmargin-right: 3px;\n\t\t}\n\t}\n`;\n\nconst ToCartBtn = styled(TextBtn)`\n\tmargin: 10px;\n`;\n\nconst Cover = styled.label`\n\tz-index: 0;\n\tposition: fixed;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\topacity: 0;\n\tdisplay: none;\n\t// background-color: #aaaa;\n`;\n\nexport const Cart = () => {\n\tconst dispatch = useDispatch();\n\tconst cart = useSelector(state => state.cart.cart);\n\n\tconst cartDOM = useRef();\n\tconst { pathname, search } = useLocation();\n\n\tuseEffect(() => {\n\t\tconst cartItem = JSON.parse(localStorage.getItem('cart')) || [];\n\t\tdispatch(setCartStorage(cartItem));\n\t}, [dispatch]);\n\n\tuseEffect(() => {\n\t\tcartDOM.current.checked = false;\n\t}, [pathname, search]);\n\n\tconst { handleDeleteCart } = useCart();\n\n\treturn (\n\t\t<MenuBtn>\n\t\t\t<Btn>\n\t\t\t\t<label htmlFor=\"cart\">\n\t\t\t\t\t<FontAwesomeIcon icon={faShoppingCart} />\n\t\t\t\t\t{cart && cart.length > 0 && (\n\t\t\t\t\t\t<Span>\n\t\t\t\t\t\t\t{cart.reduce((acc, cur) => acc + cur.qty, 0)}\n\t\t\t\t\t\t</Span>\n\t\t\t\t\t)}\n\t\t\t\t</label>\n\t\t\t</Btn>\n\t\t\t<input type=\"checkbox\" id=\"cart\" ref={cartDOM} />\n\t\t\t<Cover htmlFor=\"cart\" />\n\t\t\t<CartContainer>\n\t\t\t\t{cart ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{cart.length > 0 ? (\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t{cart.map((item, i) => (\n\t\t\t\t\t\t\t\t\t<CartCard key={item.pattern_id}>\n\t\t\t\t\t\t\t\t\t\t<CartImage>\n\t\t\t\t\t\t\t\t\t\t\t<Link to={`/product/${item.id}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Img\n\t\t\t\t\t\t\t\t\t\t\t\t\timage={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc: item.src,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt: item.alt,\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t</CartImage>\n\t\t\t\t\t\t\t\t\t\t<CartInfo>\n\t\t\t\t\t\t\t\t\t\t\t{item.qty} x {item.name}\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t尺寸: {item.size}, 顏色:{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t{item.color}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t{item.is_sale ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<Span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t${item.price_standard}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t${item.price_sale}\n\t\t\t\t\t\t\t\t\t\t\t\t</Span>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<>${item.price_standard}</>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</CartInfo>\n\t\t\t\t\t\t\t\t\t\t<button onClick={handleDeleteCart(i)}>\n\t\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon\n\t\t\t\t\t\t\t\t\t\t\t\ticon={faTrashAlt}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</CartCard>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<H4>購物車內目前沒有商品</H4>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{cart.length > 0 ? (\n\t\t\t\t\t\t\t<Link to=\"/cart\">\n\t\t\t\t\t\t\t\t<ToCartBtn $active={true}>前往結帳</ToCartBtn>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<ToCartBtn $active={false}>前往結帳</ToCartBtn>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<H4>商品載入中...</H4>\n\t\t\t\t)}\n\t\t\t</CartContainer>\n\t\t</MenuBtn>\n\t);\n};\n","export default __webpack_public_path__ + \"static/media/logo.2f43df1d.png\";","import styled from 'styled-components';\nimport { Link } from 'react-router-dom';\n\nimport logo from '../assets/logo.png';\nimport { MEDIA_QUERY } from '../constants/style';\n\nconst LogoContainer = styled.h1`\n\tdisplay: block;\n\theight: 70px;\n\ttext-align: center;\n\t${MEDIA_QUERY.xs} {\n\t\tdisplay: none;\n\t}\n`;\n\nexport const Logo = () => {\n\treturn (\n\t\t<LogoContainer>\n\t\t\t<Link to=\"/\">\n\t\t\t\t<img src={logo} height=\"70px\" alt=\"logo\" />\n\t\t\t</Link>\n\t\t</LogoContainer>\n\t);\n};\n","import styled from 'styled-components';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBars, faUser, faHeart } from '@fortawesome/free-solid-svg-icons';\n\nimport { Btn, TextBtn } from '../../constants/style';\nimport { MEDIA_QUERY } from '../../constants/style';\n\nimport { Nav, MobileNav } from './Nav';\nimport { Cart } from './Cart';\nimport { Logo } from '../Logo';\nimport { useRef } from 'react';\nimport { useEffect } from 'react';\n\nconst HeaderWrapper = styled.div`\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbackground-color: ${props => props.theme.color.white};\n\tbox-shadow: 1px 0px 5px ${props => props.theme.color.lightGrey};\n`;\n\nconst HeaderContainer = styled.div`\n\theight: 70px;\n\twidth: 90%;\n\tmargin: 0 auto;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tposition: relative;\n\t& > h1 {\n\t\tdisplay: none;\n\t\tposition: absolute;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\t${MEDIA_QUERY.main} {\n\t\t\tdisplay: block;\n\t\t}\n\t\t${MEDIA_QUERY.xs} {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n`;\n\nconst HeaderLeft = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\t${MEDIA_QUERY.main} {\n\t\t& > h1 {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n`;\n\nconst HeaderRight = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\t& > a {\n\t\tmargin-right: 30px;\n\t\t${MEDIA_QUERY.main} {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n`;\n\nconst BurgerBtn = styled(Btn)`\n\tdisplay: none;\n\t${MEDIA_QUERY.main} {\n\t\tdisplay: block;\n\t}\n`;\n\nconst BurgerInput = styled.input`\n\t${MEDIA_QUERY.main} {\n\t\tdisplay: block;\n\t}\n\tposition: absolute;\n\tleft: 0;\n\tdisplay: none;\n\topacity: 0;\n\tz-index: -1;\n\t& ~ nav {\n\t\t& > ul {\n\t\t\tleft: -380px;\n\t\t\ttransition: 0.25s;\n\t\t}\n\t}\n\t&:checked ~ nav {\n\t\t& > ul {\n\t\t\tleft: 0;\n\t\t}\n\t}\n\t&:checked + button {\n\t\t& label::after {\n\t\t\tdisplay: none;\n\t\t\tcontent: '';\n\t\t\twidth: 100%;\n\t\t\theight: 100vh;\n\t\t\tposition: fixed;\n\t\t\tleft: 0;\n\t\t\ttop: 0;\n\t\t\tz-index: 11;\n\t\t\tbackground: rgba(0, 0, 0, 0.7);\n\t\t\t${MEDIA_QUERY.main} {\n\t\t\t\tdisplay: block;\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst MenuBtnGroup = styled.div`\n\tdisplay: flex;\n\t& > div {\n\t\t${MEDIA_QUERY.main} {\n\t\t\t&:nth-child(-n + 2) {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t\t& + div {\n\t\t\tmargin-left: 30px;\n\t\t}\n\t}\n`;\n\nconst ToAdminBtn = styled(TextBtn)``;\n\nexport default function Header() {\n\tconst navDOM = useRef();\n\tconst { pathname, search } = useLocation();\n\n\tconst style = {\n\t\theight: '70px',\n\t\tposition: 'relative',\n\t\tzIndex: '10',\n\t};\n\n\tuseEffect(() => {\n\t\tnavDOM.current.checked = false;\n\t}, [pathname, search]);\n\n\treturn (\n\t\t<header style={style}>\n\t\t\t<HeaderWrapper>\n\t\t\t\t<HeaderContainer>\n\t\t\t\t\t<HeaderLeft>\n\t\t\t\t\t\t<BurgerInput id=\"nav\" type=\"checkbox\" ref={navDOM} />\n\t\t\t\t\t\t<BurgerBtn>\n\t\t\t\t\t\t\t<label htmlFor=\"nav\">\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faBars} />\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</BurgerBtn>\n\t\t\t\t\t\t<MobileNav />\n\t\t\t\t\t\t<Logo />\n\t\t\t\t\t\t<Nav />\n\t\t\t\t\t</HeaderLeft>\n\t\t\t\t\t<Logo />\n\t\t\t\t\t<HeaderRight>\n\t\t\t\t\t\t<Link to=\"/admin/product\">\n\t\t\t\t\t\t\t<ToAdminBtn $white $active>\n\t\t\t\t\t\t\t\t管理後台\n\t\t\t\t\t\t\t</ToAdminBtn>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<MenuBtnGroup>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Btn>\n\t\t\t\t\t\t\t\t\t<Link to=\"#\">\n\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faUser} />\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Btn>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Btn>\n\t\t\t\t\t\t\t\t\t<Link to=\"#\">\n\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faHeart} />\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Btn>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Cart />\n\t\t\t\t\t\t</MenuBtnGroup>\n\t\t\t\t\t</HeaderRight>\n\t\t\t\t</HeaderContainer>\n\t\t\t</HeaderWrapper>\n\t\t</header>\n\t);\n}\n","import Header from './Header'\nexport default Header","import { Link } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport {\n\tMEDIA_QUERY,\n\tBtn,\n\tH5,\n\tfontTheme,\n\tLinkedTag,\n} from '../../constants/style';\n\nimport { Logo } from '../Logo';\n\nconst FooterWrapper = styled.div`\n\tbackground-color: ${props => props.theme.color.light_primary}5;\n`;\n\nconst FooterContainer = styled.div`\n\twidth: 90%;\n\tmargin: 0 auto;\n\tpadding: 20px 0;\n\tdisplay: flex;\n\tflex-direction: row-reverse;\n\tjustify-content: space-between;\n\t${MEDIA_QUERY.s} {\n\t\tdisplay: block;\n\t}\n`;\n\nconst BottomWrapper = styled.div`\n\tbackground-color: #222;\n`;\n\nconst BottomContainer = styled.div`\n\twidth: 90%;\n\tmargin: 0 auto;\n\t& h5 {\n\t\ttext-align: center;\n\t\tcolor: ${props => props.theme.color.white};\n\t\tpadding: 10px 0;\n\t}\n`;\n\nconst FooterLeft = styled.ul`\n\tdisplay: flex;\n\tjustify-content: center;\n\t${MEDIA_QUERY.xs} {\n\t\tdisplay: block;\n\t}\n`;\n\nconst FooterRight = styled.div``;\n\nconst LinkBtn = styled(Btn)``;\n\nconst LinkBtnGroup = styled.div`\n\tpadding: 10px 0;\n\tdisplay: flex;\n\tjustify-content: center;\n\t& button + button {\n\t\tmargin-left: 20px;\n\t}\n`;\n\nconst LinkedList = styled.li`\n\t& + li {\n\t\tmargin-left: 40px;\n\t}\n\t${MEDIA_QUERY.xs} {\n\t\t& + li {\n\t\t\tmargin: 0;\n\t\t}\n\t}\n\n\t& > ul {\n\t\tpadding: 10px 0;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tflex-wrap: wrap;\n\t}\n\n\t& a {\n\t\tcolor: ${props => props.theme.color.black};\n\t}\n`;\n\nconst ListTitle = styled(LinkedTag)`\n\t${fontTheme.h4}\n\tfont-weight: ${props => props.theme.fontWeight.xl};\n\tdisplay: inline-block;\n\tpadding: 15px 5px;\n\tborder-bottom: 1px solid #ddd;\n`;\n\nconst ListItem = styled(LinkedTag)`\n\t${fontTheme.p}\n\tdisplay: inline-block;\n\tpadding: 5px 5px;\n`;\n\nexport default function Footer() {\n\treturn (\n\t\t<footer>\n\t\t\t<FooterWrapper>\n\t\t\t\t<FooterContainer>\n\t\t\t\t\t<FooterRight>\n\t\t\t\t\t\t<Logo />\n\t\t\t\t\t\t<LinkBtnGroup>\n\t\t\t\t\t\t\t<LinkBtn>\n\t\t\t\t\t\t\t\t<Link to=\"#\">\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon\n\t\t\t\t\t\t\t\t\t\ticon={['fab', 'facebook']}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</LinkBtn>\n\t\t\t\t\t\t\t<LinkBtn>\n\t\t\t\t\t\t\t\t<Link to=\"#\">\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon\n\t\t\t\t\t\t\t\t\t\ticon={['fab', 'instagram']}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</LinkBtn>\n\t\t\t\t\t\t\t<LinkBtn>\n\t\t\t\t\t\t\t\t<Link to=\"#\">\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon\n\t\t\t\t\t\t\t\t\t\ticon={['fab', 'twitter']}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</LinkBtn>\n\t\t\t\t\t\t</LinkBtnGroup>\n\t\t\t\t\t</FooterRight>\n\t\t\t\t\t<FooterLeft>\n\t\t\t\t\t\t<LinkedList>\n\t\t\t\t\t\t\t<ListTitle to=\"#\">會員中心</ListTitle>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<ListItem to=\"#\">會員資料管理</ListItem>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<ListItem to=\"#\">歷史訂單</ListItem>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<ListItem to=\"#\">願望清單</ListItem>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</LinkedList>\n\t\t\t\t\t\t<LinkedList>\n\t\t\t\t\t\t\t<ListTitle to=\"#\">關於我們</ListTitle>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<ListItem to=\"#\">隱私權條款</ListItem>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<ListItem to=\"#\">免責聲明</ListItem>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<ListItem to=\"#\">退貨政策</ListItem>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<ListItem to=\"#\">FAQ</ListItem>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</LinkedList>\n\t\t\t\t\t</FooterLeft>\n\t\t\t\t</FooterContainer>\n\t\t\t</FooterWrapper>\n\t\t\t<BottomWrapper>\n\t\t\t\t<BottomContainer>\n\t\t\t\t\t<H5>Copyright © 2021 TPdidilong All Rights Reserved</H5>\n\t\t\t\t</BottomContainer>\n\t\t\t</BottomWrapper>\n\t\t</footer>\n\t);\n}\n","import Footer from './Footer'\nexport default Footer","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\nimport useCarousel from \"../../hooks/useCarousel\";\n\nconst BannerWrapper = styled.div`\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n`\n\nconst BannerContainer = styled.div`\n  display: flex;\n  & img {\n    width: 100vw;\n  }\n`\n\nconst Btn = styled.button`\n  height: 50px;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  margin: auto 0;\n  z-index: 1;\n  & svg {\n    padding: 5px 10px;\n    font-size: ${props => props.theme.fontSize.svgLarge};\n    color: ${props => props.theme.color.light_primary}4;\n    transition: .2s;\n    filter: drop-shadow(0px 0px 0.75rem ${props => props.theme.color.black});\n    &:hover {\n      color: ${props => props.theme.color.light_primary}6;\n    }\n    &:active ~ div {\n      transition: .25s;\n      transform: translateX(-400vw);\n    }\n  }\n`\n\nconst LeftBtn = styled(Btn)`\n  left: 2.5%;\n  & svg {\n    transform: rotate(90deg);\n  }\n`\n\nconst RightBtn = styled(Btn)`\n  right: 2.5%;\n  & svg {\n    transform: rotate(270deg);\n  }\n`\n\nconst Dot = styled.button`\n  width: 12px;\n  height: 12px;\n  background-color: ${props => props.theme.color.light_primary}6;\n  display: block;\n  border-radius: 50%;\n  position: relative;\n  transition: .25s;\n`\n\nconst DotContainer = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n  z-index: 1;\n  width: 50px;\n  & ul {\n    margin: 0 10px 10px;\n    display: flex;\n    justify-content: space-between;\n  }\n  & input {\n    display: none;\n    &:checked + button {\n      background-color: ${props => props.theme.color.light_primary}d;\n    }\n  }\n`\n\nconst ArrowContainer = styled.div``\n\nconst BannerImage = ({page, handleClick}) => {\n  const link = `#${page}`\n  const src = `https://picsum.photos/970/250?random=${page}`\n  const alt = `BannerImage${page}`\n  return (\n    <Link to={link} onClick={handleClick}>\n      <img src={src} alt={alt} />\n    </Link>\n  )\n}\n\nexport const Carousel = () => {\n\n  const {\n    banner,\n    currentPage,\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleMouseLeave,\n    handleMouseOver,\n    handleClick,\n    handleButtonClick,\n    handleRadioChange,\n    handleRadioClick\n  } = useCarousel();\n  \n  const bannerStyle = {\n    transform: \"translateX(-200vw)\",\n    transition: \"0s\"\n  }\n\n  return (\n    <BannerWrapper onMouseLeave={handleMouseLeave} onMouseOver={handleMouseOver}>\n      <DotContainer>\n        <ul>\n          <li>\n            <label>\n              <input \n                type=\"radio\" \n                name=\"banner\" \n                value=\"page1\" \n                checked={currentPage === \"page1\"} \n                onChange={handleRadioChange} \n              />\n              <Dot onClick={handleRadioClick(1)}/>\n            </label>\n          </li>\n          <li>\n            <label>\n              <input \n                type=\"radio\" \n                name=\"banner\" \n                value=\"page2\" \n                checked={currentPage === \"page2\"} \n                onChange={handleRadioChange} \n              />\n              <Dot onClick={handleRadioClick(2)}/>\n            </label>\n          </li>\n        </ul>\n      </DotContainer>\n      <ArrowContainer>\n        <LeftBtn onClick={handleButtonClick('backward')}>\n          <FontAwesomeIcon icon={faChevronDown}/>\n        </LeftBtn>\n        <RightBtn onClick={handleButtonClick('forward')}>\n          <FontAwesomeIcon icon={faChevronDown}/>\n        </RightBtn>\n      </ArrowContainer>\n      <BannerContainer \n        ref={banner} \n        style={bannerStyle} \n        onMouseDown={handleMouseDown} \n        onMouseMove={handleMouseMove} \n        onMouseUp={handleMouseUp}\n      >\n        <BannerImage page={1} handleClick={handleClick}/>\n        <BannerImage page={2} handleClick={handleClick}/>\n        <BannerImage page={1} handleClick={handleClick}/>\n        <BannerImage page={2} handleClick={handleClick}/>\n        <BannerImage page={1} handleClick={handleClick}/>\n        <BannerImage page={2} handleClick={handleClick}/>\n      </BannerContainer>\n    </BannerWrapper>\n  );\n}","import { useState, useEffect, useRef } from \"react\";\n\nexport default function useCarousel() {\n  \n  const [W, setW] = useState(0)\n  const [currentPage, setCurrentPage] = useState('page1')\n  const [isDragging, setIsDragging] = useState(false)\n  const [isClicked, setIsClicked] = useState(false)\n  const [isHovered, setIsHovered] = useState(false)\n\n  const X = useRef(null);\n  const banner = useRef(null);\n  const timeoutID = useRef(null);\n\n  useEffect(() => {\n    W % 2 ? setCurrentPage('page2') : setCurrentPage('page1')\n  }, [W, setCurrentPage])\n\n  useEffect(() => {\n    if(!isHovered){\n      timeoutID.current = setTimeout(() => {\n        banner.current.style.transition = '0s'\n        banner.current.style.transform = `translateX(${-100 * (W%2+3) + 100}vw)`\n        setTimeout(() => {\n          banner.current.style.transition = '.5s'\n          banner.current.style.transform = `translateX(${-100 * (W%2+3)}vw)`\n          setW(W%2+1)\n        })\n      }, 5000)\n    }\n    if(isHovered) clearTimeout(timeoutID.current)\n    return () => clearTimeout(timeoutID.current)\n  }, [banner, W, isHovered])\n\n  const handleMouseDown = e => {\n    e.preventDefault();\n    X.current = e.pageX;\n    setIsDragging(true)\n    setIsClicked(true)\n  }\n  const handleMouseMove = e => {\n    e.preventDefault();\n    setIsClicked(false)\n    if(isDragging) banner.current.style.transition = '0s'\n    if(X.current && isDragging && e.pageX - X.current < 0){\n      banner.current.style.transform = `translateX(calc(${-100 * (W%2+3) + 100}vw + ${e.pageX-X.current}px))`\n    }\n    if(X.current && isDragging && e.pageX - X.current > 0){\n      banner.current.style.transform = `translateX(calc(${-100 * (W%2+3) - 100}vw + ${e.pageX-X.current}px))`\n    }\n  }\n  const handleMouseUp = e => {\n    if(!isClicked && isDragging) handleTransform(e)\n    setIsDragging(false)\n  }\n  const handleMouseLeave = e => {\n    setIsHovered(false)\n    if(isDragging) handleTransform(e)\n    setIsDragging(false)\n  }\n\n  const handleTransform = e => {\n    banner.current.style.transition = '.25s'\n    if(e.pageX-X.current < 0 && e.pageX-X.current >= -100){\n      return banner.current.style.transform = `translateX(${-100 * (W%2+3) + 100}vw)`\n    }\n    if(e.pageX-X.current > 0 && e.pageX-X.current <= 100){\n      return banner.current.style.transform = `translateX(${-100 * (W%2+3) - 100}vw)`\n    }\n    banner.current.style.transform = `translateX(${-100 * (W%2+3)}vw)`\n    if(e.pageX-X.current < -100) return setW(W%2+1)\n    if(e.pageX-X.current > 100) return setW(W%2-1)\n  }\n\n  const handleMouseOver = e => {\n    setIsHovered(true)\n  }\n\n  const handleClick = e => {\n    if(!isClicked) e.preventDefault()\n  }\n\n  const handleButtonClick = direction => () => {\n    banner.current.style.transition = '0s'\n    if(direction === 'backward') {\n      banner.current.style.transform = `translateX(${-100 * (W%2+3) - 100}vw)`\n    }\n    if(direction === 'forward') {\n      banner.current.style.transform = `translateX(${-100 * (W%2+3) + 100}vw)`\n    }\n    setTimeout(() => {\n      banner.current.style.transition = '.25s'\n      banner.current.style.transform = `translateX(${-100 * (W%2+3)}vw)`\n      if(direction === 'forward') return setW(W%2+1)\n      if(direction === 'backward') return setW(W%2-1)\n    })\n  }\n\n  const handleRadioChange = e => {\n    setCurrentPage(e.target.value)\n  }\n\n  const handleRadioClick = page => () => {\n    banner.current.style.transition = '0s'\n    if(page === 1 && currentPage === \"page2\"){\n      banner.current.style.transform = `translateX(-300vw)`\n    }\n    if(page === 2 && currentPage === \"page1\"){\n      banner.current.style.transform = `translateX(-200vw)`\n    }\n    setTimeout(() => {\n      banner.current.style.transition = '.25s'\n      if(page === 1 && currentPage === \"page2\"){\n        banner.current.style.transform = `translateX(-200vw)`\n        setW(W%2-1)\n      }\n      if(page === 2 && currentPage === \"page1\"){\n        banner.current.style.transform = `translateX(-300vw)`\n        setW(W%2+1)\n      }\n    })\n  }\n\n  return {\n\n    currentPage,\n    banner,\n\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleMouseLeave,\n    handleMouseOver,\n    handleClick,\n    handleButtonClick,\n    handleRadioChange,\n    handleRadioClick,\n\n  };\n}","export default __webpack_public_path__ + \"static/media/arrival_female.82ff7752.jpeg\";","export default __webpack_public_path__ + \"static/media/arrival_male.2de499ab.jpeg\";","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport arrival_female_img from '../../assets/arrival_female.jpeg'\nimport arrival_male_img from '../../assets/arrival_male.jpeg'\nimport { MEDIA_QUERY } from \"../../constants/style\"\n\nconst ArrivalWrapper = styled.div`\n`\nconst ArrivalContainer = styled.div`\n  width: 90%;\n  margin: 0 auto;\n  padding-top: 40px;\n  display: flex;\n  justify-content: space-between;\n  ${MEDIA_QUERY.s} {\n    flex-direction: column;\n    & > div {\n      margin: 10px 0;\n    }\n  }\n`\n\nconst ArrivalItem = styled.div`\n  width: 50%;\n  box-sizing: border-box;\n  margin: 10px;\n  background-color: #aaa;\n  box-shadow: 1px 1px 5px ${props => props.theme.color.lightGrey};\n  position: relative;\n  overflow: hidden;\n\n  &:hover img{\n    transform: scale(1.1);\n  }\n  & img {\n    width: 100%;\n    transition: .5s;\n  }\n  ${MEDIA_QUERY.s} {\n    width: 100%;\n  }\n`\n\nconst TitleWrapper = styled.div`\n  position: absolute;\n  width: 50%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1;\n`\n\nconst TitleContainer = styled.div`\n  text-align: center;\n  & hr {\n    margin: 15px 0;\n    border: 1px solid ${props => props.theme.color.lightGrey};\n  }\n  & h4 {\n    font-size: ${props => props.theme.fontSize.bannerLarge};\n    font-family: impact;\n    color: ${props => props.theme.color.black};\n  }\n  & p {\n    font-size: ${props => props.theme.fontSize.svgLarge};\n    font-weight: ${props => props.theme.fontWeight.xxl};\n    color: ${props => props.theme.color.black};\n    line-height: 1.5em;\n  }\n  ${MEDIA_QUERY.main} {\n    & hr {\n      margin: 7px 0;\n    }\n    & h4 {\n      font-size: ${props => props.theme.fontSize.bannerMedium};\n    }\n    & p {\n      font-size: ${props => props.theme.fontSize.svg};\n    }\n  }\n  ${MEDIA_QUERY.m} {\n    & hr {\n      margin: 5px 0;\n    }\n    & h4 {\n      font-size: ${props => props.theme.fontSize.h2};\n    }\n    & p {\n      font-size: ${props => props.theme.fontSize.h3};\n    }\n  }\n  ${MEDIA_QUERY.xs} {\n    & hr {\n      margin: 5px 0;\n    }\n    & h4 {\n      font-size: ${props => props.theme.fontSize.h3};\n    }\n    & p {\n      font-size: ${props => props.theme.fontSize.body};\n    }\n  }\n`\n\n\nexport const Arrival = () => {\n  return (\n    <ArrivalWrapper>\n      <ArrivalContainer>\n        <ArrivalItem>\n          <Link to=\"#\">\n            <TitleWrapper>\n              <TitleContainer>\n                <div>\n                  <h4>New</h4>\n                  <h4>Arrival</h4>\n                </div>\n                <hr/>\n                <p>女裝新品</p>\n              </TitleContainer>\n            </TitleWrapper>\n            <img src={arrival_female_img} alt=\"arrival_female_img\"/>\n          </Link>\n        </ArrivalItem>\n        <ArrivalItem>\n          <Link to=\"#\">\n            <TitleWrapper>\n              <TitleContainer>\n                <div>\n                  <h4>New</h4>\n                  <h4>Arrival</h4>\n                </div>\n                <hr/>\n                <p>男裝新品</p>\n              </TitleContainer>\n            </TitleWrapper>\n            <img src={arrival_male_img} alt=\"arrival_male_img\"/>\n          </Link>\n        </ArrivalItem>\n      </ArrivalContainer>\n    </ArrivalWrapper>\n  )\n}","import styled from 'styled-components';\nimport { useState, useEffect } from 'react';\nimport { getFeedImagesAPI } from '../webAPI/productAPI';\nimport { MEDIA_QUERY } from '../constants/style';\n\nconst FeedWrapper = styled.div``;\nconst FeedContainer = styled.div`\n\tpadding: 40px 0 0;\n\tdisplay: flex;\n\toverflow: hidden;\n\t& div {\n\t\twidth: calc(100% / 6);\n\t\t${MEDIA_QUERY.m} {\n\t\t\twidth: calc(100% / 4);\n\t\t}\n\t\t${MEDIA_QUERY.s} {\n\t\t\twidth: calc(100% / 3);\n\t\t}\n\t\t${MEDIA_QUERY.xs} {\n\t\t\twidth: calc(100% / 2);\n\t\t}\n\t\tflex-shrink: 0;\n\t\t& img {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\t}\n`;\n\nexport const Feed = () => {\n\tconst [feeds, setFeeds] = useState();\n\n\tuseEffect(() => {\n\t\tgetFeedImagesAPI().then(data => {\n\t\t\tsetFeeds(\n\t\t\t\tdata.map(img => ({\n\t\t\t\t\tid: img.id,\n\t\t\t\t\tdesc: img.description,\n\t\t\t\t\turl: img.urls.small,\n\t\t\t\t}))\n\t\t\t);\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t<FeedWrapper>\n\t\t\t<FeedContainer>\n\t\t\t\t{feeds &&\n\t\t\t\t\tfeeds.map(feed => (\n\t\t\t\t\t\t<div key={feed.id}>\n\t\t\t\t\t\t\t<a target=\"_blank\" rel=\"noreferrer\" href={feed.url}>\n\t\t\t\t\t\t\t\t<img src={feed.url} alt={feed.desc} />\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t</FeedContainer>\n\t\t</FeedWrapper>\n\t);\n};\n","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { H2, H3, H4, P } from \"../constants/style\"\nimport { faCartPlus, faShoppingCart, faHeart as fasHeart} from '@fortawesome/free-solid-svg-icons'\nimport { faHeart } from '@fortawesome/free-regular-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { MEDIA_QUERY } from \"../constants/style\"\n\n\nconst ProductCard = styled.section`\n  padding: 10px;\n  box-sizing: border-box;\n  & a {\n    text-decoration: none;\n  }\n  & img {\n    width: 100%;\n    height: 100%;\n  }\n  & h4 {\n    padding: 10px 0;\n  }\n`\n\nconst ImageContainer = styled.div`\n  position: relative;\n  aspect-ratio: 1;\n  & a {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 1;\n  }\n  &:hover > div:last-child {\n    background-color: ${props => props.theme.color.black}5;\n    & > button {\n      &:nth-child(1) {\n        left: -80px;\n      }\n      &:nth-child(2) {\n        right: -80px;\n      }\n    }\n  }\n`\n\nconst ImageMask = styled.div`\n  background-color: transparent;\n  transition: background-color .3s;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow: hidden;\n  & > button {\n    z-index: 2;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto;\n    &:nth-child(1) {\n      left: -400px;\n      transition: left .3s;\n    }\n    &:nth-child(2) {\n      right: -400px;\n      transition: right .3s .05s;\n    }\n  }\n`\n\nconst Btn = styled.button`\n  width: 60px;\n  height: 60px;\n  background-color: ${props => props.theme.color.lightGrey}a;\n  border-radius: 50%;\n  display: block;\n\n  &:hover {\n    bottom: 4px;\n  }\n  &:active {\n    top: 2px;\n  }\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  & svg {\n    font-size: ${props => props.theme.fontSize.svgLarge};\n    color: ${props => props.theme.color.grey};\n  }\n`\n\nconst ProductPrice = styled(P)`\n  & span {\n    padding: 0 5px;\n    &:nth-child(1) {\n      color: ${props => props.theme.color.grey};\n      font-size: ${props => props.theme.fontSize.body};\n      text-decoration: line-through;\n    }\n    &:nth-child(2) {\n      color: ${props => props.theme.color.alert};\n    }\n  }\n`\n\nconst ProductReminder = styled.div`\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  & span {\n    display: inline-block;\n    width: 50px;\n    color: ${props => props.theme.color.white};\n    font-weight: ${props => props.theme.fontWeight.xl};\n    font-size: ${props => props.theme.fontSize.body};\n    border-radius: 5px;\n    & + span {\n      margin-left: 5px;\n    }\n    ${MEDIA_QUERY.s} {\n      width: 40px;\n      font-size: ${props => props.theme.fontSize.bodySmall};\n    }\n  }\n`\n\nconst ProductReminderSale = styled.span`\n  background-color: ${props => props.theme.color.alert};\n`\nconst ProductReminderNew = styled.span`\n  background-color: ${props => props.theme.color.black};\n`\n\nexport const TestProductCards = () => {\n    return (\n        <>\n            <ProductCard>\n                <div>\n                    <ImageContainer>\n                    <Link to=\"#\"/>\n                    <img src=\"https://picsum.photos/280/280?random=1\" alt=\"001\"/>\n                    <ProductReminder>\n                        <ProductReminderSale>SALE</ProductReminderSale>\n                        <ProductReminderNew>NEW</ProductReminderNew>\n                    </ProductReminder>\n                    <ImageMask>\n                        <Btn>\n                        <FontAwesomeIcon icon={faCartPlus}/>\n                        </Btn>\n                        <Btn>\n                        <FontAwesomeIcon icon={fasHeart}/>\n                        </Btn>\n                    </ImageMask>\n                    </ImageContainer>\n                    <Link to=\"#\">\n                    <H4>商品001</H4>\n                    </Link>\n                </div>\n                <ProductPrice>\n                    <span>NT $1,450</span>\n                    <span>NT $1,150</span>\n                </ProductPrice>\n            </ProductCard>\n            <ProductCard>\n                <div>\n                    <ImageContainer>\n                    <Link to=\"#\"/>\n                    <img src=\"https://picsum.photos/280/280?random=1\" alt=\"001\"/>\n                    <ImageMask>\n                        <Btn>\n                        <FontAwesomeIcon icon={faShoppingCart}/>\n                        </Btn>\n                        <Btn>\n                        <FontAwesomeIcon icon={faHeart}/>\n                        </Btn>\n                    </ImageMask>\n                    </ImageContainer>\n                    <Link to=\"#\">\n                    <H4>商品001</H4>\n                    </Link>\n                </div>\n                <P>NT $1,450</P>\n            </ProductCard>\n        </>\n    )\n}","import { createSlice } from '@reduxjs/toolkit'\n\nconst initialState = {\n  isOpened: false,\n  errorMessage: '',\n  popupCode: '',\n}\n\nexport const generalSlice = createSlice({\n  name: 'general',\n  initialState,\n  reducers: {\n    setIsOpened: (state, action) => {\n      state.isOpened = action.payload;\n    },\n    setErrorMessage: (state, action) => {\n      state.errorMessage = action.payload;\n    },\n    setPopupCode: (state, action) => {\n      state.popupCode = action.payload;\n    },\n  },\n})\n\nexport const { \n  setIsOpened,\n  setErrorMessage,\n  setPopupCode,\n} = generalSlice.actions\n\nexport default generalSlice.reducer","import { createSlice } from '@reduxjs/toolkit'\nimport { getProductsAPI, getProductAPI } from '../../webAPI/productAPI';\n\nconst initialState = {\n  unfilteredProducts: null,\n  products: null,\n  product: null,\n  error: null,\n  spec: {size: '', color: '', qty: ''},\n}\n\nexport const productSlice = createSlice({\n  name: 'product',\n  initialState,\n  reducers: {\n    setUnfilteredProducts: (state, action) => {\n      state.unfilteredProducts = action.payload;\n    },\n    setProducts: (state, action) => {\n      state.products = action.payload;\n    },\n    setProduct: (state, action) => {\n      state.product = action.payload;\n    },\n    setError: (state, action) => {\n      state.error = action.payload;\n    },\n    setSize: (state, action) => {\n      state.spec.size = action.payload;\n    },\n    setColor: (state, action) => {\n      state.spec.color = action.payload;\n    },\n    setQty: (state, action) => {\n      state.spec.qty = action.payload;\n    },\n  },\n})\n\nexport const { \n  setUnfilteredProducts,\n  setProducts,\n  setProduct,\n  setError,\n  setSize,\n  setColor,\n  setQty,\n} = productSlice.actions\n\nexport const getUnfilteredProducts = pathname => dispatch => {\n  getProductsAPI(pathname, '')\n    .then(result => {\n      if(!result.ok) {\n        dispatch(setUnfilteredProducts(''))\n      }\n      dispatch(setUnfilteredProducts(result.data))\n    })\n}\n\nexport const getProducts = (pathname, search) => dispatch => {\n  getProductsAPI(pathname, search)\n    .then(result => {\n      if(!result.ok) {\n        dispatch(setProducts(''))\n        return dispatch(setError(result.message))\n      }\n      dispatch(setProducts(result.data))\n      dispatch(setError(null))\n    })\n}\n\nexport const getProduct = id => dispatch => {\n  getProductAPI(id)\n    .then(result => {\n      if(!result.ok) {\n        dispatch(setProduct(''))\n        return dispatch(setError(result.message))\n      }\n      dispatch(setProduct(result.data))\n      dispatch(setError(null))\n    })\n}\n\nexport default productSlice.reducer","import { useEffect, useRef, useState } from \"react\";\nimport { useDispatch } from 'react-redux'\nimport { addCartStorage, setCartQty } from \"../features/cart/cartSlice\";\nimport { setPopupCode, setErrorMessage, setIsOpened } from \"../features/general/generalSlice\";\nimport { setColor, setProduct, setQty, setSize } from \"../features/product/productSlice\";\n\nexport default function useProduct (spec, product, group, isOpened) {\n\n  const [isChecked, setIsChecked] = useState(true)\n  const [mainImg, setMainImg] = useState({src: '', alt: ''})\n\n  const scaledImg = useRef()\n\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if(isOpened) return;\n    if (!group || !product) return;\n    const size_Initialized = product ? product.product[`${group}s`][0].size : ''\n    dispatch(setSize(size_Initialized))\n    dispatch(setColor(''))\n    dispatch(setQty(1))\n  }, [product, group, dispatch, isOpened])\n\n  const handleClosePopup = type => () => {\n    dispatch(setIsOpened(false))\n    if(type === 'size' || type === 'color' || type === 'edit' || type === 'delete'){\n      dispatch(setProduct(''))\n    }\n    dispatch(setPopupCode(''))\n    dispatch(setErrorMessage(''))\n  }\n\n  const handleSizeChange = e => {\n    dispatch(setSize(e.target.value))\n    dispatch(setColor(''))\n  }\n  const handleColorChange = isNull => e => {\n    if(isNull) return;\n    dispatch(setColor(e.target.value))\n  }\n  const handleQtyChange = e => {\n    dispatch(setQty(parseInt(e.target.value)))\n  }\n  const handleBtnClick = direction => {\n    if(direction === 'inc') return dispatch(setQty(spec.qty+1))\n    if(direction === 'dec') {\n      if(spec.qty<=1) return \n      dispatch(setQty(spec.qty-1))\n    }\n  }\n\n  const handleMouseMove = e => {\n    e.preventDefault();\n    const offsetX = e.nativeEvent.offsetX > 0 ? e.nativeEvent.offsetX : 0\n    const offsetY = e.nativeEvent.offsetY > 0 ? e.nativeEvent.offsetY : 0\n    const offsetWidth = e.target.offsetWidth\n    const perX = offsetX / offsetWidth\n    const perY = offsetY / offsetWidth\n    scaledImg.current.style.left = `-${perX*100}%`\n    scaledImg.current.style.top = `-${perY*100}%`\n  }\n\n  const handleImgClick = e => {\n    if(e.target.tagName === 'IMG'){\n      setMainImg({src: e.target.src, alt: e.target.alt})\n    }\n  }\n\n  const handleCheckedChange = () => {\n    setIsChecked(!isChecked)\n  }\n\n  const handleAddToCart = () => {\n    if(!spec.size || !spec.color) return dispatch(setErrorMessage('請選擇尺寸或顏色'))\n    const cartItem = JSON.parse(localStorage.getItem('cart')) || [];\n    WriteToLocalStorage(cartItem)\n    dispatch(setIsOpened(true))\n  }\n\n  const handleAddToWishList = () => {\n    dispatch(setPopupCode('login'))\n    dispatch(setIsOpened(true))\n  }\n\n  function WriteToLocalStorage (cartItem) {\n    const pattern_id = product.patterns.find(pattern => (pattern.Color.name === spec.color) && (pattern[group].size === spec.size)).id\n    const newItem = {\n      pattern_id,\n      qty: spec.qty,\n    }\n    const getItem = cartItem.find(item => \n      item.pattern_id === newItem.pattern_id\n    )\n    if (getItem) {\n      getItem.qty += spec.qty\n      newItem.qty = getItem.qty\n      dispatch(setCartQty(newItem))\n    } else {\n      newItem.id = product.product.id\n      cartItem.push(newItem)\n      dispatch(addCartStorage(newItem))\n    }\n    return localStorage.setItem('cart', JSON.stringify(cartItem))\n  }\n\n  function addCommaToPrice (price) {\n    let p = price\n    const arr = []\n    while (parseInt(p/1000) > 0) {\n      const a = []\n      for(let i=0; i<3; i++){\n        a.push(parseInt(p%(10**(i+1))/(10**i)))\n      }\n      arr.push(a.reverse().join(''))\n      p = parseInt(p/1000)\n    }\n    arr.push(p)\n    return arr.reverse().join(',')\n  }\n\n  return {\n    addCommaToPrice,\n    mainImg,\n    setMainImg,\n    scaledImg,\n    handleMouseMove,\n    handleImgClick,\n    isChecked,\n    handleCheckedChange,\n    handleBtnClick,\n    handleSizeChange,\n    handleColorChange,\n    handleQtyChange,\n    handleAddToCart,\n    handleAddToWishList,\n    handleClosePopup,\n  };\n}","import { Link } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport {\n\tfaCartPlus,\n\tfaShoppingCart,\n\tfaHeart as fasHeart,\n} from '@fortawesome/free-solid-svg-icons';\nimport { faHeart } from '@fortawesome/free-regular-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { MEDIA_QUERY, H4, P } from '../constants/style';\n\nimport useProduct from '../hooks/useProduct';\nimport { Img } from './Img';\n\nconst ProductCard = styled.section`\n\tpadding: 10px;\n\tbox-sizing: border-box;\n\t& a {\n\t\ttext-decoration: none;\n\t}\n\t& img {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\t& h4 {\n\t\tpadding: 10px 0;\n\t}\n`;\n\nconst ImageContainer = styled.div`\n\tposition: relative;\n\taspect-ratio: 1;\n\t& > a {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tz-index: 1;\n\t}\n\t&:hover > div:last-child {\n\t\tbackground-color: ${props => props.theme.color.grey}5;\n\t\t& button {\n\t\t\tright: 0px;\n\t\t}\n\t}\n`;\n\nconst ImageMask = styled.div`\n\tbackground-color: transparent;\n\ttransition: background-color 0.3s;\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\toverflow: hidden;\n`;\n\nconst BtnContainer = styled.div`\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tpadding: 10px;\n\t& > button {\n\t\tmargin-top: 5px;\n\t}\n`;\n\nconst Btn = styled.button`\n\twidth: 40px;\n\theight: 40px;\n\tdisplay: block;\n\tbackground-color: ${props => props.theme.color.lightGrey}a;\n\tborder-radius: 50%;\n\tz-index: 2;\n\tposition: relative;\n\tright: -60px;\n\t&:nth-child(1) {\n\t\ttransition: 0.3s;\n\t}\n\t&:nth-child(2) {\n\t\ttransition: 0.3s 0.1s;\n\t}\n\t&:hover {\n\t\tbackground-color: ${props => props.theme.color.white}a;\n\t}\n\n\t& svg {\n\t\tfont-size: ${props => props.theme.fontSize.btn};\n\t\tcolor: ${props => props.theme.color.grey};\n\t}\n`;\n\nconst ProductPrice = styled(P)`\n\t& span {\n\t\tpadding: 0 5px;\n\t\t&:nth-child(1) {\n\t\t\tcolor: ${props => props.theme.color.grey};\n\t\t\tfont-size: ${props => props.theme.fontSize.body};\n\t\t\ttext-decoration: line-through;\n\t\t}\n\t\t&:nth-child(2) {\n\t\t\tcolor: ${props => props.theme.color.alert};\n\t\t}\n\t}\n`;\n\nconst ProductReminder = styled.div`\n\tposition: absolute;\n\ttop: 10px;\n\tleft: 10px;\n\t& span {\n\t\tdisplay: inline-block;\n\t\twidth: 50px;\n\t\tcolor: ${props => props.theme.color.white};\n\t\tfont-weight: ${props => props.theme.fontWeight.xl};\n\t\tfont-size: ${props => props.theme.fontSize.body};\n\t\tborder-radius: 5px;\n\t\t& + span {\n\t\t\tmargin-left: 5px;\n\t\t}\n\t\t${MEDIA_QUERY.s} {\n\t\t\twidth: 40px;\n\t\t\tfont-size: ${props => props.theme.fontSize.bodySmall};\n\t\t}\n\t}\n`;\n\nconst ProductReminderSale = styled.span`\n\tbackground-color: ${props => props.theme.color.alert};\n`;\nconst ProductReminderNew = styled.span`\n\tbackground-color: ${props => props.theme.color.black};\n`;\n\nexport const ProductItem = ({ product }) => {\n\tconst { addCommaToPrice, handleAddToWishList } = useProduct();\n\n\tconst url = `/product/${product.id}`;\n\n\treturn (\n\t\t<ProductCard>\n\t\t\t<div>\n\t\t\t\t<ImageContainer>\n\t\t\t\t\t<Link to={url} />\n\t\t\t\t\t<Img image={product.Images[0]} />\n\t\t\t\t\t<ProductReminder>\n\t\t\t\t\t\t{product.is_sale && (\n\t\t\t\t\t\t\t<ProductReminderSale>SALE</ProductReminderSale>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<ProductReminderNew>NEW</ProductReminderNew>\n\t\t\t\t\t</ProductReminder>\n\t\t\t\t\t<ImageMask>\n\t\t\t\t\t\t<BtnContainer>\n\t\t\t\t\t\t\t<Link to={url}>\n\t\t\t\t\t\t\t\t<Btn>\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faShoppingCart} />\n\t\t\t\t\t\t\t\t</Btn>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<Btn onClick={handleAddToWishList}>\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faHeart} />\n\t\t\t\t\t\t\t</Btn>\n\t\t\t\t\t\t</BtnContainer>\n\t\t\t\t\t</ImageMask>\n\t\t\t\t</ImageContainer>\n\t\t\t\t<Link to={url}>\n\t\t\t\t\t<H4>{product.name}</H4>\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t\t{product.is_sale ? (\n\t\t\t\t<ProductPrice>\n\t\t\t\t\t<span>NT ${addCommaToPrice(product.price_standard)}</span>\n\t\t\t\t\t<span>NT ${addCommaToPrice(product.price_sale)}</span>\n\t\t\t\t</ProductPrice>\n\t\t\t) : (\n\t\t\t\t<P>NT ${addCommaToPrice(product.price_standard)}</P>\n\t\t\t)}\n\t\t</ProductCard>\n\t);\n};\n","import styled from \"styled-components\";\nimport { useState, useEffect } from \"react\";\n\nimport { H2, H3, P } from \"../../constants/style\"\nimport { getProductsAPI } from \"../../webAPI/productAPI\";\nimport { MEDIA_QUERY } from \"../../constants/style\"\nimport { TestProductCards } from \"../../components/TestProductCards\";\nimport { ProductItem } from \"../../components/ProductItem\";\n\nconst TrendingWrapper = styled.div`\n`\nconst TrendingContainer = styled.div`\n  width: 90%;\n  margin: 0 auto;\n  padding: 40px 0;\n  text-align: center;\n  ${MEDIA_QUERY.s} {\n    width: 100%;\n  }\n  & h2, div {\n    text-align: center;\n  }\n  & input {\n    display: none;\n    &:checked + div {\n      display: flex;\n    }\n  }\n  & > p {\n    padding: 20px;\n  }\n`\n\nconst Subtitle = styled(H3)`\n  display: flex;\n  justify-content: center;\n  padding: 10px 0;\n  & span::after {\n    content: '';\n    display: block;\n    width: 0%;\n    height: 2px;\n    background-color: ${props => props.theme.color.black};\n    transition: width .4s;\n  }\n  & label {\n    padding: 0 5px;\n    &:hover {\n      cursor: pointer;\n      & span::after {\n        width: 100%;\n      }\n    }\n  }\n`\n\nconst ProductContainer = styled.div`\n  display: none;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  & > section {\n    width: calc(100%/4);\n    &:nth-child(n+9) {\n      display: none;\n    }\n    ${MEDIA_QUERY.main} {\n      width: calc(100%/3);\n      &:nth-child(n+7) {\n        display: none;\n      }\n    }\n    ${MEDIA_QUERY.m} {\n      width: 50%;\n      &:nth-child(n+5) {\n        display: none;\n      }\n    }\n    ${MEDIA_QUERY.xs} {\n      width: 100%;\n    }\n  }\n`\n\nexport const Trend = () => {\n\n  const [trends, setTrends] = useState({male: '', female: ''})\n  const [error, setError] = useState()\n\n  useEffect(() => {\n    const search = '?is_on=1&order=sold_desc'\n    getProductsAPI('', search)\n    .then(result => {\n      if(!result.ok) return setError(result.message)\n      setTrends({\n        male: result.data.filter(trend => trend.gender === 'M'), \n        female: result.data.filter(trend => trend.gender === 'F')\n      })\n    })\n  }, [])\n\n  return (\n    <TrendingWrapper>\n      <TrendingContainer>\n        <H2>熱賣商品</H2>\n        <Subtitle>\n          <label htmlFor=\"female\"><span>女裝</span></label>\n          /\n          <label htmlFor=\"male\"><span>男裝</span></label>\n        </Subtitle>\n        {!trends.male && !trends.female && (\n          error ? (\n            <P>{error}</P>\n          ) : (\n            <P>商品載入中...</P>\n          )\n        )}\n        {trends.male && trends.female && !error && (\n          <div>\n            <input id=\"female\" type=\"radio\" name=\"subtitle\" defaultChecked/>\n            {trends.female.length > 0 ? (\n              <ProductContainer>\n                {\n                  trends.female && trends.female.map(trend => {\n                    return (\n                      <ProductItem key={trend.id} product={trend} />\n                    )\n                  })\n                }\n                <TestProductCards />\n              </ProductContainer>\n            ) : (\n              <ProductContainer>\n                <P>查無商品</P>\n              </ProductContainer>\n            )}\n            <input id=\"male\" type=\"radio\" name=\"subtitle\"/>\n            {trends.male.length > 0 ? (\n              <ProductContainer>\n                {\n                  trends.male && trends.male.map(trend => {\n                    return (\n                      <ProductItem key={trend.id} product={trend} />\n                    )\n                  })\n                }\n                <TestProductCards />\n              </ProductContainer>\n            ) : (\n              <ProductContainer>\n                <P>查無商品</P>\n              </ProductContainer>\n            )}\n          </div>\n        )}\n      </TrendingContainer>\n    </TrendingWrapper>\n  );\n}","import { Carousel } from './Carousel'\nimport { Arrival } from './Arrival'\nimport { Feed } from '../../components/Feed'\nimport { Trend } from './Trend'\n\nexport default function HomePage() {\n  return (\n    <main>\n      <Carousel />\n      <Arrival />\n      <Trend />\n      {process.env.NODE_ENV === 'production' && (\n        <Feed />\n      )}\n    </main>\n  );\n}","export const crumbMap = [\n    {\n        collection: '商品一覽',\n        admin: '管理後台'\n    },\n    {\n        men: '男裝',\n        women: '女裝',\n        product: '商品管理',\n        order: '訂單管理',\n        user: '用戶管理'\n    },\n    {\n        tops: '上衣類',\n        shirts: '襯衫類',\n        knit: '針織衫 / 毛衣',\n        one_piece: '洋裝類',\n        outer: '外套類',\n        bottoms: '褲裝類',\n        skirts: '裙子類',\n        general: '配件類',\n        information: '新增及管理產品資訊',\n        quantity: '管理存貨數量與紀錄',\n        price: '管理商品價格與紀錄',\n        new: '新增產品'\n    }\n]\n\nexport const sizeMap = {\n    Size_top: {\n      sleeve_length: '袖長',\n      body_length: '衣長',\n      body_width: '胸寬'\n    },\n    Size_bottom: {\n      waist: '腰圍',\n      hip: '臀圍',\n      rise: '褲檔',\n      inseam: '褲內檔長'\n    },\n    Size_skirt: {\n      waist: '腰圍',\n      hip: '臀圍',\n      length: '裙長'\n    }\n}","import styled from 'styled-components';\nimport { Link } from 'react-router-dom';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHome } from '@fortawesome/free-solid-svg-icons';\nimport { MEDIA_QUERY } from '../constants/style';\nimport { crumbMap } from '../constants/mapping';\n\nconst CrumbWrapper = styled.nav`\n\t${MEDIA_QUERY.xs} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst CrumbContainer = styled.div`\n\twidth: 90%;\n\tmargin: 20px auto 10px;\n\t& ol {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t}\n\t& li {\n\t\tz-index: 1;\n\t}\n`;\n\nconst CrumbPath = styled.li`\n\t& a {\n\t\tfont-size: ${props => props.theme.fontSize.bodyLarge};\n\t\tfont-weight: ${props => props.theme.fontWeight.l};\n\t\tcolor: ${props => props.theme.color.black};\n\t\tline-height: 1.5em;\n\t\t&:last-child {\n\t\t\tfont-weight: ${props => props.theme.fontWeight.xl};\n\t\t}\n\t}\n\t& + li {\n\t\tmargin-left: 5px;\n\t\t&::before {\n\t\t\tcontent: '>';\n\t\t\tmargin-right: 5px;\n\t\t}\n\t}\n`;\n\nexport const CrumbNav = ({ pathArr, name }) => {\n\treturn (\n\t\t<CrumbWrapper>\n\t\t\t<CrumbContainer>\n\t\t\t\t<ol>\n\t\t\t\t\t<CrumbPath>\n\t\t\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t\t\t<FontAwesomeIcon icon={faHome} />\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</CrumbPath>\n\t\t\t\t\t{pathArr.slice(1).map((path, index) => (\n\t\t\t\t\t\t<CrumbPath key={index}>\n\t\t\t\t\t\t\t<Link to={pathArr.slice(0, index + 2).join('/')}>\n\t\t\t\t\t\t\t\t<span>{crumbMap[index][path]}</span>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</CrumbPath>\n\t\t\t\t\t))}\n\t\t\t\t\t{name && (\n\t\t\t\t\t\t<CrumbPath>\n\t\t\t\t\t\t\t<Link to=\"#\">\n\t\t\t\t\t\t\t\t<span>{name}</span>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</CrumbPath>\n\t\t\t\t\t)}\n\t\t\t\t</ol>\n\t\t\t</CrumbContainer>\n\t\t</CrumbWrapper>\n\t);\n};\n","import { useState, useEffect, useContext, useRef } from \"react\";\nimport { useHistory } from \"react-router\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUnfilteredProducts } from \"../features/product/productSlice\";\n\nimport { LocationContext } from \"../pages/ListPage/ListPage\";\n\nexport default function usePriceFilter() {\n\n  const { pathname, search } = useContext(LocationContext);\n  \n  const unfilteredProducts = useSelector(state => state.product.unfilteredProducts)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    dispatch(getUnfilteredProducts(pathname.split('/').slice(2, 4)))\n  }, [pathname, dispatch])\n\n  function minInitailizer () {\n    if(!unfilteredProducts) return 300\n    const arr = unfilteredProducts.map(product => product.is_sale ? product.price_sale : product.price_standard)\n    return Math.min(...arr)\n  }\n  function maxInitailizer () {\n    if(!unfilteredProducts) return 1200\n    const arr = unfilteredProducts.map(product => product.is_sale ? product.price_sale : product.price_standard)\n    return Math.max(...arr)\n  }\n\n  const minimum = minInitailizer() || 300\n  const maximum = maxInitailizer() || 1200\n\n  const [min, setMin] = useState(() => minInitailizer());\n  const [max, setMax] = useState(() => maxInitailizer());\n  const [isDragging, setIsDragging] = useState(false)\n\n  const X = useRef(null);\n  const direction = useRef(null);\n\n  const WR = useRef(null);\n  const WL = useRef(null);\n  const perLeft = useRef(100);\n  const perRight = useRef(100);\n\n  const bar = useRef();\n  const barSelected = useRef();\n  const knobLeft = useRef();\n  const knobRight = useRef();\n\n  let newSearch = new URLSearchParams(search);\n  const priceParam = newSearch.get('price') || `${minimum}-${maximum}`\n  useEffect(() => {\n    const minTemp = parseInt(priceParam.split('-')[0])\n    const maxTemp = parseInt(priceParam.split('-')[1])\n    setMin(minTemp)\n    setMax(maxTemp)\n    perLeft.current = 100 - (100*(maximum-maxTemp)/(maximum-minimum))\n    perRight.current = 100 - (100*(minTemp-minimum)/(maximum-minimum))\n    WR.current = perLeft.current * bar.current.offsetWidth / 100\n    WL.current = perRight.current * bar.current.offsetWidth / 100\n    barSelected.current.style.right = `${100 - perLeft.current}%`;\n    barSelected.current.style.left = `${100 - perRight.current}%`;\n    knobLeft.current.style.right = `${perRight.current}%`;\n    knobRight.current.style.left = `${perLeft.current}%`;\n  }, [priceParam, maximum, minimum])\n\n  const history = useHistory()\n\n  const handleMouseDown = e => {\n    if(isNaN(WR.current) || isNaN(WL.current) || isNaN(perLeft.current) || isNaN(perRight.current)){\n      return setIsDragging(false)\n    }\n    X.current = e.pageX;\n    if(e.target === knobRight.current){\n      direction.current = 'R';\n    } else if(e.target === knobLeft.current){\n      direction.current = 'L';\n    }\n    if(WR.current === null){\n      WR.current = bar.current.offsetWidth;\n    }\n    if(WL.current === null){\n      WL.current = bar.current.offsetWidth;\n    }\n    setIsDragging(true)\n  }\n\n  const handleMouseMove = e => {\n    if(X.current && isDragging){\n      e.preventDefault();\n      if(direction.current === 'R'){\n        let per = ((WR.current - X.current + e.pageX)/bar.current.offsetWidth * 100);\n        if(per > 100) per = 100;\n        if(per < 100 - perRight.current) per = 100 - perRight.current;\n        knobRight.current.style.left = `${per}%`;\n        barSelected.current.style.right = `${100 - per}%`;\n        perLeft.current = per;\n        setMax(Number((maximum - (maximum - minimum) * (100 - per) / 100).toFixed(0)));\n      }\n      if(direction.current === 'L'){\n        let per = ((WL.current + X.current - e.pageX)/bar.current.offsetWidth * 100);\n        if(per > 100) per = 100;\n        if(per < 100 - perLeft.current) per = 100 - perLeft.current;\n        knobLeft.current.style.right = `${per}%`;\n        barSelected.current.style.left = `${100 - per}%`;\n        perRight.current = per;\n        setMin(Number((minimum + (maximum - minimum) * (100 - per) / 100).toFixed(0)));\n      }\n    }\n  }\n\n  const handleMouseUp = e => {\n    if(isDragging) {\n      if(direction.current === 'R'){\n        if(!barSelected.current.offsetWidth){\n          WR.current = knobRight.current.offsetLeft\n        }else{\n          WR.current = WR.current - X.current + e.pageX;\n        }\n        if(WR.current > bar.current.offsetWidth){\n          WR.current = bar.current.offsetWidth\n        }\n      }\n      if(direction.current === 'L'){\n        if(!barSelected.current.offsetWidth){\n          WL.current = bar.current.offsetWidth - knobRight.current.offsetLeft\n        }else{\n          WL.current = WL.current + X.current - e.pageX;\n        }\n        if(WL.current > bar.current.offsetWidth){\n          WL.current = bar.current.offsetWidth\n        }\n      }\n      setIsDragging(false)\n\n      let newSearch = new URLSearchParams(search);\n      const priceParam = newSearch.get('price');\n    \n      if (priceParam) {\n        newSearch.set('price', `${min}-${max}`)\n      } else {\n        newSearch.append('price', `${min}-${max}`)\n      }\n\n      if (newSearch.has('page')) {\n        newSearch.delete('page')\n      }\n    \n      const priceURL = `${pathname}?${newSearch}`\n\n      history.push(priceURL)\n    }\n  }\n\n  const handleMouseLeave = e => {\n    if(isDragging) {\n      if(direction.current === 'R'){\n        if(!barSelected.current.offsetWidth){\n          WR.current = knobRight.current.offsetLeft\n        }else{\n          WR.current = WR.current - X.current + e.pageX;\n        }\n        if(WR.current > bar.current.offsetWidth){\n          WR.current = bar.current.offsetWidth\n        }\n      }\n      if(direction.current === 'L'){\n        if(!barSelected.current.offsetWidth){\n          WL.current = bar.current.offsetWidth - knobRight.current.offsetLeft\n        }else{\n          WL.current = WL.current + X.current - e.pageX;\n        }\n        if(WL.current > bar.current.offsetWidth){\n          WL.current = bar.current.offsetWidth\n        }\n      }\n      setIsDragging(false)\n\n      let newSearch = new URLSearchParams(search);\n      const priceParam = newSearch.get('price');\n    \n      if (priceParam) {\n        newSearch.set('price', `${min}-${max}`)\n      } else {\n        newSearch.append('price', `${min}-${max}`)\n      }\n\n      if (newSearch.has('page')) {\n        newSearch.delete('page')\n      }\n    \n      const priceURL = `${pathname}?${newSearch}`\n\n      history.push(priceURL)\n    }\n  }\n\n  return {\n    bar,\n    barSelected,\n    knobLeft,\n    knobRight,\n\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleMouseLeave,\n\n    min,\n    max,\n    isDragging\n  };\n}","import { Link } from \"react-router-dom\";\nimport { useContext } from \"react\";\nimport styled from \"styled-components\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSquare, faCheckSquare } from '@fortawesome/free-regular-svg-icons'\nimport { faFilter } from '@fortawesome/free-solid-svg-icons'\n\nimport { H4, P } from \"../../constants/style\"\nimport { MEDIA_QUERY, Btn } from \"../../constants/style\"\n\nimport useProduct from \"../../hooks/useProduct\";\nimport usePriceFilter from \"../../hooks/usePriceFilter\";\n\nimport { LocationContext } from \"./ListPage\";\n\n\nconst ControllerBtn = styled(Btn)`\n  display: none;\n  height: 40px;\n  padding-left: 20px;\n  border-radius: 5px;\n  background-color: #eee;\n  box-shadow: 1px 0px 5px ${props => props.theme.color.lightGrey};\n  & svg {\n    padding: 10px;\n    font-size: ${props => props.theme.fontSize.h3};\n  }\n  ${MEDIA_QUERY.main} {\n    display: block;\n    position: absolute;\n    right: -30px;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n  }\n`\n\nconst AsideBlock = styled.div`\n  border: 1px solid ${props => props.theme.color.lightGrey}8;\n  & > h4 {\n    padding: 10px 15px;\n    font-weight: ${props => props.theme.fontWeight.xl};\n    background-color: #eee;\n  }\n  & a {\n    color: ${props => props.theme.color.black};\n  }\n`\n\nconst FilterContainer = styled(AsideBlock)`\n  ${MEDIA_QUERY.main} {\n    position: relative;\n    border: none;\n    box-shadow: 1px 0px 5px ${props => props.theme.color.lightGrey};\n  }\n  & section {\n    padding: 10px 15px 0;\n    &:last-child {\n      padding-bottom: 10px;\n    }\n    & ul {\n      padding: 5px 10px;\n    }\n  }\n`\n\nconst SizeFilter = styled.section`\n  & li {\n    display: flex;\n  }\n  & a {\n    z-index: 1;\n    width: 100%;\n    & > svg {\n      font-size: ${props => props.theme.fontSize.h4};\n      color: ${props => props.theme.color.grey};\n    }\n    & > span {\n      padding: 0 5px;\n      line-height: 2em;\n    }\n  }\n`\n\nconst ColorFilter = styled.section`\n  & ul {\n    display: flex;\n    & li {\n      z-index: 1;\n      & + li {\n        margin-left: 5px;\n      }\n    }\n  }\n`\n\nconst ColorSpan = styled.span`\n  display: block;\n  box-sizing: border-box;\n  border: 1px solid #aaa8;\n  border: ${props => (props.$border || (props.$color === 'black')) && 'thin solid #333'};\n  border: ${props => (props.$border && (props.$color === 'black')) && 'medium double #eee'};\n  width: 30px;\n  height: 30px;\n  background-color: ${props => props.theme.color[props.$color]};\n`\n\nconst PriceFilter = styled.section`\n`\n\nconst PriceTag = styled(P)`\n  font-weight: ${props => props.theme.fontWeight.m};\n  & span {\n    &:last-child {\n      &::before {\n        content: '-';\n        margin: 0 5px;\n      }\n    }\n  }\n`\n\nconst PriceBar = styled.div`\n  margin: 10px auto;\n  padding: 0 15px;\n  background-color: ${props => props.theme.color.lightGrey};\n  & > div {\n    z-index: 1;\n    width: 100%;\n    height: 5px;\n    position: relative;\n    & > div {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      background-color: ${props => props.theme.color.grey};\n    }\n  }\n`\n\nconst PriceKnob = styled.span`\n  display: block;\n  width: 15px;\n  height: 15px;\n  box-sizing: border-box;\n  border-radius: 50%;\n  border: 2px solid ${props => props.theme.color.grey};\n  background-color: ${props => props.theme.color.light_primary};\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  margin: auto 0;\n`\n\nconst Cover = styled.label`\n  z-index: 2;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  opacity: 0;\n`\n\nconst ClearBtn = styled(Btn)`\n  background-color: ${props => props.theme.color.black};\n  padding: 3px 10px;\n  margin: 10px 15px 0;\n  border-radius: 1em;\n  & span {\n    color: ${props => props.theme.color.white};\n    font-size: ${props => props.theme.fontSize.bodyLarge};\n    font-weight: ${props => props.theme.fontWeight.l};\n  }\n`\n\n\nconst SizeSelect = ({size}) => {\n\n  const { pathname, search } = useContext(LocationContext);\n  const newSearch = new URLSearchParams(search);\n  const param = newSearch.get('size');\n  let icon = faSquare;\n\n  if (param) {\n    if (!param.includes(size)) {\n      newSearch.set('size', `${param} ${size}`)\n    } else if (param === size) {\n      newSearch.delete('size')\n      icon = faCheckSquare;\n    } else {\n      const newParam = param.split(' ' + size).join('').split(size + ' ').join('')\n      newSearch.set('size', newParam)\n      icon = faCheckSquare;\n    }\n  } else {\n    newSearch.append('size', size)\n  }\n\n  if (newSearch.has('page')) {\n    newSearch.delete('page')\n  }\n\n  const url = `${pathname}?${newSearch}`\n\n  return (\n    <Link to={url}>\n      <FontAwesomeIcon icon={icon}/>\n      <span>{size}</span>\n    </Link>\n  )\n}\n\nconst ColorSelect = ({color}) => {\n\n  const colors = {\n    white: 'light_primary',\n    black: 'black',\n    grey: 'lightGrey',\n    yellow: 'yellow',\n    brown: 'brown',\n  }\n  \n  const { pathname, search } = useContext(LocationContext);\n  const newSearch = new URLSearchParams(search);\n  const param = newSearch.get('color');\n  let border = false;\n\n  if (param) {\n    if (!param.includes(color)) {\n      newSearch.set('color', `${param} ${color}`)\n    } else if (param === color) {\n      newSearch.delete('color')\n      border = true;\n    } else {\n      const newParam = param.split(' ' + color).join('').split(color + ' ').join('')\n      newSearch.set('color', newParam)\n      border = true;\n    }\n  } else {\n    newSearch.append('color', color)\n  }\n\n  if (newSearch.has('page')) {\n    newSearch.delete('page')\n  }\n\n  const url = `${pathname}?${newSearch}`\n\n  return (\n    <Link to={url}>\n      <ColorSpan $border={border} $color={colors[color]}/>\n    </Link>\n  )\n}\n\nconst PriceSelect = () => {\n\n  const rightStyle = {\n    left: \"100%\"\n  }\n  const leftStyle = {\n    right: \"100%\"\n  }\n  const barStyle = {\n    left: \"0%\",\n    right: \"0%\"\n  }\n\n  const { addCommaToPrice } = useProduct()\n  \n  const {\n    bar,\n    barSelected,\n    knobLeft,\n    knobRight,\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleMouseLeave,\n    min,\n    max,\n    isDragging\n  } = usePriceFilter();\n\n  return (\n    <div>\n      <PriceTag>\n        <span>${addCommaToPrice(min)}</span>\n        <span>${addCommaToPrice(max)}</span>\n      </PriceTag>\n      <PriceBar>\n        <div ref={bar}>\n          <div ref={barSelected} style={barStyle} />\n            <PriceKnob ref={knobLeft} $left style={leftStyle} onMouseDown={handleMouseDown} />\n            <PriceKnob ref={knobRight} $right style={rightStyle} onMouseDown={handleMouseDown} />\n        </div>\n      </PriceBar>\n      {isDragging && (\n        <Cover\n          onMouseMove={handleMouseMove}\n          onMouseUp={handleMouseUp}\n          onMouseLeave={handleMouseLeave}\n        />\n      )}\n    </div>\n  )\n}\n\nexport const Filter = () => {\n  \n  const sizes = ['S', 'M', 'L']\n  const colors = ['brown', 'yellow', 'white', 'grey', 'black']\n\n  const { pathname, search } = useContext(LocationContext);\n  const newSearch = new URLSearchParams(search)\n\n  const clearedSearch = newSearch.has('order') ? new URLSearchParams({order: newSearch.get('order')}) : null\n\n  const clearURL = clearedSearch ? `${pathname}?${clearedSearch}` : pathname\n  \n  return (\n    <>\n      <ControllerBtn>\n        <label htmlFor=\"filter\">\n          <FontAwesomeIcon icon={faFilter}/>\n        </label>\n      </ControllerBtn>\n      <FilterContainer>\n        <H4>商品篩選</H4>\n        {(newSearch.has('size') || newSearch.has('color') || newSearch.has('price')) && (\n          <ClearBtn>\n            <Link to={clearURL}>\n              <span>清除篩選</span>\n            </Link>\n          </ClearBtn>\n        )}\n        <SizeFilter>\n          <P>尺寸</P>\n          <ul>\n            {sizes.map(size => (\n              <li key={size}>\n                <SizeSelect {...{size}} />\n              </li>\n            ))}\n          </ul>\n        </SizeFilter>\n        <ColorFilter>\n          <P>顏色</P>\n          <ul>\n            {colors.map(color => (\n              <li key={color}>\n                <ColorSelect {...{color}} />\n              </li>\n            ))}\n          </ul>\n        </ColorFilter>\n        <PriceFilter>\n          <P>價格</P>\n          <PriceSelect />\n        </PriceFilter>\n      </FilterContainer>\n    </>\n  )\n}","import styled from 'styled-components';\nimport { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { H4, P, Span, MEDIA_QUERY } from '../constants/style';\n\nimport useProduct from '../hooks/useProduct';\nimport { getProductsAPI } from '../webAPI/productAPI';\nimport { Img } from './Img';\n\nconst AsideBlock = styled.div`\n\tborder: 1px solid ${props => props.theme.color.lightGrey}8;\n\t& > h4 {\n\t\tpadding: 10px 15px;\n\t\tfont-weight: ${props => props.theme.fontWeight.xl};\n\t\tbackground-color: ${props => props.theme.color.light_primary};\n\t}\n\t& a {\n\t\tcolor: ${props => props.theme.color.black};\n\t}\n`;\n\nconst TrendContainer = styled(AsideBlock)`\n\t${MEDIA_QUERY.main} {\n\t\tdisplay: none;\n\t}\n\t& > p {\n\t\ttext-align: center;\n\t\tpadding: 20px;\n\t}\n`;\n\nconst TrendCard = styled.section`\n\tpadding: 10px 0;\n\tdisplay: flex;\n\t& > div {\n\t\tpadding: 0 10px;\n\t}\n`;\n\nconst TrendImage = styled.div`\n\tz-index: 1;\n\twidth: 60%;\n\tdisplay: flex;\n\talign-items: center;\n\tposition: relative;\n\t& img {\n\t\twidth: 100%;\n\t}\n`;\n\nconst TrendInfo = styled.div`\n\twidth: 40%;\n\t& p {\n\t\tpadding: 5px 0;\n\t}\n\t& span {\n\t\tdisplay: block;\n\t\tfont-weight: ${props => props.theme.fontWeight.l};\n\t}\n`;\n\nconst TrendPrice = styled.div`\n\t& span {\n\t\t&:nth-child(1) {\n\t\t\tcolor: ${props => props.theme.color.grey};\n\t\t\ttext-decoration: line-through;\n\t\t}\n\t\t&:nth-child(2) {\n\t\t\tcolor: ${props => props.theme.color.alert};\n\t\t}\n\t}\n`;\n\nconst TrendItem = ({ trend }) => {\n\tconst { addCommaToPrice } = useProduct();\n\n\treturn (\n\t\t<TrendCard>\n\t\t\t<TrendImage>\n\t\t\t\t<Link to={`/product/${trend.id}`}>\n\t\t\t\t\t<Img image={trend.Images[0]} />\n\t\t\t\t</Link>\n\t\t\t</TrendImage>\n\t\t\t<TrendInfo>\n\t\t\t\t<Link to={`/product/${trend.id}`}>\n\t\t\t\t\t<P>{trend.name}</P>\n\t\t\t\t</Link>\n\t\t\t\t{trend.is_sale ? (\n\t\t\t\t\t<TrendPrice>\n\t\t\t\t\t\t<Span>NT ${addCommaToPrice(trend.price_standard)}</Span>\n\t\t\t\t\t\t<Span>NT ${addCommaToPrice(trend.price_sale)}</Span>\n\t\t\t\t\t</TrendPrice>\n\t\t\t\t) : (\n\t\t\t\t\t<Span>NT ${addCommaToPrice(trend.price_standard)}</Span>\n\t\t\t\t)}\n\t\t\t</TrendInfo>\n\t\t</TrendCard>\n\t);\n};\n\nexport const Trend = () => {\n\tconst [trends, setTrends] = useState();\n\tconst [error, setError] = useState();\n\n\tuseEffect(() => {\n\t\tconst search = '?is_on=1&order=sold_desc';\n\t\tgetProductsAPI('', search).then(result => {\n\t\t\tif (!result.ok) return setError(result.message);\n\t\t\tsetTrends(result.data.slice(0, 4));\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t<TrendContainer>\n\t\t\t<H4>熱賣商品</H4>\n\t\t\t{!trends && (error ? <P>{error}</P> : <P>商品載入中...</P>)}\n\t\t\t{trends &&\n\t\t\t\t!error &&\n\t\t\t\t(trends.length > 0 ? (\n\t\t\t\t\ttrends.map(trend => (\n\t\t\t\t\t\t<TrendItem key={trend.id} trend={trend} />\n\t\t\t\t\t))\n\t\t\t\t) : (\n\t\t\t\t\t<P>查無商品</P>\n\t\t\t\t))}\n\t\t</TrendContainer>\n\t);\n};\n","import { Link } from 'react-router-dom';\n\nimport styled from 'styled-components';\nimport { MEDIA_QUERY } from '../constants/style';\n\nimport { Filter } from '../pages/ListPage/Filter';\nimport { Img } from './Img';\nimport { Trend } from './Trend';\n\nconst Cover = styled.label`\n\tz-index: 0;\n\tposition: fixed;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\topacity: 0;\n\tdisplay: none;\n\t// background-color: #aaaa;\n`;\n\nconst PictureContainer = styled.div`\n\tposition: relative;\n\taspect-ratio: 0.75;\n\t& img {\n\t\twidth: 100%;\n\t\taspect-ratio: 0.75;\n\t}\n\t& a {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t}\n\t${MEDIA_QUERY.main} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst AsideContainer = styled.aside`\n\twidth: 20%;\n\tmin-width: 250px;\n\t& > div {\n\t\tz-index: 1;\n\t\tmargin: 10px;\n\t\tbackground-color: ${props => props.theme.color.white};\n\t}\n\t${MEDIA_QUERY.main} {\n\t\tposition: fixed;\n\t\tleft: -240px;\n\t\tz-index: 9;\n\t\ttransition: 0.3s;\n\t}\n`;\n\nconst Controller = styled.input`\n\tdisplay: none;\n\t&:checked {\n\t\t& ~ aside {\n\t\t\tleft: -10px;\n\t\t}\n\t\t& + label {\n\t\t\tdisplay: block;\n\t\t}\n\t}\n`;\n\nexport const Aside = ({ filter }) => {\n\treturn (\n\t\t<>\n\t\t\t{filter && (\n\t\t\t\t<>\n\t\t\t\t\t<Controller id=\"filter\" type=\"checkbox\" />\n\t\t\t\t\t<Cover htmlFor=\"filter\" />\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<AsideContainer>\n\t\t\t\t<PictureContainer>\n\t\t\t\t\t<Link to=\"/products\" />\n\t\t\t\t\t<Img\n\t\t\t\t\t\timage={{\n\t\t\t\t\t\t\tsrc: 'https://picsum.photos/200/300',\n\t\t\t\t\t\t\talt: 'aside_img',\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</PictureContainer>\n\t\t\t\t{filter && <Filter />}\n\t\t\t\t<Trend />\n\t\t\t</AsideContainer>\n\t\t</>\n\t);\n};\n","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\"\nimport { useEffect, useContext } from \"react\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTh, faThLarge, faChevronDown, faAlignJustify } from '@fortawesome/free-solid-svg-icons'\n\nimport { LocationContext } from \"./ListPage\";\n\nimport { Span } from \"../../constants/style\"\nimport { MEDIA_QUERY, Btn } from \"../../constants/style\"\nimport { useRef } from \"react\";\n\nconst SortContainer = styled.div`\n  margin: 0 10px;\n  padding: 10px 15px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: ${props => props.theme.color.lightGrey}3;\n`\n\nconst GalleryBtnGroup = styled.div`\n  z-index: 1;\n  ${MEDIA_QUERY.s} {\n    display: none;\n  }\n`\n\nconst GalleryBtn = styled(Btn)`\n  & svg {\n    padding: 5px;\n    font-size: ${props => props.theme.fontSize.btn};\n  }\n  ${MEDIA_QUERY.m} {\n    ${props => props.$four && 'display: none;'}\n  }\n`\n\nconst GalleryRadio = styled.input`\n  display: none;\n  &:checked {\n    & ~ div {\n      & section {\n        width: ${props => props.$two && 'calc(100%/2)'};\n        width: ${props => props.$three && 'calc(100%/3)'};\n        width: ${props => props.$four && 'calc(100%/4)'};\n      }\n    }\n  }\n`\n\nconst MenuContainer = styled.div`\n  width: 150px;\n  position: relative;\n  & span {\n    display: block;\n    font-weight: ${props => props.theme.fontWeight.l};\n  }\n  & > input {\n    display: none;\n    &:checked {\n      & ~ ul {\n        display: block;\n      }\n      & + label {\n        display: block;\n      }\n    }\n  }\n`\nconst Menu = styled.div`\n  z-index: 1;\n  background-color: ${props => props.theme.color.white};\n  border: 1px solid ${props => props.theme.color.lightGrey}8;\n  padding: 5px 10px;\n  display: flex;\n  justify-content: space-between;\n  position: relative;\n  & span {\n    color: ${props => props.theme.color.lightGrey};\n  }\n  & button {\n    & svg {\n      font-size: ${props => props.theme.fontSize.bodyLarge};\n    }\n  }\n  & label {\n    position: absolute;\n    display: block;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n`\n\nconst SubMenu = styled.ul`\n  width: 100%;\n  position: absolute;\n  top: 33px;\n  background-color: #fff;\n  z-index: 5;\n  box-shadow: 1px 0px 5px ${props => props.theme.color.lightGrey};\n  display: none;\n  & li:hover {\n    background-color: ${props => props.theme.color.grey};\n    & span {\n    color: ${props => props.theme.color.light_primary};\n    }\n  }\n  & span {\n    padding: 5px 10px;\n    color: ${props => props.theme.color.grey};\n  }\n`\n\nconst Cover = styled.label`\n  z-index: 0;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  opacity: 0;\n  display: none;\n  // background-color: #aaaa;\n`\n\nconst SortSelect = ({ sortMap, order }) => {\n\n  const { pathname, search } = useContext(LocationContext);\n  const newSearch = new URLSearchParams(search);\n\n  newSearch.set('order', order)\n  if (newSearch.has('page')) {\n    newSearch.delete('page')\n  }\n\n  const url = `${pathname}?${newSearch}`\n\n  return (\n    <Link to={url}>\n      <Span>{sortMap[order]}</Span>\n    </Link>\n  )\n}\n\nconst SortMenu = () => {\n\n  let { search } = useContext(LocationContext);\n  search = new URLSearchParams(search);\n  const currentOrder = search.get('order');\n\n  const sortMenuDOM = useRef()\n\n  const sortMap = {\n    sold_desc: '熱門度優先',\n    price_desc: '價格 (高至低)',\n    price_asc: '價格 (低至高)',\n  };\n\n  const title = currentOrder ? sortMap[currentOrder] : '排序依'\n\n  useEffect(() => {\n    sortMenuDOM.current.checked = false\n  }, [search])\n\n  return (\n    <MenuContainer>\n      <Menu>\n        <label htmlFor=\"sort-menu\" />\n        <Span>{title}</Span>\n        <Btn><FontAwesomeIcon icon={faChevronDown} /></Btn>\n      </Menu>\n      <input id=\"sort-menu\" type=\"checkbox\" ref={sortMenuDOM} />\n      <Cover htmlFor=\"sort-menu\" />\n      <SubMenu>\n        {Object.keys(sortMap).map(order => (\n          <li key={order}>\n            <SortSelect {...{ sortMap, order }} />\n          </li>\n        ))}\n      </SubMenu>\n    </MenuContainer>\n  )\n}\n\nexport const Sort = () => {\n  return (\n    <>\n      <SortContainer>\n        <GalleryBtnGroup>\n          <GalleryBtn>\n            <label htmlFor=\"two-columns\">\n              <FontAwesomeIcon icon={faThLarge} />\n            </label>\n          </GalleryBtn>\n          <GalleryBtn>\n            <label htmlFor=\"three-columns\">\n              <FontAwesomeIcon icon={faTh} />\n            </label>\n          </GalleryBtn>\n          <GalleryBtn $four>\n            <label htmlFor=\"four-columns\">\n              <FontAwesomeIcon icon={faAlignJustify} transform={{ rotate: 90 }} />\n            </label>\n          </GalleryBtn>\n        </GalleryBtnGroup>\n        <SortMenu />\n      </SortContainer>\n      <GalleryRadio $two id=\"two-columns\" name=\"gallery\" type=\"radio\" />\n      <GalleryRadio $three id=\"three-columns\" name=\"gallery\" type=\"radio\" />\n      <GalleryRadio $four id=\"four-columns\" name=\"gallery\" type=\"radio\" />\n    </>\n  )\n}","import { Link } from \"react-router-dom\"\nimport { useContext } from \"react\"\nimport styled from \"styled-components\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\n\nimport { MEDIA_QUERY } from \"../../constants/style\"\n\nimport { LocationContext } from \"./ListPage\"\n\n\nconst PageContainer = styled.div`\n  z-index: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  & button + button {\n    margin-left: 5px;\n  }\n`\n\nconst PageBtn = styled.button`\n  width: 30px;\n  height: 30px;\n  transition: .2s;\n  box-shadow: 1px 0px 5px ${props => props.theme.color.lightGrey}5;\n  background-color: ${props => props.$selected ? props.theme.color.lightGrey : props.theme.color.white};\n  &:hover {\n    background-color: ${props => props.theme.color.black};\n    & a, svg {\n        color: ${props => props.theme.color.white};\n    }\n  }\n  position: relative;\n  & a {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    line-height: 30px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    font-weight: ${props => props.theme.fontWeight.xl};\n    color: ${props => props.$selected ? props.theme.color.white : props.theme.color.black};\n  }\n`\n\nconst Result = styled.div`\n    ${MEDIA_QUERY.s} {\n        opacity: 0;\n    }\n`\n\nconst PageSelect = ({ page }) => {\n\n    const { pathname, search } = useContext(LocationContext);\n    const newSearch = new URLSearchParams(search);\n    const currentPage = parseInt(newSearch.get('page')) || 1;\n\n    newSearch.set('page', page)\n    const selected = (currentPage === page) ? true : false\n\n    const url = `${pathname}?${newSearch}`\n\n    return (\n        <PageBtn $selected={selected}>\n            <Link to={url}>{page}</Link>\n        </PageBtn>\n    )\n}\n\nconst Page = ({ page_count }) => {\n\n    const { pathname, search } = useContext(LocationContext);\n    const newSearch = new URLSearchParams(search);\n    const currentPage = parseInt(newSearch.get('page')) || 1;\n\n    let n = 1\n    const arr = []\n    while (n <= page_count) {\n        arr.push(n)\n        n++\n    }\n\n    if (currentPage !== arr[0]) {\n        newSearch.set('page', currentPage - 1)\n    }\n    if (currentPage !== arr[arr.length - 1]) {\n        newSearch.set('page', currentPage + 1)\n    }\n\n    const url = `${pathname}?${newSearch}`\n\n    return (\n        <PageContainer>\n            {arr.length > 0 && (currentPage !== arr[0]) && (\n                <PageBtn>\n                    <Link to={url}>\n                        <FontAwesomeIcon icon={faChevronDown} transform={{ rotate: 90 }} />\n                    </Link>\n                </PageBtn>\n            )}\n            {arr.map(page => (\n                <PageSelect\n                    key={page}\n                    page={page}\n                />\n            ))}\n            {arr.length > 0 && (currentPage !== arr[arr.length - 1]) && (\n                <PageBtn>\n                    <Link to={url}>\n                        <FontAwesomeIcon icon={faChevronDown} transform={{ rotate: -90 }} />\n                    </Link>\n                </PageBtn>\n            )}\n        </PageContainer>\n    )\n}\n\nexport const Pagination = ({ products }) => {\n\n    const { count, per_page, page, page_count } = products;\n\n    const number_start = page ? (page - 1) * per_page + 1 : 0\n    const number_end = !page ? 0 : (page === page_count) ? (\n        number_start + count - (page - 1) * per_page - 1\n    ) : (\n        number_start + per_page - 1\n    )\n\n    return (\n        <>\n            <Result>\n                <p>{number_start} ~ {number_end}，共 {count} 筆資料</p>\n            </Result>\n            <Page {...{ page_count }} />\n        </>\n    )\n}","import styled from \"styled-components\"\nimport { useEffect, useContext } from \"react\";\n\nimport { useSelector, useDispatch } from 'react-redux'\nimport { getProducts, setProducts } from \"../../features/product/productSlice\";\n\nimport { P, H4 } from \"../../constants/style\"\nimport { MEDIA_QUERY } from \"../../constants/style\"\n\nimport { ProductItem } from \"../../components/ProductItem\";\n\nimport { Pagination } from \"./Pagination\";\nimport { LocationContext } from \"./ListPage\";\n\nconst ProductContainer = styled.div`\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  text-align: center;\n  & > section {\n    width: calc(100%/4);\n    ${MEDIA_QUERY.l} {\n      width: calc(100%/3);\n    }\n    ${MEDIA_QUERY.m} {\n      width: 50%;\n    }\n    ${MEDIA_QUERY.xs} {\n      width: 100%;\n    }\n  }\n  & > p {\n    margin: 0 auto;\n    padding: 20px;\n  }\n  & > h4 {\n    margin: 0 auto;\n    padding: 40px 0;\n  }\n`\n\nconst IndexContainer = styled.div`\n\n  height: 55px;\n  box-sizing: border-box;\n\n  margin: 0 10px;\n  padding: 10px 15px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: ${props => props.theme.color.lightGrey}3;\n`\n\nexport const ProductList = () => {\n\n  const { pathname, search } = useContext(LocationContext);\n\n  const products = useSelector(state => state.product.products)\n  const error = useSelector(state => state.product.error)\n  const dispatch = useDispatch()\n\n  useEffect(() => {    \n    const newSearch = new URLSearchParams(search);\n    if(!newSearch.has('page')){\n      newSearch.set('page', 1)\n    }\n    const pathArr = pathname.split('/').slice(2, 4)\n    dispatch(getProducts(pathArr, `?${newSearch}`))\n    return () => {\n      dispatch(setProducts(null))\n    }\n  }, [pathname, search, dispatch])\n  \n  return (\n    <>\n      <ProductContainer>\n        {!products && (\n          error ? (\n            <P>{error}</P>\n          ) : (\n            <H4>商品載入中...</H4>\n          )\n        )}\n        {products?.rows && !error && (\n          products.rows.length > 0 ? (\n            products.rows.map(product => (\n              <ProductItem key={product.id} product={product} />\n            ))\n          ) : (\n            <H4>查無商品</H4>\n          )\n        )}\n      </ProductContainer>\n      <IndexContainer>\n        {products && (\n          <Pagination {...{products}} />\n        )}\n      </IndexContainer>\n    </>\n  )\n}","import styled from \"styled-components\"\nimport { Link } from \"react-router-dom\";\n\nimport { useSelector } from \"react-redux\";\nimport useProduct from \"../../hooks/useProduct\"\n\nimport { MEDIA_QUERY } from \"../../constants/style\";\nimport { H4, P, Span } from \"../../constants/style\"\n\n\nconst PopupItem = styled.div`\n    display: flex;\n    & > div {\n        padding: 20px;\n        width: 50%;\n        & img {\n            width: 100%;\n        }\n    }\n    ${MEDIA_QUERY.s} {\n        display: block;\n        & > div {\n            padding: 10px 0;\n            margin: 0 auto;\n            width: 80%;\n        }\n    }\n`\n\nconst PopupBtnGroup = styled.div`\n  text-align: center;\n  padding: 10px 0 20px;\n  & a {\n    margin-left: 5px;\n  }\n`\nconst PopupBtn = styled.button`\n  padding: 5px 15px;\n  border-radius: .25em;\n  border: 1px solid ${props => props.$checked ? props.theme.color.black : props.theme.color.lightGrey};\n  transition: .4s;\n  background-color: ${props => props.$checked ? props.theme.color.black : props.theme.color.white};\n  & span {\n    font-size: ${props => props.theme.fontSize.bodyLarge};\n    font-weight: ${props => props.theme.fontWeight.l};\n    color: ${props => props.$checked ? props.theme.color.white : props.theme.color.black};\n  }\n  &:hover {\n    background-color: ${props => props.theme.color.black};\n    border-color: ${props => props.theme.color.black};\n    & span {\n      color: ${props => props.theme.color.white};\n    }\n  }\n`\n\n\nexport const CartPopup = () => {\n\n  const product = useSelector(state => state.product.product)\n  const spec = useSelector(state => state.product.spec)\n\n  const mainImg = product.product.Images.find(img => img.is_main)\n  const price = product.product.is_sale ? product.product.price_sale : product.product.price_standard\n  \n  const {\n    handleClosePopup\n  } = useProduct()\n\n  return (\n    <>\n      <PopupItem>\n          <div>\n            <img src={mainImg.src} alt={mainImg.alt}/>\n          </div>\n          <div>\n            <H4>{product.product.name}</H4>\n            <P>價格: {price}</P>\n            <P>尺寸: {spec.size}, 顏色: {spec.color}</P>\n            <P>數量: {spec.qty}</P>\n          </div>\n      </PopupItem>\n      <PopupBtnGroup>\n        <PopupBtn onClick={handleClosePopup()}>\n          <Span>繼續選購</Span>\n        </PopupBtn>\n        <Link to=\"/cart\" onClick={handleClosePopup()}>\n          <PopupBtn>\n            <Span>前往結帳</Span>\n          </PopupBtn>\n        </Link>\n      </PopupBtnGroup>\n    </>\n  )\n}","import styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\n\nimport { P, Span } from '../constants/style';\n\nconst PopupContent = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\t& a {\n\t\ttext-decoration: underline ${props => props.theme.color.black};\n\t}\n\t& span {\n\t\tfont-weight: ${props => props.theme.fontWeight.xl};\n\t}\n`;\n\nexport const LoginPopup = () => {\n\tconst popupCode = useSelector(state => state.general.popupCode);\n\n\treturn (\n\t\t<>\n\t\t\t{popupCode === 'login' && (\n\t\t\t\t<PopupContent>\n\t\t\t\t\t<P>請先登入！</P>\n\t\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t\t<Span>點我登入</Span>\n\t\t\t\t\t</Link>\n\t\t\t\t</PopupContent>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","import { useEffect, useState } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { sizeMap } from \"../constants/mapping\";\nimport { setErrorMessage } from \"../features/general/generalSlice\";\nimport { addProductAPI, searchProductAPI, updateProductAPI, uploadImageAPI } from \"../webAPI/productAPI\"\n\n\nexport default function useAdminProduct ({step, setStep, productToAdd, setProductToAdd, top}) {\n\n    const history = useHistory();\n\n    const [name, setName] = useState('')\n    const [gender, setGender] = useState('')\n    const [category, setCategory] = useState('')\n    const [desc, setDesc] = useState('')\n    const [material, setMaterial] = useState('')\n    const [washing, setWashing] = useState('')\n    const [images, setImages] = useState(Array(4).fill({src: ''}))\n\n    const [sizes, setSizes] = useState([])\n    const [colors, setColors] = useState([])\n    \n    const [patterns, setPatterns] = useState([])\n    const [isOn, setIsOn] = useState(false)\n    const [isSale, setIsSale] = useState(false)\n    const [priceStandard, setPriceStandard] = useState(0)\n    const [priceSale, setPriceSale] = useState(0)\n\n    const product = useSelector(state => state.product.product)\n    const errorMessage = useSelector(state => state.general.errorMessage)\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        if(!product) return\n        setName(product.product.name)\n        setGender(product.product.gender)\n        setCategory(product.product.Category.name)\n        setDesc(product.product.desc)\n        setMaterial(product.product.material)\n        setWashing(product.product.washing)\n        setImages(Array(4).fill({src: ''}).map((image, i) => product.product.Images[i] ? {...image, id: product.product.Images[i].id, src: product.product.Images[i].src, alt: `${product.product.name}_0${i+1}`} : {...image, alt: `${product.product.name}_0${i+1}`}))\n        setSizes(product.product[product.product.Category.group].map(size => size.waist ? {...size, waist: size.waist.split('~')} : size))\n        setColors(product.product.Colors)\n    }, [product])\n\n    const [isSubmitted, setIsSubmitted] = useState(false)\n\n    useEffect(() => {\n        if(!isSubmitted) return\n        addProductAPI(productToAdd)\n        .then(result => {\n            setIsSubmitted(false)\n            if (!result.ok) {\n                let lastProduct = {...productToAdd}\n                switch (isSubmitted) {\n                    case 'first': {\n                        lastProduct = ''\n                        break\n                    }\n                    case 'second': {\n                        delete lastProduct.sizes\n                        delete lastProduct.colors\n                        break\n                    }\n                    case 'third': {\n                        delete lastProduct.patterns\n                        delete lastProduct.is_on\n                        delete lastProduct.is_sale\n                        delete lastProduct.price_standard\n                        delete lastProduct.price_sale\n                        break\n                    }\n                    default: break\n                }\n                setProductToAdd(lastProduct)\n                alert(result.message)\n                return window.scrollTo(0, 0)\n            }\n            dispatch(setErrorMessage(''))\n            setProductToAdd('')\n        })\n        .then(() => {\n            setTimeout(() => {\n                alert('新增成功!')\n                history.push('/admin/product/information')\n            });\n        })\n    }, [isSubmitted, dispatch, history, productToAdd, setProductToAdd])\n\n\n    const handleInputChange = e => {\n        switch (e.target.name) {\n            case 'name': {\n                if(errorMessage) dispatch(setErrorMessage(''))\n                return setName(e.target.value)\n            }\n            case 'gender': {\n                if(e.target.id === 'male') return setGender('M')\n                if(e.target.id === 'female') return setGender('F')\n                break\n            }\n            case 'category': return setCategory(e.target.value)\n            case 'desc': return setDesc(e.target.value)\n            case 'material': return setMaterial(e.target.value)\n            case 'washing': return setWashing(e.target.value)\n            case 'image': {\n                return setImages(images.map((image, index) => index === parseInt(e.target.id.slice(-1)) ? {...image, src: e.target.value} : image))\n            }\n            case 'size': {\n                if(e.target.id.includes('size') && errorMessage === '尺碼不可重複') dispatch(setErrorMessage(''))\n                if(e.target.id.includes('waist')){\n                    return setSizes(sizes.map((size, i) => i === parseInt(e.target.id.slice(-1)) ? {...size, waist: size.waist.map((a, i) => i === parseInt(e.target.id.split('_')[1]) ? e.target.value : a)} : size))\n                }\n                return setSizes(sizes.map((size, i) => i === parseInt(e.target.id.slice(-1)) ? {...size, [e.target.id.slice(0, -2)]: e.target.value.toUpperCase()} : size))\n            }\n            case 'color': {\n                if(e.target.id.includes('name') && errorMessage === '名稱不可重複') dispatch(setErrorMessage(''))\n                return setColors(colors.map((color, i) => i === parseInt(e.target.id.slice(-1)) ? {...color, [e.target.id.split('_')[0]]: e.target.value.toLowerCase()} : color))\n            }\n            case 'pattern': {\n                return setPatterns(patterns.map((pattern, i) => i === parseInt(e.target.id.slice(-1)) ? {...pattern, [e.target.id.split('_')[0]]: e.target.value} : pattern))\n            }\n            case 'is_on': return setIsOn(e.target.checked)\n            case 'is_sale': return setIsSale(e.target.checked)\n            case 'price_standard': return setPriceStandard(e.target.value)\n            case 'price_sale': return setPriceSale(e.target.value)\n            default: break\n        }\n    }\n\n    const handleSetStep = e => {\n        switch (step) {\n            case 1: {\n                window.scrollTo(0, 0)\n                if(!name || !gender || !category || !images[0].src) return; \n                return searchProductAPI([['name', name]]).then(result => {\n                    if(result.ok) return dispatch(setErrorMessage('商品名稱重複'))\n                    saveProduct()\n                    setStep(step+1)\n                })\n            }\n            case 2: {\n                if(e.target.name === 'next'){\n                    if(saveProduct()){\n                        setStep(step+1)\n                        window.scrollTo(0, 400)\n                    }else{\n                        window.scrollTo(0, 0)\n                    }\n                }\n                if(e.target.name === 'back') {\n                    setProductToAdd('')\n                    setStep(step-1)\n                    window.scrollTo(0, 0)\n                    setSizes([])\n                }\n                break\n            }\n            case 3: {\n                const lastProduct = {...productToAdd}\n                delete lastProduct.sizes\n                delete lastProduct.colors\n                setProductToAdd(lastProduct)\n                setStep(step-1)\n                return window.scrollTo(0, 0)\n            }\n            default: break\n        }\n    }\n\n    const handleFormSubmit = e => {\n        e.preventDefault()\n        const [type, stepName] = e.target.name.split('_')\n        switch (type) {\n            case 'edit': {\n                return checkForm() ? (\n                    updateProductAPI(product.product.id, {\n                        name, \n                        gender, \n                        desc, \n                        material, \n                        washing, \n                        images, \n                        sizes, \n                        colors, \n                    }).then(result => {\n                        if (!result.ok) {\n                            dispatch(setErrorMessage(result.message))\n                            return top.current.scrollIntoView();\n                        }\n                        dispatch(setErrorMessage(''))\n                        alert('更新成功!')\n                        history.go()\n                    })\n                ) : (\n                    top.current.scrollIntoView()\n                )\n            }\n            case 'add': {\n                if (stepName === 'third') saveProduct()\n                return setIsSubmitted(stepName)\n            }\n            default: break\n        }\n    }\n\n    function checkForm () {\n        if(!sizes.every(size => size.size) || !colors.every(color => color.name)) return false\n        if(new Set(sizes.map(size => size.size)).size !== sizes.length){\n            dispatch(setErrorMessage('尺碼不可重複'))\n            return false\n        }\n        if(new Set(colors.map(color => color.name)).size !== colors.length){\n            dispatch(setErrorMessage('名稱不可重複'))\n            return false\n        }\n        return true\n    }\n\n    function saveProduct () {\n        switch (step) {\n            case 1: {\n                return setProductToAdd({\n                    ...productToAdd,\n                    name, gender, category, desc, material, washing, \n                    images: images\n                        .filter(image => image.src)\n                        .map((image, index) => image.src && ({\n                            src: image.src,\n                            alt: `${name}_0${index+1}`\n                        }))\n                })\n            }\n            case 2: {\n                if (checkForm()) {\n                    setProductToAdd({\n                        ...productToAdd,\n                        sizes, colors\n                    })\n                    return true\n                } else {\n                    return false\n                }\n            }\n            case 3: {\n                setProductToAdd({\n                    ...productToAdd,\n                    patterns,\n                    is_on: isOn,\n                    is_sale: isSale,\n                    price_standard: priceStandard,\n                    price_sale: priceSale\n                })\n                return true\n            }\n            default: break\n        }\n    }\n\n    const handleAddPattern = group => e => {\n        switch (e.target.name) {\n            case 'size': {\n                if(errorMessage === '尺碼不可重複') dispatch(setErrorMessage(''))\n                const obj = {size: ''}\n                Object.keys(sizeMap[group]).map(ele => (\n                    obj[ele] = (ele === 'waist' ? [0, 0] : 0)\n                ))\n                return setSizes([...sizes, obj])\n            }\n            case 'color': {\n                if(errorMessage === '名稱不可重複') dispatch(setErrorMessage(''))\n                return setColors([...colors, {name: '', code: '#000000'}])\n            }\n            default: break\n        }\n    }\n\n    const handleDeletePattern = index => e => {\n        switch (e.currentTarget.name) {\n            case 'size': {\n                if(sizes.length === 1) return\n                if(errorMessage === '尺碼不可重複') dispatch(setErrorMessage(''))\n                return setSizes(sizes.filter((size, i) => i !== index))\n            }\n            case 'color': {\n                if(colors.length === 1) return\n                if(errorMessage === '名稱不可重複') dispatch(setErrorMessage(''))\n                return setColors(colors.filter((size, i) => i !== index))\n            }\n            default: break\n        }\n    }\n\n    const handleUploadImage = e => {\n        console.log('test')\n        // const index = parseInt(e.target.id.slice(-1))\n        // uploadImageAPI(e.target.files[0])\n        //     .then(result => {\n        //         console.log(result.data.link)\n        //         setImages(images.map((image, i) => i === index ? {...image, src: result.data.link} : image))\n        //     })\n    }\n\n    return {\n        name, \n        gender, \n        category, \n        desc, \n        material, \n        washing, \n        images, \n        setImages,\n\n        sizes, \n        setSizes, \n        colors, \n        setColors, \n\n        patterns, \n        setPatterns, \n\n        isOn, \n        setIsOn, \n        isSale, \n        setIsSale, \n        priceStandard, \n        setPriceStandard, \n        priceSale, \n        setPriceSale, \n\n        handleInputChange, \n        handleSetStep, \n        handleFormSubmit, \n        checkForm, \n        saveProduct, \n        handleAddPattern, \n        handleDeletePattern, \n        handleUploadImage,\n\n        isSubmitted\n    }\n}","import { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\n\nimport { sizeMap } from \"../../../constants/mapping\"\nimport { P, fontTheme, TextBtn, Btn } from \"../../../constants/style\";\n\nimport useAdminProduct from \"../../../hooks/useAdminProduct\";\nimport { useCallback } from \"react\";\nimport { uploadImageAPI } from \"../../../webAPI/productAPI\";\nimport { Loader } from \"../../../components/Loader\";\n\n\nconst StepContainer = styled.div`\n    border: 1px solid #aaa8;\n    border-radius: .5em;\n    background-color: #eee;\n    ${props => !props.$active && 'opacity: 0.5;'}\n    transition: .5s;\n    padding: 10px;\n`\n\nconst FirstStepContainer = styled(StepContainer)``\nconst SecondStepContainer = styled(StepContainer)`\n    margin-bottom: 20px;\n    max-height: ${props => props.$step >= 2 || props.$step === 0 ? '1000px' : '80px'};\n    overflow: hidden;\n    transition: 1s;\n`\nconst ThirdStepContainer = styled(StepContainer)`\n    max-height: ${props => props.$step >= 3 || props.$step === 0 ? '1000px' : '80px'};\n    overflow: hidden;\n    transition: 1s;\n`\n\nconst MainContainer = styled.main`\n    width: 70%;\n    flex-grow: 1;\n    display: flex;\n    & > div {\n        width: 50%;\n        padding: 10px;\n    }\n`\n\nconst LeftContainer = styled.div``\nconst RightContainer = styled.div``\n\n\nconst FlowNode = styled.div`\n    ${fontTheme.span};\n    margin-right: 10px;\n    background-color: ${props => props.theme.color.lightGrey};\n    color: ${props => props.theme.color.white};\n    min-width: 60px;\n    min-height: 60px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n    & > p {\n        ${fontTheme.h4}\n    }\n`\n\nconst FlowText = styled.div`\n    ${fontTheme.h4}\n    padding-right: 10px;\n    color: ${props => props.theme.color.lightGrey};\n    min-width: ${props => props.$fixed && '108px'};\n`\n\nconst FlowContent = styled.li`\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n    padding: 10px;\n    position: relative;\n    & + li::before {\n        content: '>';\n        position: absolute;\n        left: -10px;\n        ${fontTheme.h3}\n        color: ${props => props.theme.color.lightGrey};\n    }\n    ${FlowNode} {\n        background-color: ${props => props.$active && props.theme.color.black};\n    }\n    ${FlowText} {\n        color: ${props => props.$active && props.theme.color.black};\n    }\n`\n\nconst InputBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    padding: 0px 10px 10px;\n    ${fontTheme.p}\n    position: relative;\n    & label {\n        line-height: 2em;\n    }\n    & input, select, textarea {\n        ${fontTheme.span}\n        padding: 3px 8px;\n        &:invalid {\n            border: 2px solid red;\n            & ~ span {\n                &::before {\n                    ${fontTheme.span}\n                    color: ${props => props.theme.color.alert};\n                    content: '這是必填欄位';\n                }\n            }\n        }\n    }\n    & > input, > select, > textarea {\n        margin: 0 5px;\n    }\n    & span {\n        position: absolute;\n        top: 10px;\n        right: 15px;\n        ${fontTheme.span}\n        color: ${props => props.theme.color.alert};\n    }\n`\n\nconst BtnContainer = styled.div`\n    display: flex;\n    justify-content: flex-end;\n    padding: 20px 10px 10px;\n    & > button {\n        margin: 0px 5px;\n    }\n`\n\nconst UploadBtn = styled(TextBtn)`\n    ${fontTheme.h5}\n    font-weight: ${props => props.theme.fontWeight.m};\n    padding: 0px;\n    & label {\n        padding: 5px 8px;\n        cursor: pointer;\n    }\n    & + input {\n        display: none;\n    }\n`\n\nconst AddBtn = styled(TextBtn)`\n    ${fontTheme.h5}\n    font-weight: ${props => props.theme.fontWeight.m};\n    padding: 3px 8px;\n`\n\nconst ImgInput = styled.div`\n    display: flex;\n    align-items: center;\n    margin: 0 5px;\n    & + div {\n        margin-top: 5px;\n    }\n    & input {\n        flex-grow: 9.5;\n        font-size: ${props => props.theme.fontSize.bodySmall};\n    }\n    & button {\n        flex-grow: 0.5;\n        margin-left: 5px;\n    }\n`\n\nconst CheckInput = styled.div`\n    & input {\n        margin: 0 5px;\n        & ~ input {\n            margin-left: 10px;\n        }\n    }\n`\n\nconst InputTitle = styled.div`\n    margin-left: 0;\n    display: flex;\n    align-items: center;\n    & > button {\n        margin-left: 10px;\n    }\n`\n\nconst SizeInput = styled.div`\n    display: flex;\n    flex-wrap: wrap;\n    & input {\n        margin: 0 5px;\n        width: 40px;\n    }\n    align-items: baseline;\n    margin: 5px 5px 0;\n    & > div {\n        // flex-grow: 1;\n        display: flex;\n        & > input {\n            // flex-grow: 1;\n        }\n    }\n    & > button {\n        margin: 5px 5px 0;\n        & svg {\n            font-size: ${props => props.theme.fontSize.h4};\n        }\n    }\n`\n\nconst ColorInput = styled.div`\n    display: flex;\n    & input {\n        margin: 0 5px;\n    }\n    & > div {\n        display: flex;\n        align-items: baseline;\n        margin: 5px 5px 0;\n        flex-grow: 1;\n        & > input {\n            flex-grow: 1;\n        }\n    }\n    & > button {\n        margin: 5px 5px 0;\n        & svg {\n            font-size: ${props => props.theme.fontSize.h4};\n        }\n    }\n`\n\nconst PatternInput = styled.div`\n    margin: 0 5px;\n    & input {\n        margin: 0 5px;\n        width: 40px;\n    }\n    & + div {\n        margin-top: 5px;\n    }\n`\n\nconst PriceInput = styled.div`\n    margin: 0 5px;\n    & input {\n        margin: 0 5px;\n        width: 60px;\n    }\n`\n\nexport const FirstStepInputs = ({step, name, gender, category, desc, material, washing, images, handleInputChange, setImages}) => {\n\n    const errorMessage = useSelector(state => state.general.errorMessage)\n\n    const [isLoading, setIsLoading] = useState(false)\n\n    const handleUploadImage = e => {\n        if(!e.target.files[0]) return\n        setIsLoading(true)\n        const index = parseInt(e.target.id.slice(-1))\n        uploadImageAPI(e.target.files[0])\n            .then(result => {\n                setImages(images.map((image, i) => i === index ? {...image, src: result.data.link} : image))\n                setIsLoading(false)\n            })\n    }\n\n    return (\n        <>\n            <InputBlock>\n                <label htmlFor=\"name\">品名</label>\n                <input\n                    value={name}\n                    onChange={handleInputChange}\n                    type=\"text\"\n                    name=\"name\"\n                    id=\"name\"\n                    disabled={step > 1}\n                    required\n                />\n                <span>{errorMessage === '商品名稱重複' && errorMessage}</span>\n            </InputBlock>\n            <InputBlock>\n                <label>性別</label>\n                <CheckInput>\n                    <input\n                        checked={gender === 'M'}\n                        onChange={handleInputChange}\n                        type=\"radio\"\n                        name=\"gender\"\n                        id=\"male\"\n                        disabled={step > 1}\n                        required\n                    />\n                    <label htmlFor=\"male\">男裝</label>\n                    <input\n                        checked={gender === 'F'}\n                        onChange={handleInputChange}\n                        type=\"radio\"\n                        name=\"gender\"\n                        id=\"female\"\n                        disabled={step > 1}\n                        required\n                    />\n                    <label htmlFor=\"female\">女裝</label>\n                    <span></span>\n                </CheckInput>\n            </InputBlock>\n            <InputBlock>\n                <label htmlFor=\"category\">分類</label>\n                <select\n                    value={category}\n                    onChange={handleInputChange}\n                    name=\"category\"\n                    id=\"category\"\n                    disabled={step !== 1}\n                    required pattern=\".\"\n                >\n                    <option value=\"\">-----</option>\n                    <option value=\"tops\">上衣類</option>\n                    <option value=\"shirts\">襯衫類</option>\n                    <option value=\"knit\">針織衫 / 毛衣</option>\n                    <option value=\"one_piece\">洋裝類</option>\n                    <option value=\"outer\">外套類</option>\n                    <option value=\"bottoms\">褲裝類</option>\n                    <option value=\"skirts\">裙子類</option>\n                    <option value=\"general\">配件類</option>\n                </select>\n                <span></span>\n            </InputBlock>\n            <InputBlock>\n                <label htmlFor=\"desc\">簡介</label>\n                <textarea\n                    value={desc}\n                    onChange={handleInputChange}\n                    name=\"desc\"\n                    id=\"desc\"\n                    disabled={step > 1}\n                    rows=\"5\"\n                />\n            </InputBlock>\n            <InputBlock>\n                <label htmlFor=\"material\">材質</label>\n                <textarea\n                    value={material}\n                    onChange={handleInputChange}\n                    name=\"material\"\n                    id=\"material\"\n                    disabled={step > 1}\n                    rows=\"2\"\n                />\n            </InputBlock>\n            <InputBlock>\n                <label htmlFor=\"washing\">洗滌方式</label>\n                <textarea\n                    value={washing}\n                    onChange={handleInputChange}\n                    name=\"washing\"\n                    id=\"washing\"\n                    disabled={step > 1}\n                    rows=\"4\"\n                />\n            </InputBlock>\n            <InputBlock>\n                <label htmlFor=\"image\">照片 (第一張為封面)</label>\n                {images.map((image, i) => (\n                    <ImgInput key={i}>\n                        <input\n                            value={image.src}\n                            placeholder={!i ? '(必填)' : '(選填)'}\n                            onChange={handleInputChange}\n                            type=\"text\"\n                            name=\"image\"\n                            id={`image_${i}`}\n                            disabled={step > 1}\n                            required={i === 0}\n                        />\n                        <UploadBtn $white $active={step === 1 || step === 0}>\n                            <label htmlFor={`upload_${i}`}>上傳照片</label>\n                        </UploadBtn>\n                        <input \n                            type=\"file\" \n                            id={`upload_${i}`}\n                            name=\"upload\"\n                            accept=\"image/*\"\n                            onChange={handleUploadImage}\n                        />\n                        <span></span>\n                    </ImgInput>\n                ))}\n            </InputBlock>\n            {isLoading && (\n                <Loader />\n            )}\n        </>\n    )\n}\n\nconst FirstStep = ({step, setStep, productToAdd, setProductToAdd}) => {\n\n    const {\n        name, \n        gender, \n        category, \n        desc, \n        material, \n        washing, \n        images, \n        setImages, \n        handleInputChange, \n        handleSetStep, \n    } = useAdminProduct({step, setStep, productToAdd, setProductToAdd})\n\n\n    return (\n        <FirstStepContainer $active={step === 1}>\n            <FlowContent $active>\n                <FlowNode>\n                    Step\n                    <p>01</p>\n                </FlowNode>\n                <FlowText $fixed>\n                    產品基本資料\n                </FlowText>\n            </FlowContent>\n            {/* <form onSubmit={e => e.preventDefault()}> */}\n                <FirstStepInputs {...{step, name, gender, category, desc, material, washing, images, handleInputChange, setImages}} />\n                <BtnContainer>\n                    <TextBtn type=\"button\" name=\"next\" onClick={handleSetStep} $active={step === 1} disabled={step !== 1}>下一步</TextBtn>\n                </BtnContainer>\n            {/* </form> */}\n        </FirstStepContainer>        \n    )\n}\n\nexport const SecondStepInputs = ({step, group, sizes, colors, handleInputChange, handleAddPattern, handleDeletePattern, sizesLength, colorsLength}) => {\n\n    const errorMessage = useSelector(state => state.general.errorMessage)\n\n    return (\n        <>\n            <InputBlock>\n                <InputTitle>\n                    <label>尺寸</label>\n                    {group !== 'Size_general' && (\n                        <AddBtn type=\"button\" onClick={handleAddPattern(group)} name=\"size\" $white $active={step === 2 || step === 0}>新增尺寸</AddBtn>\n                    )}\n                </InputTitle>\n                    {sizes.length > 0 ? (\n                        group && sizeMap[group] ? (\n                            sizes.map((size, i) => (\n                                <SizeInput key={i}>\n                                    <div>\n                                        <label htmlFor={`size_${i}`}>尺碼:</label>\n                                        <input\n                                            value={size.size}\n                                            onChange={handleInputChange}\n                                            type=\"text\"\n                                            name=\"size\"\n                                            id={`size_${i}`}\n                                            size=\"2\"\n                                            disabled={step !== 2 && (sizesLength ? i < sizesLength : 1)}\n                                            required\n                                        />\n                                        <span>{errorMessage === '尺碼不可重複' && errorMessage}</span>\n                                    </div>\n                                    {Object\n                                        .entries(sizeMap[group])\n                                        .map((spec, j) => (\n                                            <div key={j}>\n                                                <label htmlFor={`${spec[0]}_${i}`}>{spec[1]}:</label>\n                                                {spec[0] === 'waist' ? (\n                                                    <>\n                                                        <input\n                                                            value={size[spec[0]][0]}\n                                                            onChange={handleInputChange}\n                                                            type=\"number\"\n                                                            name=\"size\"\n                                                            id={`${spec[0]}_0_${i}`}\n                                                            min=\"0\"\n                                                            disabled={step !== 2 && step !== 0}\n                                                        />~\n                                                        <input\n                                                            value={size[spec[0]][1]}\n                                                            onChange={handleInputChange}\n                                                            type=\"number\"\n                                                            name=\"size\"\n                                                            id={`${spec[0]}_1_${i}`}\n                                                            min=\"0\"\n                                                            disabled={step !== 2 && step !== 0}\n                                                        />\n                                                    </>\n                                                ) : (\n                                                    <input\n                                                        value={size[spec[0]]}\n                                                        onChange={handleInputChange}\n                                                        type=\"number\"\n                                                        name=\"size\"\n                                                        id={`${spec[0]}_${i}`}\n                                                        min=\"0\"\n                                                        disabled={step !== 2 && step !== 0}\n                                                    />\n                                                )}\n                                            </div>\n                                        ))\n                                    }\n                                    <Btn \n                                        onClick={handleDeletePattern(i)} \n                                        type=\"button\" \n                                        name=\"size\"\n                                        disabled={step !== 2 && (sizesLength ? i < sizesLength : 1)}\n                                    >\n                                        <FontAwesomeIcon icon={faTimes} />\n                                    </Btn>\n                                </SizeInput>\n                        ))) : (\n                            <P>單一尺寸</P>\n                        )\n                    ) : (\n                        <>\n                            {Array(2).fill('').map((a, i) => (\n                                <SizeInput key={i}>\n                                    <div>\n                                        <label>尺碼:</label>\n                                        <input\n                                            value=\"\"\n                                            type=\"text\"\n                                            name=\"size\"\n                                            size=\"2\"\n                                            disabled\n                                            required\n                                        />\n                                    </div>\n                                </SizeInput>\n                            ))}\n                        </>\n                    )}\n            </InputBlock>\n            <InputBlock>\n                <InputTitle>\n                    <label>顏色</label>\n                    <AddBtn type=\"button\" onClick={handleAddPattern()} name=\"color\" $white $active={step === 2 || step === 0}>新增顏色</AddBtn>\n                </InputTitle>\n                {colors && colors.map((color, i) => (\n                    <ColorInput key={i}>\n                        <div>\n                            <label htmlFor={`name_${i}`}>名稱:</label>\n                            <input\n                                value={color.name}\n                                onChange={handleInputChange}\n                                type=\"text\"\n                                name=\"color\"\n                                id={`name_${i}`}\n                                size=\"10\"\n                                disabled={step !== 2 && (colorsLength ? i < colorsLength : 1)}\n                                required\n                            />\n                            <span>{errorMessage === '名稱不可重複' && errorMessage}</span>\n                        </div>\n                        <div>\n                            <label htmlFor={`code_${i}`}>色碼:</label>\n                            <input\n                                value={color.code}\n                                onChange={handleInputChange}\n                                type=\"color\"\n                                name=\"color\"\n                                id={`code_${i}`}\n                                disabled={step !== 2 && step !== 0}\n                            />\n                        </div>\n                        <Btn \n                            onClick={handleDeletePattern(i)} \n                            type=\"button\" \n                            name=\"color\"\n                            disabled={step !== 2 && (colorsLength ? i < colorsLength : 1)}\n                        >\n                            <FontAwesomeIcon icon={faTimes} />\n                        </Btn>\n                    </ColorInput>\n                ))}\n            </InputBlock>\n        </>\n    )\n}\n\nconst SecondStep = ({step, setStep, productToAdd, setProductToAdd}) => {\n\n    const {\n        sizes, \n        setSizes, \n        colors, \n        setColors, \n        error, \n        handleInputChange, \n        handleSetStep, \n        handleFormSubmit, \n        handleAddPattern, \n        handleDeletePattern, \n    } = useAdminProduct({step, setStep, productToAdd, setProductToAdd})\n\n    const getGroup = useCallback(() => {\n        switch (productToAdd.category) {\n            case 'tops': \n            case 'shirts':\n            case 'knit':\n            case 'one_piece':\n            case 'outer': {\n                return 'Size_top'\n            }\n            case 'bottoms': {\n                return 'Size_bottom'\n            }\n            case 'skirts': {\n                return 'Size_skirt'\n            }\n            case 'general': {\n                return 'Size_general'\n            }\n            default: break\n        }\n    }, [productToAdd])\n\n    useEffect(() => {\n        if(step !== 2) return;\n        if(!productToAdd) return;\n        if(getGroup() === 'Size_general'){\n            setSizes([{size: 'one'}])\n        } else {\n            let arr = Array(2).fill({size: ''})\n            Object.keys(sizeMap[getGroup()]).map(ele => (\n                arr.map(a => a[ele] = (ele === 'waist' ? [0, 0] : 0))\n            ))\n            setSizes(arr)\n        }\n        setColors(Array(2).fill({name: '', code: '#000000'}))\n    }, [productToAdd, step, setSizes, setColors, getGroup])\n\n\n    return (\n        <SecondStepContainer $active={step === 2} $step={step}>\n            <FlowContent $active>\n                <FlowNode>\n                    Step\n                    <p>02</p>\n                </FlowNode>\n                <FlowText $fixed>\n                    設定尺寸及顏色\n                </FlowText>\n            </FlowContent>\n            {getGroup() && (\n                // <form onSubmit={e => e.preventDefault()}>\n                    <>\n                        <SecondStepInputs\n                            {...{step, sizes, colors, error, handleInputChange, handleAddPattern, handleDeletePattern}}\n                            group={getGroup() || null}\n                        />\n                        <BtnContainer>\n                            <TextBtn\n                                type=\"button\"\n                                name=\"back\"\n                                onClick={handleSetStep}\n                                $active={step === 2}\n                                disabled={step !== 2}\n                            >\n                                上一步\n                            </TextBtn>\n                            <TextBtn\n                                type=\"button\"\n                                name=\"next\"\n                                onClick={handleSetStep}\n                                $active={step === 2}\n                                disabled={step !== 2}\n                            >\n                                下一步\n                            </TextBtn>\n                            <TextBtn\n                                type=\"submit\"\n                                name=\"add_first\"\n                                onClick={handleFormSubmit}\n                                $active={step === 2}\n                                disabled={step !== 2}\n                            >\n                                略過並儲存\n                            </TextBtn>\n                        </BtnContainer>\n                    </>\n                // </form>\n            )}\n        </SecondStepContainer>        \n    )\n}\n\nconst ThirdStepInputs = ({step, patterns, isOn, isSale, priceStandard, priceSale, handleInputChange}) => {\n    return (\n        <>\n            <InputBlock>\n                <label>存貨數量</label>\n                {patterns && patterns.map((pattern, i) => (\n                    <PatternInput key={i}>\n                        尺寸: {pattern.size}, 顏色: {pattern.color},\n                        <label htmlFor={`total_${i}`}> 數量:</label>\n                        <input\n                            value={pattern.total}\n                            onChange={handleInputChange}\n                            type=\"number\"\n                            name=\"pattern\"\n                            id={`total_${i}`}\n                            min=\"0\"\n                            disabled={step !== 3}\n                        />\n                    </PatternInput>\n                ))}\n            </InputBlock>\n            <InputBlock>\n                <label>商品價格</label>\n                <CheckInput>\n                    <input\n                        checked={isOn}\n                        onChange={handleInputChange}\n                        type=\"checkbox\"\n                        name=\"is_on\"\n                        id=\"is_on\"\n                        disabled={step !== 3}\n                    />\n                    <label htmlFor=\"is_on\">上架中</label>\n                    <input\n                        value={isSale}\n                        onChange={handleInputChange}\n                        type=\"checkbox\"\n                        name=\"is_sale\"\n                        id=\"is_sale\"\n                        disabled={step !== 3}\n                    />\n                    <label htmlFor=\"is_sale\">特價中</label>\n                </CheckInput>\n                <PriceInput>\n                        <label htmlFor=\"price_standard\">原價:</label>\n                        <input\n                            value={priceStandard}\n                            onChange={handleInputChange}\n                            type=\"number\"\n                            name=\"price_standard\"\n                            id=\"price_standard\"\n                            min=\"0\"\n                            disabled={step !== 3}\n                        />\n                        <label htmlFor=\"price_standard\">特價:</label>\n                        <input\n                            value={priceSale}\n                            onChange={handleInputChange}\n                            type=\"number\"\n                            name=\"price_sale\"\n                            id=\"price_sale\"\n                            min=\"0\"\n                            disabled={step !== 3}\n                        />\n                </PriceInput>\n            </InputBlock>\n        </>\n    )\n}\n\nconst ThirdStep = ({step, setStep, productToAdd, setProductToAdd}) => {\n\n    const {\n        patterns, \n        setPatterns, \n        isOn, \n        setIsOn, \n        isSale, \n        setIsSale, \n        priceStandard, \n        setPriceStandard, \n        priceSale, \n        setPriceSale, \n        handleInputChange, \n        handleSetStep, \n        handleFormSubmit, \n    } = useAdminProduct({step, setStep, productToAdd, setProductToAdd})\n\n\n    useEffect(() => {\n        if(step !== 3) return;\n        if(!productToAdd.sizes || !productToAdd.colors) return;\n        let arr = [];\n        productToAdd.sizes.map(size => productToAdd.colors.map(color => (\n            arr.push({size: size.size, color: color.name, total: 0})\n        )))\n        setPatterns(arr)\n        setIsOn(false)\n        setIsSale(false)\n        setPriceStandard(0)\n        setPriceSale(0)\n    }, [step, productToAdd, setPatterns, setIsOn, setIsSale, setPriceStandard, setPriceSale])\n\n\n    return (\n        <ThirdStepContainer $active={step === 3} $step={step}>\n            <FlowContent $active>\n                <FlowNode>\n                    Step\n                    <p>03</p>\n                </FlowNode>\n                <FlowText $fixed>\n                    存貨數量及商品價格\n                </FlowText>\n            </FlowContent>\n            {patterns.length > 0 && (\n                <form onSubmit={e => e.preventDefault()}>\n                    <ThirdStepInputs {...{step, patterns, isOn, isSale, priceStandard, priceSale, handleInputChange}} />\n                    <BtnContainer>\n                        <TextBtn \n                            type=\"button\" \n                            name=\"back\" \n                            onClick={handleSetStep} \n                            $active={step === 3} \n                            disabled={step !== 3}\n                        >\n                            上一步\n                        </TextBtn>\n                        <TextBtn \n                            type=\"submit\" \n                            name=\"add_second\"\n                            onClick={handleFormSubmit} \n                            $active={step === 3} \n                            disabled={step !== 3}\n                        >\n                            略過並儲存\n                        </TextBtn>\n                        <TextBtn \n                            type=\"submit\" \n                            name=\"add_third\"\n                            onClick={handleFormSubmit} \n                            $active={step === 3} \n                            disabled={step !== 3}\n                        >\n                            送出\n                        </TextBtn>\n                    </BtnContainer>\n                </form>\n            )}\n        </ThirdStepContainer>\n    )\n}\n\nexport default function AddProduct () {\n\n    const history = useHistory()\n\n    const [step, setStep] = useState(1)\n    const [productToAdd, setProductToAdd] = useState('')\n\n    useEffect(() => {\n        if(!productToAdd) return\n\n        const unblock = history.block(() => {\n            return window.confirm(\"目前的資料尚未被儲存, 是否要離開?\");\n        });\n    \n        return () => {\n            return unblock();\n        };\n    }, [history, productToAdd])\n\n    return (\n        <MainContainer>\n            <LeftContainer>\n                <FirstStep {...{step, setStep, productToAdd, setProductToAdd}} />\n            </LeftContainer>\n            <RightContainer>\n                <SecondStep {...{step, setStep, productToAdd, setProductToAdd}} />\n                <ThirdStep {...{step, setStep, productToAdd, setProductToAdd}} />\n            </RightContainer>\n        </MainContainer>\n    )\n}","import { useRef } from \"react\"\nimport { Link, useHistory } from \"react-router-dom\"\nimport { useSelector } from \"react-redux\"\nimport styled from \"styled-components\"\n\nimport { sizeMap } from \"../../../constants/mapping\"\nimport { fontTheme, H4, P, TextBtn } from \"../../../constants/style\"\n\nimport useAdminProduct from \"../../../hooks/useAdminProduct\"\nimport useProduct from \"../../../hooks/useProduct\"\n\nimport { deleteProductAPI } from \"../../../webAPI/productAPI\"\n\nimport { FirstStepInputs, SecondStepInputs } from \"./AddProduct\"\n\n\nconst TableContainer = styled.div`\n    padding: 10px;\n    & table {\n        width: 100%;\n        border: 1px solid ${props => props.theme.color.lightGrey};\n        & th, td {\n            ${fontTheme.span}\n            color: ${props => props.theme.color.black};\n            border-top: 1px solid ${props => props.theme.color.lightGrey};\n            border-bottom: 1px solid ${props => props.theme.color.lightGrey};\n        }\n        & tr {\n            vertical-align: top;\n            & th {\n                white-space: nowrap;\n                text-align: left;\n                padding: 5px 10px;\n                background-color: ${props => props.theme.color.lightGrey};\n                color: ${props => props.theme.color.white};\n                font-weight: ${props => props.theme.fontWeight.xl};\n            }\n            & td {\n                padding: 10px;\n            }\n        }\n    }\n`\n\nconst BtnContainer = styled.div`\n    display: flex;\n    justify-content: flex-end;\n    padding: 20px 10px 10px;\n    & > button {\n        margin: 0px 5px;\n    }\n`\n\nconst PopupContent = styled.div`\n    & h4 {\n        padding: 10px;\n        text-align: center;\n    }\n    & > div {\n        padding: 10px;\n        text-align: center;\n        & button {\n            margin: 5px;\n        }\n    }\n`\n\nexport const SizePopup = () => {\n\n    const product = useSelector(state => state.product.product)\n    const group = product ? product.product.Category.group : null;\n\n    return (\n        <TableContainer>\n            {product && group.slice(0, -1) === 'Size_general' ? (\n                <P>單一尺寸 One Size</P>\n            ) : (\n                <table>\n                    <thead>\n                        <tr>\n                            <th></th>\n                            {product ? (\n                                Object.keys(sizeMap[group.slice(0, -1)]).map((element, index) => {\n                                    const measure = element\n                                    .split('_')\n                                    .map(word => word[0].toUpperCase() + word.slice(1))\n                                    .join(' ')\n                                    return (\n                                        <th key={index}>\n                                            {measure}\n                                            <p>{sizeMap[group.slice(0, -1)][element]}</p>\n                                        </th>\n                                    )\n                            })) : null}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {product ? product.product[group].map(i => (\n                            <tr key={i.id}>\n                                <td>{i.size}</td>\n                                {Object.keys(sizeMap[group.slice(0, -1)]).map((j, index) => (\n                                    <td key={index}>\n                                        {(i[j] && i[j]!== '0~0') ? `${i[j]}cm` : '-'}\n                                    </td>\n                                ))}\n                            </tr>\n                        )) : null}\n                    </tbody>\n                </table>\n            )}\n        </TableContainer>\n    )\n}\n\nexport const ColorPopup = () => {\n\n    const product = useSelector(state => state.product.product)\n\n    return (\n        <TableContainer>\n            <table>\n                <thead>\n                    <tr>\n                        <th>Color Name</th>\n                        <th>HEX Code</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {product ? product.product.Colors.map((color, i) => (\n                        <tr key={i}>\n                            <td>{color.name}</td>\n                            <td>{color.code}</td>\n                        </tr>\n                    )) : null}\n                </tbody>\n            </table>\n        </TableContainer>\n    )\n}\n\nexport const EditPopup = () => {\n\n    const product = useSelector(state => state.product.product)\n\n    const top = useRef()\n\n    const {\n        name, \n        gender, \n        category, \n        desc, \n        material, \n        washing, \n        images, \n        setImages, \n        sizes, \n        colors, \n        handleInputChange, \n        handleAddPattern, \n        handleDeletePattern, \n        handleFormSubmit\n    } = useAdminProduct({top})\n\n\n    return (\n        <TableContainer ref={top}>\n            {product && product.product.Category.name === category && (\n                <form onSubmit={e => e.preventDefault()}>\n                    <FirstStepInputs \n                        step={0} \n                        {... {name, gender, category, desc, material, washing, images, setImages, handleInputChange}}\n                    />\n                    <SecondStepInputs \n                        step={0}\n                        {...{sizes, colors, handleInputChange, handleAddPattern, handleDeletePattern}}\n                        group={product?.product.Category.group.slice(0, -1)}\n                        sizesLength={product.product[product.product.Category.group].length}\n                        colorsLength={product.product.Colors.length}\n                    />\n                    <BtnContainer>\n                        <TextBtn \n                            type=\"submit\" \n                            name=\"edit\"\n                            onClick={handleFormSubmit} \n                            $active\n                        >\n                            送出\n                        </TextBtn>\n                    </BtnContainer>\n                </form>\n            )}\n        </TableContainer>\n    )\n}\n\nexport const DeletePopup = () => {\n\n    const history = useHistory()\n\n    const product = useSelector(state => state.product.product)\n\n    const { handleClosePopup } = useProduct()\n\n    const handleDeleteProduct = () => {\n        deleteProductAPI(product.product.id)\n        .then(() => history.go())\n    }\n  \n    return (\n        <PopupContent>\n            <H4>是否要刪除此商品？</H4>\n            <div>\n                <TextBtn onClick={handleClosePopup} $active>返回</TextBtn>\n                <Link to=\"#\" onClick={handleDeleteProduct}>\n                    <TextBtn $active>刪除</TextBtn>\n                </Link>\n            </div>\n        </PopupContent>\n    )\n}","import styled from 'styled-components';\nimport { useSelector } from 'react-redux';\n\nimport { Btn, H3 } from '../constants/style';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck, faTimes } from '@fortawesome/free-solid-svg-icons';\n\nimport useProduct from '../hooks/useProduct';\n\nimport { CartPopup } from '../pages/ProductPage/CartPopup';\nimport { LoginPopup } from './LoginPopup';\nimport {\n\tSizePopup,\n\tColorPopup,\n\tEditPopup,\n\tDeletePopup,\n} from '../pages/AdminPages/AdminProductPage/InfoPopup';\n\nconst PopupCover = styled.div`\n\topacity: ${props => (props.$isOpened ? '1' : '0')};\n\tvisibility: ${props => (props.$isOpened ? 'visible' : 'hidden')};\n\ttransition: 0.2s;\n\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tposition: fixed;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: 11;\n`;\n\nconst PopupWrapper = styled.div`\n\twidth: 90%;\n\theight: 100%;\n\tmargin: auto;\n\tposition: relative;\n\t& > label {\n\t\tbackground-color: transparent;\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\tleft: 0;\n\t}\n`;\n\nconst PopupContainer = styled.div`\n\ttransform: ${props =>\n\t\tprops.$isOpened ? 'translateY(0%)' : 'translateY(-50%)'};\n\topacity: ${props => (props.$isOpened ? '1' : '0')};\n\ttransition: 0.2s;\n\twidth: 100%;\n\tmax-width: ${props => (props.$type === 'edit' ? '768px' : '512px')};\n\tmax-height: calc(100vh - 80px);\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\tmargin: 40px auto;\n\tbackground-color: ${props => props.theme.color.white};\n\tborder: 1px solid ${props => props.theme.color.lightGrey};\n\t& > div {\n\t\tpadding: 10px;\n\t}\n`;\n\nconst PopupHeader = styled.div`\n\tborder-bottom: 1px solid ${props => props.theme.color.lightGrey};\n\tposition: relative;\n\t& > button {\n\t\t& svg {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tbottom: 0;\n\t\t\tmargin: auto;\n\t\t\tright: 10px;\n\t\t}\n\t}\n\t${props => props.$cart && 'display: flex;'}\n`;\n\nconst PopupTitle = styled(H3)`\n\t& > svg {\n\t\tcolor: ${props => props.theme.color.success};\n\t\tmargin-right: 5px;\n\t}\n`;\n\nconst PopupContent = styled.div`\n\tmax-height: calc(100vh - 145px);\n\toverflow: auto;\n`;\n\nexport const Popup = ({ type }) => {\n\tconst isOpened = useSelector(state => state.general.isOpened);\n\n\tconst { handleClosePopup } = useProduct();\n\n\treturn (\n\t\t<PopupCover $isOpened={isOpened}>\n\t\t\t<PopupWrapper>\n\t\t\t\t<label onClick={handleClosePopup(type)} />\n\t\t\t\t<PopupContainer $isOpened={isOpened} $type={type}>\n\t\t\t\t\t<PopupHeader $cart={type === 'cart'}>\n\t\t\t\t\t\t{type === 'cart' && (\n\t\t\t\t\t\t\t<PopupTitle>\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faCheck} />\n\t\t\t\t\t\t\t\t已成功加入至購物車\n\t\t\t\t\t\t\t</PopupTitle>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Btn onClick={handleClosePopup(type)}>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon={faTimes} />\n\t\t\t\t\t\t</Btn>\n\t\t\t\t\t</PopupHeader>\n\t\t\t\t\t<PopupContent>\n\t\t\t\t\t\t{type === 'login' && <LoginPopup />}\n\t\t\t\t\t\t{type === 'cart' && <CartPopup />}\n\t\t\t\t\t\t{type === 'size' && <SizePopup />}\n\t\t\t\t\t\t{type === 'color' && <ColorPopup />}\n\t\t\t\t\t\t{type === 'edit' && <EditPopup />}\n\t\t\t\t\t\t{type === 'delete' && <DeletePopup />}\n\t\t\t\t\t</PopupContent>\n\t\t\t\t</PopupContainer>\n\t\t\t</PopupWrapper>\n\t\t</PopupCover>\n\t);\n};\n","import { useEffect, createContext } from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\"\n\nimport { H2, PageWrapper, PageContainer } from \"../../constants/style\"\nimport { crumbMap } from \"../../constants/mapping\";\n\nimport { Feed } from \"../../components/Feed\";\nimport { CrumbNav } from \"../../components/CrumbNav\";\nimport { Aside } from \"../../components/Aside\"\n\nimport { Sort } from \"./Sort\"\nimport { ProductList } from \"./ProductList\";\nimport { Popup } from \"../../components/Popup\";\n\n\n\nconst MainContainer = styled.main`\n  width: 80%;\n  flex-grow: 1;\n  & h2 {\n    padding: 0 10px;\n  }\n`\n\n\nexport const LocationContext = createContext();\n\nexport default function ListPage() {\n\n  const { pathname, search } = useLocation();\n  const pathArr = pathname.split('/')\n  const currentPath = pathArr[pathArr.length-1]\n  const currentTitle = crumbMap[pathArr.length-2] ? crumbMap[pathArr.length-2][currentPath] : 0\n\n  const history = useHistory()\n    \n  useEffect(() => {\n    if(!currentTitle){\n      const previousPath = pathArr.slice(0, pathArr.length-1).join('/')\n      history.push(previousPath)\n    }\n  }, [history, pathArr, currentTitle])\n\n\n  return (\n    <LocationContext.Provider value={{pathname, search}} >\n      <>\n        {currentTitle && (\n          <CrumbNav pathArr={pathArr}/>\n        )}\n        <PageWrapper>\n          <PageContainer>\n            <Aside filter />\n            <MainContainer>\n              <H2>{currentTitle}</H2>\n              <Sort />\n              <ProductList />\n            </MainContainer>\n          </PageContainer>\n        </PageWrapper>\n        {process.env.NODE_ENV === 'production' && (\n          <Feed />\n        )}\n        <Popup type=\"login\" />\n      </>\n    </LocationContext.Provider>\n  );\n}","import { useEffect } from \"react\"\nimport styled from \"styled-components\"\nimport { Img } from \"../../components/Img\"\nimport { MEDIA_QUERY } from \"../../constants/style\"\nimport useProduct from \"../../hooks/useProduct\"\n\nconst ImageContainer = styled.div`\n  & img {\n    width: 100%;\n    height: 100%;\n  }\n`\n\nconst ImageMain = styled.div`\n  aspect-ratio: 1;\n  border: 1px solid #aaa;\n  margin-bottom: 5px;\n  overflow: hidden;\n  position: relative;\n  @media (min-width: 512px) {\n    &:hover {\n      cursor: crosshair;\n      & > img:last-child {\n        opacity: 0;\n      }\n    }\n  }\n  & > img:first-child {\n    z-index: -1;\n    transform: scale(2);\n    transform-origin: top left;\n    position: absolute;\n    top: -50%;\n    left: -50%;\n  }\n  background-color: ${props => props.$isLoading && '#f00'};\n`\n\nconst ImageCarousel = styled.div`\n  padding: 5px;\n  display: flex;\n  & > div {\n    position: relative;\n    aspect-ratio: 1;\n    width: calc(100%/3);\n    border: 1px solid #aaa;\n    margin: 5px;\n    &:nth-child(n+5) {\n      display: none;\n    }\n  }\n  ${MEDIA_QUERY.l} {\n    & > div:nth-child(4) {\n      display: none;\n    }\n  }\n  ${MEDIA_QUERY.m} {\n    & > div:nth-child(4) {\n      display: block;\n    }\n  }\n  ${MEDIA_QUERY.s} {\n    & > div:nth-child(4) {\n      display: none;\n    }\n  }\n`\n\n\nexport const Image = ({images}) => {\n\n  const {\n    handleMouseMove,\n    handleImgClick,\n    mainImg,\n    setMainImg,\n    scaledImg\n  } = useProduct()\n\n  useEffect(() => {\n    const img = images.find(img => img.is_main === true)\n    setMainImg({src: img.src, alt: img.alt})\n  }, [images, setMainImg])\n\n  return (\n    <ImageContainer>\n      <ImageMain onMouseMove={handleMouseMove}>\n        <img src={mainImg.src} alt={mainImg.alt} ref={scaledImg} />\n        <Img image={mainImg}/>\n      </ImageMain>\n      <ImageCarousel onClick={handleImgClick}>\n        {images.slice(0, 4).map(image => (\n          <div key={image.id}>\n            <Img image={image} />\n          </div>\n        ))}\n        <div>\n          <Img image={{src: \"https://images.unsplash.com/photo-1631410744690-3cc75aaea4df?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MzJ8fG9uZSUyMHBpZWNlJTIwZHJlc3N8ZW58MHwyfDJ8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60\", alt: \"02\"}} />\n        </div>\n        <div>\n          <Img image={{src: \"https://images.unsplash.com/photo-1601460588655-109bd38204db?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Nzd8fGRyZXNzJTIwb25lJTIwcGllY2V8ZW58MHwyfDB8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60\", alt: \"03\"}} />\n        </div>\n        <div>\n          <Img image={{src: \"https://images.unsplash.com/photo-1623052760790-9605a8579730?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NDV8fHNoaXJ0c3xlbnwwfDJ8Mnx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60\", alt: \"04\"}} />\n        </div>\n      </ImageCarousel>\n    </ImageContainer>\n  )\n}","import styled from 'styled-components';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons';\n\nconst Qty = styled.div`\n\twidth: 60px;\n\theight: 40px;\n\tposition: relative;\n`;\n\nconst QtyInput = styled.input`\n\twidth: 100%;\n\tbox-sizing: border-box;\n\tpadding-left: 5px;\n\theight: 100%;\n\toutline: 0;\n\tborder: 1px solid ${props => props.theme.color.lightGrey};\n`;\n\nconst QtyDiv = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\twidth: 20px;\n`;\n\nconst QtyBtn = styled.button`\n\tbox-sizing: content-box;\n\theight: 18.5px;\n\tborder: 1px solid ${props => props.theme.color.lightGrey};\n\ttransition: 0.25s;\n\tbackground-color: ${props => props.theme.color.white};\n\t& + button {\n\t\tmargin-top: -1px;\n\t}\n\t& svg {\n\t\tdisplay: block;\n\t\tmargin: auto;\n\t\tcolor: ${props => props.theme.color.grey};\n\t\tfont-size: ${props => props.theme.fontSize.bodySmall};\n\t}\n\t&:hover {\n\t\tbackground-color: ${props => props.theme.color.light_primary};\n\t}\n`;\n\nexport const QtySelector = ({ qty, handleQtyChange, handleBtnClick }) => {\n\treturn (\n\t\t<Qty>\n\t\t\t<QtyInput\n\t\t\t\ttype=\"number\"\n\t\t\t\tvalue={qty}\n\t\t\t\tmin={1}\n\t\t\t\tonChange={handleQtyChange}\n\t\t\t/>\n\t\t\t<QtyDiv>\n\t\t\t\t<QtyBtn onClick={() => handleBtnClick('inc')}>\n\t\t\t\t\t<FontAwesomeIcon\n\t\t\t\t\t\ticon={faChevronDown}\n\t\t\t\t\t\ttransform={{ rotate: 180 }}\n\t\t\t\t\t/>\n\t\t\t\t</QtyBtn>\n\t\t\t\t<QtyBtn onClick={() => handleBtnClick('dec')}>\n\t\t\t\t\t<FontAwesomeIcon\n\t\t\t\t\t\ticon={faChevronDown}\n\t\t\t\t\t\ttransform={{ rotate: 0 }}\n\t\t\t\t\t/>\n\t\t\t\t</QtyBtn>\n\t\t\t</QtyDiv>\n\t\t</Qty>\n\t);\n};\n","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronDown, faShoppingCart, faHeart } from '@fortawesome/free-solid-svg-icons'\n\nimport { H3, H4, P, Span, TextBtn } from \"../../constants/style\"\nimport useProduct from \"../../hooks/useProduct\";\n\nimport { useSelector } from \"react-redux\";\nimport { QtySelector } from \"../../components/QtySelector\";\n\n\nconst ContentContainer = styled.div`\n  & > div {\n    padding-bottom: 20px;\n  }\n`\n\nconst TitleContainer = styled.div`\n  & p {\n    font-weight: ${props => props.theme.fontWeight.m};\n    line-height: 1.75em;\n    padding: 10px 0;\n  }\n  & h3 {\n    padding: 10px 0;\n    border-bottom: 1px solid #aaa;\n  }\n`\n\nconst SpecContainer = styled.div`\n  & > div {\n    padding: 5px 0;\n  }\n  & h4 {\n    padding: 5px 0;\n  }\n`\n\nconst ColorSelector = styled.div`\n  & ul {\n    display: flex;\n    & li {\n      z-index: 1;\n      & + li {\n        margin-left: 5px;\n      }\n    }\n  }\n`\n\nconst Msg = styled(Span)`\n  color: ${props => props.theme.color.alert};\n`\n\nconst SizeSelector = styled.div`\n  & > div {\n    position: relative;\n    width: 60px;\n    height: 33px;\n    & > div {\n      display: flex;\n      height: 100%;\n      box-sizing: border-box;\n      border: 1px solid #aaa;\n      & span {\n        width: 50%;\n        padding-left: 5px;\n        margin: auto 0;\n        font-size: ${props => props.theme.fontSize.body};\n      }\n    }\n    & svg {\n      display: block;\n      margin: auto;\n      color: ${props => props.theme.color.grey};\n      font-size: ${props => props.theme.fontSize.bodySmall};\n    }\n    & select {\n      position: absolute;\n      top: 0;\n      opacity: 0;\n      padding: 5px;\n      outline: 0;\n      border-color: ${props => props.theme.color.lightGrey};\n      width: 60px;\n    }\n  }\n`\n\nconst ColorLabel = styled.label`\n  & input {\n    display: none;\n    &:checked + span {\n      border: ${props => (parseInt(props.$color.slice(1), 16) <= parseInt('777777', 16)) ? 'medium double #eee' : 'thin solid #333'};\n    }\n  }\n  & span {\n    background-color: ${props => props.$color};\n    position: relative;\n    overflow: hidden;\n    ${props => props.$isNull && 'cursor: not-allowed;'}\n    &:before {\n      content: '';\n      width: 40px;\n      position: absolute;\n      transform: rotate(45deg);\n      transform-origin: top left;\n      top: 0;\n      left: 0;\n      background-color: #aaaa;\n      height: 2px;\n      display: ${props => props.$isNull ? 'block' : 'none'};\n    }\n    &:after {\n      content: '';\n      width: 40px;\n      position: absolute;\n      transform: rotate(-45deg);\n      transform-origin: top right;\n      top: 0;\n      right: 0;\n      background-color: #aaaa;\n      height: 2px;\n      display: ${props => props.$isNull ? 'block' : 'none'};\n    }\n  }\n`\n\nconst ColorSpan = styled.span`\n  display: block;\n  box-sizing: border-box;\n  border: 1px solid #aaa8;\n  width: 30px;\n  height: 30px;\n`\n\nconst PriceIsSale = styled.div`\n  & h4 {\n    display: inline-block;\n    // font-weight: ${props => props.theme.fontWeight.m};\n    &:nth-child(1) {\n      color: ${props => props.theme.color.grey};\n      text-decoration: line-through;\n    }\n    &:nth-child(2) {\n      color: ${props => props.theme.color.alert};\n      font-size: ${props => props.theme.fontSize.h3};\n    }\n    & + h4 {\n      padding-left: 10px;\n    }\n  }\n`\n\nconst QtyAndAdd = styled.div`\n  display: flex;\n`\n\nconst AddBtn = styled(TextBtn)`\n  margin-left: 10px;\n  padding: 10px 15px;\n\n  & svg {\n    font-size: ${props => props.theme.fontSize.bodyLarge};\n    color: ${props => props.theme.color.white};\n    margin-right: 5px;\n  }\n`\n\nconst WishList = styled(P)`\n\n  & svg {\n    color: ${props => props.theme.color.grey};\n    font-size: ${props => props.theme.fontSize.body};\n    margin-right: 3px;\n  }\n  & a > span {\n    color: ${props => props.theme.color.grey};\n    font-weight: ${props => props.theme.fontWeight.l};\n  }\n  & > span {\n    margin-left: 10px;\n  }\n`\n\n\nconst ColorSelect = ({name, code, total, color, handleColorChange}) => {\n\n    const isNull = !total ? true : false\n\n    return (\n      <ColorLabel $color={code} $isNull={isNull}>\n        <input \n          type=\"radio\" \n          name=\"color\" \n          value={name} \n          onChange={handleColorChange(isNull)} \n          checked={(color === name) && !isNull}\n        />\n        <ColorSpan />\n      </ColorLabel>\n    )\n  }\n\n\nexport const Content = ({product, group}) => {\n\n  const spec = useSelector(state => state.product.spec)\n  \n  const isOpened = useSelector(state => state.general.isOpened)\n  const errorMessage = useSelector(state => state.general.errorMessage)\n\n  const {\n    addCommaToPrice,\n    handleBtnClick,\n    handleSizeChange,\n    handleQtyChange,\n    handleColorChange,\n    handleAddToCart,\n    handleAddToWishList\n  } = useProduct(spec, product, group, isOpened)\n\n\n  return (\n    <ContentContainer>\n      <TitleContainer>\n        <H3>{product.product.name}</H3>\n        <P>{product.product.desc}</P>\n      </TitleContainer>\n      <SpecContainer>\n        <SizeSelector>\n          <H4>尺寸</H4>\n          <div>\n            <div>\n              <span>{spec.size}</span>\n              <span>\n                <FontAwesomeIcon icon={faChevronDown} transform={{ rotate: 0 }}/>\n              </span>\n            </div>\n            {spec.size && (\n              <select value={spec.size} onChange={handleSizeChange}>\n                {product.product[`${group}s`].map(size => (\n                  <option key={size.id} value={size.size}>{size.size}</option>\n                ))}\n              </select>\n            )}\n          </div>\n        </SizeSelector>\n        <ColorSelector>\n          <H4>顏色</H4>\n          <ul>\n            {product.patterns\n            .filter(pattern => pattern[group].size === spec.size)\n            .map((pattern, index) => (\n              <li key={index}>\n                <ColorSelect\n                  name={pattern.Color.name}\n                  code={pattern.Color.code}\n                  total={pattern.total}\n                  color={spec.color}\n                  handleColorChange={handleColorChange}\n                />\n              </li>\n            ))}\n          </ul>\n          {spec.size && spec.color && (\n            product.patterns.find(pattern => (\n              (pattern[group].size === spec.size) && (pattern.Color.name === spec.color))\n            ).total <= 10 && (\n              <Msg>庫存數量少</Msg>\n            )\n          )}\n        </ColorSelector>\n        {(product.product.is_sale ? (\n          <PriceIsSale>\n            <H4>NT ${addCommaToPrice(product.product.price_standard)}</H4>\n            <H4>NT ${addCommaToPrice(product.product.price_sale)}</H4>\n          </PriceIsSale>\n        ) : (\n          <div>\n            <H4>NT ${addCommaToPrice(product.product.price_standard)}</H4>\n          </div>\n        ))}\n        {errorMessage && (<Msg>{errorMessage}</Msg>)}\n        <QtyAndAdd>\n          <QtySelector\n            qty={spec.qty}\n            handleQtyChange={handleQtyChange}\n            handleBtnClick={handleBtnClick}\n          />\n          <AddBtn onClick={handleAddToCart} $active>\n            <FontAwesomeIcon icon={faShoppingCart} />\n            加入購物車\n          </AddBtn>\n        </QtyAndAdd>\n        <WishList>\n          <Link to=\"#\" onClick={handleAddToWishList}>\n            <FontAwesomeIcon icon={faHeart} />\n            <Span>加入願望清單</Span>\n          </Link>\n        </WishList>\n      </SpecContainer>\n    </ContentContainer>\n  )\n}","import styled from \"styled-components\"\nimport { sizeMap } from \"../../constants/mapping\";\nimport { MEDIA_QUERY, H4, P, TextBtn } from \"../../constants/style\"\nimport useProduct from \"../../hooks/useProduct\";\n\n\nconst DetailContainer = styled.div`\n  padding: 10px;\n  ${MEDIA_QUERY.m} {\n    width: 90%;\n    margin: 0 auto;\n  }\n`\nconst DetailTag = styled.div`\n  text-align: center;\n  padding: 10px 0 20px;\n`\nconst TagBtn = styled(TextBtn)`\n  margin: 5px;\n  font-size: ${props => props.theme.fontSize.bodyLarge};\n  &:hover {\n    background-color: ${props => props.theme.color.black};\n    border-color: ${props => props.theme.color.black};\n    &::before {\n      opacity: 1;\n    }\n  }\n  position: relative;\n  &::before {\n    opacity: ${props => props.$checked ? 1 : 0};\n    transition: .4s;\n    content: '';\n    width: 0;\n    height: 0;\n    position: absolute;\n    left: 0;\n    right: 0;\n    margin: 0 auto;\n    bottom: -8px;\n    border-left: 10px solid transparent;\n    border-right: 10px solid transparent;\n    border-top: 8px solid ${props => props.theme.color.black};\n  }\n  position: relative;\n  & label {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    cursor: pointer;\n  }\n`\n\nconst DetailContent = styled.div`\n  border: 1px solid #aaa;\n  padding: 20px;\n  & > input {\n    display: none;\n    &:checked + div {\n      opacity: 1;\n      position: relative;\n      top: 0px;\n      transition: opacity .5s;\n    }\n  }\n  position: relative;\n  & > div {\n    z-index: -1;\n    opacity: 0;\n    position: absolute;\n    top: -200px;\n    margin: 10px;\n  }\n  ${MEDIA_QUERY.s} {\n    padding: 0;\n  }\n`\n\nconst InfoContainer = styled.div`\n  & h4 {\n    font-size: ${props => props.theme.fontSize.bodyLarge};\n    font-weight: ${props => props.theme.fontWeight.xl};\n    padding: 5px 0 10px;\n  }\n  & p {\n    color: ${props => props.theme.color.grey};\n    padding-bottom: 10px;\n  }\n`\nconst SizeContainer = styled.div`\n  overflow: auto;\n  & table {\n    border-collapse: collapse;\n  }\n  & th, td {\n    border: 1px solid #aaa;\n    width: 150px;\n    text-align: center;\n    padding: 5px 0;\n    & span {\n      display: block;\n    }\n  }\n  & th, td, span {\n    font-size: ${props => props.theme.fontSize.bodyLarge};\n    font-weight: ${props => props.theme.fontWeight.l};\n    color: ${props => props.theme.color.black};\n    line-height: 1.5em;\n  }\n`\n\n\nexport const Detail = ({product, group}) => {\n\n    const { \n      isChecked,\n      handleCheckedChange\n    } = useProduct()\n  \n    return (\n        <DetailContainer>\n          <DetailTag>\n            <TagBtn $white={!isChecked} $active>\n              <label htmlFor=\"detail_info\" />\n              商品詳情\n            </TagBtn>\n            <TagBtn $white={isChecked} $active>\n              <label htmlFor=\"detail_size\" />\n              尺寸資訊\n            </TagBtn>\n          </DetailTag>\n          <DetailContent>\n            <input type=\"radio\" name=\"detail\" id=\"detail_info\" checked={isChecked} onChange={handleCheckedChange} />\n            {product && (\n              <InfoContainer>\n                <H4>材質</H4>\n                <P>{product.product.material}</P>\n                <H4>清洗方式</H4>\n                <P>{product.product.washing}</P>\n              </InfoContainer>\n            )}\n            <input type=\"radio\" name=\"detail\" id=\"detail_size\" checked={!isChecked} onChange={handleCheckedChange} />\n            <SizeContainer>\n              {group && (group === 'Size_general' ? (\n                <P>單一尺寸 One Size</P>\n              ) : (\n                <table>\n                  <thead>\n                    <tr>\n                      <th></th>\n                      {Object.keys(sizeMap[group]).map((element, index) => {\n                        const measure = element\n                          .split('_')\n                          .map(word => word[0].toUpperCase() + word.slice(1))\n                          .join(' ')\n                        return (\n                          <th key={index}>\n                            <span>{measure}</span>\n                            <span>{sizeMap[group][element]}</span>\n                          </th>\n                        )\n                      })}\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {product.product[`${group}s`].map(i => (\n                      <tr key={i.id}>\n                        <td>{i.size}</td>\n                        {Object.keys(sizeMap[group]).map((j, index) => (\n                          <td key={index}>\n                            {i[j] ? `${i[j]}cm` : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              ))}\n            </SizeContainer>\n          </DetailContent>\n        </DetailContainer>\n    )\n}","import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux'\nimport styled from \"styled-components\"\n\nimport { MEDIA_QUERY, PageWrapper, PageContainer, H4, fontTheme } from \"../../constants/style\"\n\nimport { CrumbNav } from \"../../components/CrumbNav\";\nimport { Aside } from \"../../components/Aside\";\nimport { Popup } from \"../../components/Popup\";\nimport { Feed } from \"../../components/Feed\";\n\nimport { getProduct, setProduct } from \"../../features/product/productSlice\";\n\nimport { Image } from \"./Image\";\nimport { Content } from \"./Content\";\nimport { Detail } from \"./Detail\";\n\nconst Msg = styled(H4)`\n  margin: 0 auto;\n  padding: 20px;\n`\n\nconst MainContainer = styled.main`\n  width: 80%;\n  flex-grow: 1;\n  position: relative;\n`\n\nconst ItemContainer = styled.div`\n  display: flex;\n  & > div {\n    width: 50%;\n    padding: 10px;\n  }\n  ${MEDIA_QUERY.m} {\n    display: block;\n    & > div {\n      width: 90%;\n      margin: 0 auto;\n    }\n  }\n`\n\nconst OffMessage = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: ${props => props.theme.color.white}a;\n  z-index: 1;\n  & > div {\n    position: absolute;\n    top: 20%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    padding: 20px 40px;\n    border-radius: .25em;\n    background-color: ${props => props.theme.color.lightGrey}c;\n    color: ${props => props.theme.color.black};\n    white-space: nowrap;\n    ${MEDIA_QUERY.s} {\n      ${fontTheme.p}\n      padding: 10px 20px;\n      top: 10%;\n    }\n    ${fontTheme.h4}\n  }\n`\n\n\nconst BreadCrumb = ({product}) => {\n  const [path, setPath] = useState(['', 'collection'])\n  useEffect(() => {\n    if(!product) return\n    const gender = product.gender === 'M' ? 'men' : 'women';\n    const category = product.Category.name;\n    setPath(['', 'collection', gender, category])\n    // return () => {\n    //   setPath(['', 'collection'])\n    // }\n  }, [product])\n  return (\n    <CrumbNav pathArr={path} name={product?.name} />   \n  )\n}\n\nexport default function ProductPage () {\n\n    const { id } = useParams()\n\n    const product = useSelector(state => state.product.product)\n    const error = useSelector(state => state.product.error)\n    const popupCode = useSelector(state => state.general.popupCode)\n    const dispatch = useDispatch()\n\n    const group = product?.product?.Category?.group.slice(0, -1)\n\n    useEffect(() => {\n      dispatch(getProduct(id))\n      return () => {\n        dispatch(setProduct(''))\n      }\n    }, [id, dispatch])\n\n    return (\n        <>\n          <BreadCrumb product={product?.product}/>\n          <PageWrapper>\n            <PageContainer>\n              <Aside />\n              {!product && (\n                error ? (\n                  <Msg>{error}</Msg>\n                ) : (\n                  <Msg>商品載入中...</Msg>\n                )\n              )}\n              {product && !error && (\n                <MainContainer>\n                  <ItemContainer>\n                    <Image images={product.product.Images} />\n                    <Content product={product} group={group} />\n                  </ItemContainer>\n                  <Detail product={product} group={group} />\n                  {!product.product.is_on && (\n                    <OffMessage>\n                      <div>此商品目前未上架!</div>\n                    </OffMessage>\n                  )}\n                </MainContainer>\n              )}\n            </PageContainer>\n          </PageWrapper>\n          {process.env.NODE_ENV === 'production' && (\n            <Feed />\n          )}\n          {popupCode !== 'cart' && (\n            <Popup type=\"login\" />\n          )}\n          {product && popupCode !== 'login' && (\n            <Popup type=\"cart\" />\n          )}\n        </>\n    )\n}","import styled from 'styled-components';\nimport { fontTheme, MEDIA_QUERY } from '../constants/style';\n\nconst FlowMobile = styled.li`\n\tmargin: 1px 0;\n\tpadding: 10px;\n\tborder-left: 3px solid\n\t\t${props =>\n\t\t\tprops.$active\n\t\t\t\t? props.theme.color.black\n\t\t\t\t: props.theme.color.lightGrey};\n\tcolor: ${props => props.$active && props.theme.color.black};\n`;\n\nconst FlowContainer = styled.div`\n\t& ol {\n\t\t&:nth-child(1) {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\t${MEDIA_QUERY.m} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t\t&:nth-child(2) {\n\t\t\tdisplay: none;\n\t\t\t${fontTheme.p}\n\t\t\tcolor: ${props => props.theme.color.lightGrey};\n\t\t\tpadding: 10px 0;\n\t\t\t${MEDIA_QUERY.m} {\n\t\t\t\tdisplay: block;\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst FlowNode = styled.div`\n\t${fontTheme.p};\n\tmargin: 10px;\n\tbackground-color: ${props => props.theme.color.lightGrey};\n\tcolor: ${props => props.theme.color.white};\n\tmin-width: 80px;\n\tmin-height: 80px;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: 50%;\n\t& > p {\n\t\t${fontTheme.h3}\n\t}\n`;\n\nconst FlowText = styled.div`\n\t${fontTheme.p}\n\tpadding-right: 10px;\n\tcolor: ${props => props.theme.color.lightGrey};\n\tmin-width: ${props => props.$fixed && '108px'};\n\t& > p {\n\t\t${fontTheme.h4}\n\t}\n`;\n\nconst FlowContent = styled.li`\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 10px 20px;\n\tposition: relative;\n\t& + li::before {\n\t\tcontent: '>';\n\t\tposition: absolute;\n\t\tleft: -10px;\n\t\t${fontTheme.h3}\n\t\tcolor: ${props => props.theme.color.lightGrey};\n\t}\n\t${FlowNode} {\n\t\tbackground-color: ${props => props.$active && props.theme.color.black};\n\t}\n\t${FlowText} {\n\t\tcolor: ${props => props.$active && props.theme.color.black};\n\t}\n`;\n\nexport const CheckoutFlow = ({ step }) => {\n\treturn (\n\t\t<FlowContainer>\n\t\t\t<ol>\n\t\t\t\t<FlowContent $active={step === 1}>\n\t\t\t\t\t<FlowNode>\n\t\t\t\t\t\tStep\n\t\t\t\t\t\t<p>01</p>\n\t\t\t\t\t</FlowNode>\n\t\t\t\t\t<FlowText $fixed>\n\t\t\t\t\t\tCheck Order\n\t\t\t\t\t\t<p>確認購買清單</p>\n\t\t\t\t\t</FlowText>\n\t\t\t\t</FlowContent>\n\t\t\t\t<FlowContent $active={step === 2}>\n\t\t\t\t\t<FlowNode>\n\t\t\t\t\t\tStep\n\t\t\t\t\t\t<p>02</p>\n\t\t\t\t\t</FlowNode>\n\t\t\t\t\t<FlowText $fixed>\n\t\t\t\t\t\tWrite the Add\n\t\t\t\t\t\t<p>填寫付款及運送資料</p>\n\t\t\t\t\t</FlowText>\n\t\t\t\t</FlowContent>\n\t\t\t\t<FlowContent $active={step === 3}>\n\t\t\t\t\t<FlowNode>\n\t\t\t\t\t\tStep\n\t\t\t\t\t\t<p>03</p>\n\t\t\t\t\t</FlowNode>\n\t\t\t\t\t<FlowText>\n\t\t\t\t\t\tCompleted\n\t\t\t\t\t\t<p>完成訂單</p>\n\t\t\t\t\t</FlowText>\n\t\t\t\t</FlowContent>\n\t\t\t</ol>\n\t\t\t<ol>\n\t\t\t\t<FlowMobile $active={step === 1}>\n\t\t\t\t\tSTEP1. 確認購買訂單 Check Order\n\t\t\t\t</FlowMobile>\n\t\t\t\t<FlowMobile $active={step === 2}>\n\t\t\t\t\tSTEP2. 填寫付款及運送資料 Write the Add\n\t\t\t\t</FlowMobile>\n\t\t\t\t<FlowMobile $active={step === 3}>\n\t\t\t\t\tSTEP3. 完成訂單 Completed\n\t\t\t\t</FlowMobile>\n\t\t\t</ol>\n\t\t</FlowContainer>\n\t);\n};\n","import styled from \"styled-components\"\nimport { Link } from \"react-router-dom\"\nimport { useSelector } from \"react-redux\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTrashAlt } from '@fortawesome/free-solid-svg-icons'\n\nimport { Btn, fontTheme, MEDIA_QUERY } from \"../../constants/style\"\n\nimport { QtySelector } from \"../../components/QtySelector\"\nimport { Img } from \"../../components/Img\"\nimport useProduct from \"../../hooks/useProduct\"\nimport useCart from \"../../hooks/useCart\"\n\n\nconst NameNote = styled.div`\n    display: none;\n    ${MEDIA_QUERY.m} {\n        display: block;\n    }\n    padding: 10px 0;\n    & > p {\n        ${fontTheme.span}\n    }\n`\n\nconst Price = styled.p`\n    font-weight: ${props => props.theme.fontWeight.xl};\n    font-size: ${props => props.theme.fontSize.h4};\n    ${MEDIA_QUERY.s} {\n        font-size: ${props => props.theme.fontSize.bodyLarge};\n    }\n`\n\nconst SellingPrice = styled(Price)`\n    color: ${props => props.theme.color.alert};\n    & + div {\n        font-weight: ${props => props.theme.fontWeight.xl};\n        color: ${props => props.theme.color.lightGrey};\n        line-height: 1.25em;\n        margin-top: 10px;\n    }\n`\n\nconst ErrorMsg = styled.span`\n    ${fontTheme.span}\n    color: ${props => props.theme.color.alert};\n    padding: 5px 0;\n    position: absolute;\n    ${MEDIA_QUERY.s} {\n        bottom: 0;\n        right: -100px;\n    }\n`\n\nconst MobileItem = styled.div`\n    padding: 10px 0;\n`\nconst ItemTitle = styled.div`\n    display: flex;\n    & > div {\n        width: 50%;\n        padding: 5px;\n        ${fontTheme.p}\n    }\n    ${MEDIA_QUERY.xs} {\n        display: block;\n        & > div {\n            width: 95%;\n            margin: 0 auto;\n        }\n    }\n`\n\nconst TableContainer = styled.div`\n    & table {\n        width: 100%;\n        border: 1px solid #aaa;\n        & th, td {\n            ${fontTheme.p}\n            color: ${props => props.theme.color.black};\n            border-top: 1px solid #aaa;\n            border-bottom: 1px solid #aaa;\n        }\n        & tr {\n            vertical-align: top;\n            & th {\n                text-align: left;\n                padding: 5px 10px;\n                background-color: ${props => props.theme.color.lightGrey};\n                color: ${props => props.theme.color.white};\n                font-weight: ${props => props.theme.fontWeight.xl};\n            }\n            & td {\n                padding: 10px;\n            }\n        }\n    }\n`\n\nconst ItemContent = styled(TableContainer)`\n    overflow: auto;\n    & table {\n        border: none;\n        border-bottom: 1px solid #aaa;\n        & th, td {\n            border: none;\n            ${fontTheme.span}\n            position: relative;\n            &:last-child {\n                width: 10%;\n            }\n        }\n        & svg {\n            font-size: ${props => props.theme.fontSize.h3};\n        }\n    }\n`\nconst ItemImage = styled.div`\n    position: relative;\n    & img {\n        width: 100%;\n        aspect-ratio: 1;\n    }\n`\nconst ItemName = styled.div`\n`\n\n\nexport const CartItem = ({item, index}) => {\n\n    const url = `/product/${item.id}`\n\n    const subtotal = (item.is_sale ? item.price_sale : item.price_standard) * item.qty\n\n    const errorMessage = useSelector(state => state.cart.errorMessage)\n\n    const {\n        addCommaToPrice,\n    } = useProduct()\n\n    const {\n        handleDeleteCart,\n        handleQtyChange,\n        handleBtnClick\n    } = useCart(item)\n\n    return (\n        <tr>\n            <td>\n                <Link to={url}>\n                    <Img image={{src: item.src, alt: item.alt}} />\n                </Link>\n            </td>\n            <td>\n                {item.name}\n                <NameNote>\n                    <p>尺寸 : {item.size}</p>\n                    <p>顏色 : {item.color}</p>\n                </NameNote>\n            </td>\n            <td>\n                <p>尺寸 : {item.size}</p>\n                <p>顏色 : {item.color}</p>\n            </td>\n            <td>\n                {item.is_sale ? (\n                    <>\n                        <SellingPrice>\n                            ${addCommaToPrice(item.price_sale)}\n                        </SellingPrice>\n                        <div>\n                            原價\n                            <p>${addCommaToPrice(item.price_standard)}</p>\n                        </div>\n                    </>\n                ) : (\n                    <Price>\n                        ${addCommaToPrice(item.price_standard)}\n                    </Price>\n                )}\n            </td>\n            <td>\n                <QtySelector \n                    qty={item.qty}\n                    handleQtyChange={handleQtyChange}\n                    handleBtnClick={handleBtnClick}\n                />\n                {errorMessage && (\n                    <ErrorMsg>{errorMessage[index]}</ErrorMsg>\n                )}\n            </td>\n            <td>\n                <Price>\n                    ${addCommaToPrice(subtotal)}\n                </Price>\n            </td>\n            <td>\n                <Btn onClick={handleDeleteCart(index)}>\n                    <FontAwesomeIcon icon={faTrashAlt}/>\n                </Btn>\n            </td>\n        </tr>\n    )\n}\n\n\nexport const MobileCartItem = ({item, index}) => {\n\n    const url = `/product/${item.id}`\n\n    const subtotal = (item.is_sale ? item.price_sale : item.price_standard) * item.qty\n\n    const errorMessage = useSelector(state => state.cart.errorMessage)\n\n    const {\n        addCommaToPrice\n    } = useProduct()\n\n    const {\n        handleDeleteCart,\n        handleQtyChange,\n        handleBtnClick\n    } = useCart(item)\n\n    return (\n        <li>\n            <MobileItem>\n                <ItemTitle>\n                    <ItemImage>\n                        <Link to={url}>\n                            <Img image={{src: item.src, alt: item.alt}} />\n                        </Link>\n                    </ItemImage>\n                    <ItemName>\n                        {item.name}\n                        <NameNote>\n                            <p>尺寸 : {item.size}</p>\n                            <p>顏色 : {item.color}</p>\n                        </NameNote>\n                    </ItemName>\n                </ItemTitle>\n                <ItemContent>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>售價</th>\n                                <th>數量</th>\n                                <th>小計</th>\n                                <th></th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr>\n                                <td>\n                                    {item.is_sale ? (\n                                        <>\n                                            <SellingPrice>\n                                                ${addCommaToPrice(item.price_sale)}\n                                            </SellingPrice>\n                                            <div>\n                                                原價\n                                                <p>${addCommaToPrice(item.price_standard)}</p>\n                                            </div>\n                                        </>\n                                    ) : (\n                                        <Price>\n                                            ${addCommaToPrice(item.price_standard)}\n                                        </Price>\n                                    )}\n                                </td>\n                                <td>\n                                    <QtySelector \n                                        qty={item.qty}\n                                        handleQtyChange={handleQtyChange}\n                                        handleBtnClick={handleBtnClick}\n                                    />\n                                    {errorMessage && (\n                                        <ErrorMsg>{errorMessage[index]}</ErrorMsg>\n                                    )}\n                                </td>\n                                <td>\n                                    <Price>\n                                        ${addCommaToPrice(subtotal)}\n                                    </Price>\n                                </td>\n                                <td>\n                                    <Btn onClick={handleDeleteCart(index)}>\n                                        <FontAwesomeIcon icon={faTrashAlt}/>\n                                    </Btn>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </ItemContent>\n            </MobileItem>\n        </li>       \n    )\n}","import styled, { css } from \"styled-components\"\nimport { Link } from \"react-router-dom\"\nimport { useEffect } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\n\nimport { fontTheme, H2, MEDIA_QUERY, P, TextBtn, H4 } from \"../../constants/style\"\n\nimport useProduct from \"../../hooks/useProduct\"\nimport useCart from \"../../hooks/useCart\"\nimport { setErrorMessage } from \"../../features/cart/cartSlice\"\nimport { CheckoutFlow } from \"../../components/CheckoutFlow\"\nimport { CartItem, MobileCartItem } from \"./CartItem\"\n\n\nconst PageWrapper = styled.div``\n\nconst PageContainer = styled.div`\n    width: 90%;\n    ${MEDIA_QUERY.m} {\n        width: 95%;\n    }\n    margin: 0 auto;\n    //   display: flex;\n    //   align-items: flex-start;\n`\n\nconst TableContainer = styled.div`\n    & table {\n        width: 100%;\n        border: 1px solid #aaa;\n        & th, td {\n            ${fontTheme.p}\n            color: ${props => props.theme.color.black};\n            border-top: 1px solid #aaa;\n            border-bottom: 1px solid #aaa;\n        }\n        & tr {\n            vertical-align: top;\n            & th {\n                text-align: left;\n                padding: 5px 10px;\n                background-color: ${props => props.theme.color.lightGrey};\n                color: ${props => props.theme.color.white};\n                font-weight: ${props => props.theme.fontWeight.xl};\n            }\n            & td {\n                padding: 10px;\n            }\n        }\n    }\n`\n\nconst CartContainer = styled(TableContainer)`\n    padding: 10px 0;\n    & table {\n        & th, td {\n            ${MEDIA_QUERY.m} {\n                &:nth-child(3) {\n                    display: none;\n                }\n            }\n            &:nth-last-child(2) {\n                width: 15%;\n            }\n        }\n        & td:first-child {\n            width: 10%;\n            position: relative;\n            & img {\n                width: 100%;\n                min-width: 80px;\n            }\n        }\n    }\n    ${MEDIA_QUERY.s} {\n        display: none;\n    }\n`\n\nconst ADDSTYLE = css`\n    display: inline-block;\n    margin-left: 10px;\n    ${MEDIA_QUERY.s} {\n        display: block;\n        width: fit-content;\n        margin: 20px 0 0 auto;\n    }\n`\n\nconst TotalContainer = styled.div`\n    margin-bottom: 20px;\n    padding: 10px 0;\n    display: flex;\n    flex-direction: row-reverse;\n    justify-content: space-between;\n    align-items: baseline;\n    ${fontTheme.h4}\n    ${MEDIA_QUERY.s} {\n        display: block;\n        text-align: right;\n    }\n    & > a {\n        color: ${props => props.theme.color.black};\n        display: block;\n        margin: 10px 0;\n        & svg {\n            margin-right: 4px;\n        }\n    }\n    & > div {\n        color: ${props => props.theme.color.black};\n        & span {\n            ${fontTheme.h3}\n        }\n        & a {\n            ${ADDSTYLE}\n        }\n    }\n`\n\n\n\nconst ToCartBtn = styled(TextBtn)`\n    vertical-align: bottom;\n    padding: 5px 20px;\n    ${fontTheme.h4}\n    ${props => !props.$active && ADDSTYLE}\n`\n\nconst MobileCartContainer = styled.div`\n    display: none;\n    padding: 10px 0;\n    ${MEDIA_QUERY.s} {\n        display: block;\n    }\n    & > p {\n        ${fontTheme.span}\n        border-bottom: 1px solid #aaa;\n    }\n`\n\n\nexport default function CartPage () {\n\n    const dispatch = useDispatch()\n    const cart = useSelector(state => state.cart.cart)\n    const errorMessage = useSelector(state => state.cart.errorMessage)\n\n    useEffect(() => {\n        if(!cart || !cart.length) return\n        const arr = Array(cart.length).fill('').map((element, index) => {\n            if(cart[index].qty > cart[index].total){\n                element = '選擇的數量超過庫存數量!'\n            }\n            if(cart[index].qty === 0){\n                element = '選擇的數量不可為0!'\n            }\n            if(!cart[index].is_on){\n                element = '此商品已下架, 請從購物車移除!'\n            }\n            return element\n        })\n        dispatch(setErrorMessage(arr))\n    }, [dispatch, cart])\n\n    const {\n        addCommaToPrice\n    } = useProduct()\n\n    const {\n        getTotal,\n        hasError\n    } = useCart()\n\n    return (\n        <PageWrapper>\n            <PageContainer>\n                <H2>購物車</H2>\n                <CheckoutFlow step={1}/>\n                <CartContainer>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th></th>\n                                <th>商品名稱</th>\n                                <th>尺寸 / 顏色</th>\n                                <th>售價</th>\n                                <th>數量</th>\n                                <th>小計</th>\n                                <th></th>\n                            </tr>\n                        </thead>\n                        {cart && cart.length > 0 && (\n                            <tbody>\n                                {cart.map((item, index) => (\n                                    <CartItem \n                                        key={index}\n                                        item={item} \n                                        index={index}\n                                    />\n                                ))}\n                            </tbody>\n                        )}\n                    </table>\n                    {cart ? (\n                        cart.length === 0 && (<H4>購物車內暫無商品</H4>)\n                    ) : (\n                        <H4>商品載入中...</H4>\n                    )}\n                </CartContainer>\n                <MobileCartContainer>\n                    <P>全部商品 ({cart ? cart.length : '-'})</P>\n                    <ul>\n                        {cart ? (\n                            cart.length > 0 ? (\n                                cart.map((item, index) => (\n                                    <MobileCartItem \n                                        key={index}\n                                        item={item} \n                                        index={index}\n                                    />\n                                ))\n                            ) : (\n                                <H4>購物車內暫無商品</H4>\n                            )\n                        ) : (\n                            <H4>商品載入中...</H4>\n                        )}\n                    </ul>\n                </MobileCartContainer>\n                <TotalContainer>\n                    {cart && cart.length > 0 && (\n                        <div>\n                            總金額 (不含運費) : \n                            <span>\n                                ${cart.length > 0 ? (\n                                    addCommaToPrice(getTotal(cart))\n                                ) : (\n                                    '-'\n                                )}\n                            </span>\n                            {hasError(errorMessage) ? (\n                                <ToCartBtn $active={!hasError(errorMessage)}>\n                                    前往結帳\n                                </ToCartBtn>\n                            ) : (\n                                <Link to=\"#\">\n                                    <ToCartBtn $active={!hasError(errorMessage)}>\n                                        前往結帳\n                                    </ToCartBtn>\n                                </Link>\n                            )}\n                        </div>\n                    )}\n                    <Link to=\"/collection\">\n                        <FontAwesomeIcon icon={faChevronDown} transform={{ rotate: 90 }}/>\n                        繼續選購\n                    </Link>\n                </TotalContainer>\n            </PageContainer>\n        </PageWrapper>\n    )\n}","import styled from \"styled-components\"\nimport { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTrashAlt, faPen, faPlus } from '@fortawesome/free-solid-svg-icons'\nimport { crumbMap } from \"../../../constants/mapping\";\nimport { Btn, fontTheme, H2, H4, P, TextBtn } from \"../../../constants/style\"\n\nimport { setPopupCode, setIsOpened } from \"../../../features/general/generalSlice\";\nimport { getProducts, setProduct, setProducts } from \"../../../features/product/productSlice\";\n\nimport { getProductAPI } from \"../../../webAPI/productAPI\";\n\nimport { Popup } from \"../../../components/Popup\";\n\n\nconst MainContainer = styled.main`\n    width: 70%;\n    flex-grow: 1;\n    & h2 {\n        padding: 0 10px;\n    }\n`\n\nconst TableContainer = styled.div`\n    padding: 10px;\n    overflow: auto;\n    & table {\n        width: 100%;\n        min-width: 1000px;\n        border: 1px solid #aaa;\n        & th, td {\n            ${fontTheme.span}\n            color: ${props => props.theme.color.black};\n            border-top: 1px solid #aaa;\n            border-bottom: 1px solid #aaa;\n        }\n        & tr {\n            vertical-align: top;\n            & th {\n                white-space: nowrap;\n                text-align: left;\n                padding: 5px 10px;\n                background-color: ${props => props.theme.color.lightGrey};\n                color: ${props => props.theme.color.white};\n                font-weight: ${props => props.theme.fontWeight.xl};\n            }\n            & td {\n                padding: 10px;\n            }\n        }\n    }\n`\n\nconst ToDetailBtn = styled(TextBtn)`\n    padding: 0 10px;\n`\n\nconst FilterContainer = styled.div`\n    padding: 10px;\n    display: flex;\n    justify-content: space-between;\n    // align-items: center;\n    ${fontTheme.p}\n    & > div {\n        display: flex;\n        & > div + div {\n            margin-left: 10px;\n        }\n        & > button {\n            margin-right: 10px;\n        }\n        & a {\n            color: ${props => props.theme.color.black};\n            & svg {\n                margin-right: 2px;\n                font-size: ${props => props.theme.fontSize.h4};\n            }\n        }\n    }\n`\n\nconst Item = ({product}) => {\n\n    const dispatch = useDispatch()\n    \n    const [info, setInfo] = useState()\n    \n    useEffect(() => {\n        getProductAPI(product.id)\n            .then(result => {\n                setInfo(result.data)\n            })\n        return () => {\n            setInfo()\n        }\n    }, [product.id])\n\n    const handleIsOpened = e => {\n        dispatch(setProduct(info))\n        dispatch(setIsOpened(true))\n        dispatch(setPopupCode(e.currentTarget.name))\n    }\n\n    return (\n        <>\n            {info && (\n                <tr>\n                    <td>{product.id}</td>\n                    <td>{product.gender === 'M' ? '男裝' : '女裝'}</td>\n                    <td>{crumbMap[2][info.product.Category.name]}</td>\n                    <td>{product.name}</td>\n                    <td>{info.product.desc || '-'}</td>\n                    <td>{info.product.material || '-'}</td>\n                    <td>{info.product.washing || '-'}</td>\n                    <td>\n                        <ToDetailBtn name=\"size\" onClick={handleIsOpened} $white $active>查看</ToDetailBtn>\n                    </td>\n                    <td>\n                        <ToDetailBtn name=\"color\" onClick={handleIsOpened} $white $active>查看</ToDetailBtn>\n                    </td>\n                    <td>\n                        <Btn name=\"edit\" onClick={handleIsOpened}>\n                            <FontAwesomeIcon icon={faPen}/>\n                        </Btn>\n                    </td>\n                    <td>\n                        <Btn name=\"delete\" onClick={handleIsOpened}>\n                            <FontAwesomeIcon icon={faTrashAlt}/>\n                        </Btn>\n                    </td>\n                </tr>\n            )}\n        </>\n    )\n}\n\nexport const Information = () => {\n\n    const dispatch = useDispatch()\n\n    const products = useSelector(state => state.product.products)\n    const error = useSelector(state => state.product.error)\n    const popupCode = useSelector(state => state.general.popupCode)\n\n    const [gender, setGender] = useState('')\n    const [category, setCategory] = useState('')\n\n    useEffect(() => {\n        dispatch(getProducts([gender, category], ''))\n        return () => {\n            dispatch(setProducts(null))\n        }\n    }, [dispatch, gender, category])\n\n    const handleSelectChange = e => {\n        if(e.target.name === 'gender') return setGender(e.target.value)\n        if(e.target.name === 'category') return setCategory(e.target.value)\n        if(e.target.name === 'clearFilter'){\n            setGender('')\n            setCategory('')\n        }\n    }\n\n    return (\n        <>\n            <MainContainer>\n                <H2>新增及管理產品資訊</H2>\n                <FilterContainer>\n                    <div>\n                        <ToDetailBtn name=\"clearFilter\" onClick={handleSelectChange} $white $active>清除篩選</ToDetailBtn>\n                        <div>\n                            <label htmlFor=\"gender\">性別: </label>\n                            <select name=\"gender\" value={gender} onChange={handleSelectChange} id=\"gender\">\n                                <option value=\"\">-----</option>\n                                <option value=\"men\">男裝</option>\n                                <option value=\"women\">女裝</option>\n                            </select>\n                        </div>\n                        <div>\n                            <label htmlFor=\"category\">分類: </label>\n                            <select name=\"category\" value={category} onChange={handleSelectChange} id=\"category\">\n                                <option value=\"\">-----</option>\n                                <option value=\"tops\">上衣類</option>\n                                <option value=\"shirts\">襯衫類</option>\n                                <option value=\"knit\">針織衫 / 毛衣</option>\n                                <option value=\"one_piece\">洋裝類</option>\n                                <option value=\"outer\">外套類</option>\n                                <option value=\"bottoms\">褲裝類</option>\n                                <option value=\"skirts\">裙子類</option>\n                                <option value=\"general\">配件類</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div>\n                        <Link to=\"/admin/product/new\">\n                            <Btn>\n                                <FontAwesomeIcon icon={faPlus} />\n                            </Btn>\n                            <span>新增產品</span>\n                        </Link>\n                    </div>\n                </FilterContainer>\n                <TableContainer>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>id</th>\n                                <th>性別</th>\n                                <th>分類</th>\n                                <th>品名</th>\n                                <th>簡介</th>\n                                <th>材質</th>\n                                <th>洗滌方式</th>\n                                <th>尺寸資訊</th>\n                                <th>顏色資訊</th>\n                                <th>編輯</th>\n                                <th>刪除</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {products && !error && products.length > 0 && (\n                                products.map(product => (\n                                    <Item key={product.id} product={product} />\n                                ))\n                            )}\n                        </tbody>\n                    </table>\n                    {products && !error && products.length === 0 && (\n                        <H4>查無商品</H4>\n                    )}\n                    {!products && (\n                        error ? (\n                            <P>{error}</P>\n                        ) : (\n                            <H4>商品載入中......</H4>\n                        )\n                    )}\n                </TableContainer>\n            </MainContainer>\n            <>\n                {popupCode !== 'color' && popupCode !== 'edit' && popupCode !== 'delete' && (\n                    <Popup type=\"size\" />\n                )}\n                {popupCode !== 'size' && popupCode !== 'edit' && popupCode !== 'delete' && (\n                    <Popup type=\"color\" />\n                )}\n                {popupCode !== 'size' && popupCode !== 'color' && popupCode !== 'delete' && (\n                    <Popup type=\"edit\" />\n                )}\n                {popupCode !== 'size' && popupCode !== 'color' && popupCode !== 'edit' && (\n                    <Popup type=\"delete\" />\n                )}\n            </>\n        </>\n        \n    )\n}","import { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\"\n\nimport { fontTheme, H2, H4, P, TextBtn } from \"../../../constants/style\"\nimport { getProducts, setProducts } from \"../../../features/product/productSlice\";\nimport { getProductAPI, updatePatternAPI } from \"../../../webAPI/productAPI\";\n\n\nconst MainContainer = styled.main`\n    width: 70%;\n    flex-grow: 1;\n    & h2 {\n        padding: 0 10px;\n    }\n`\n\nconst TableContainer = styled.div`\n    padding: 10px;\n    overflow: auto;\n    & table {\n        width: 100%;\n        min-width: 1000px;\n        border: 1px solid #aaa;\n        & th, td {\n            ${fontTheme.span}\n            color: ${props => props.theme.color.black};\n            border-top: 1px solid #aaa;\n            border-bottom: 1px solid #aaa;\n            &:nth-child(n+3):nth-child(-n+6){\n                width: 10%;\n            }\n\n            white-space: nowrap;\n\n            \n        }\n        & tr {\n            vertical-align: top;\n            & th {\n                // white-space: nowrap;\n                text-align: left;\n                padding: 5px 10px;\n                background-color: ${props => props.theme.color.lightGrey};\n                color: ${props => props.theme.color.white};\n                font-weight: ${props => props.theme.fontWeight.xl};\n            }\n            & td {\n                padding: 10px;\n            }\n        }\n    }\n`\n\n\nconst FilterBtn = styled(TextBtn)`\n    padding: 0 10px;\n`\n\nconst Input = styled.input`\n    &:last-child {\n        width: 50px;\n        padding: 0 5px;\n    }\n    margin-right: 2px;\n    & + label {\n        margin-right: 5px;\n    }\n`\n\nconst Form = styled.td`\n    & ${Input}:last-child {\n        border: ${props => props.$isError && '2px solid red'};\n    }\n    & + td > span {\n        color: ${props => props.$isError && props.theme.color.alert};\n    }\n`\n\nconst Total = styled.td`\n    background-color: ${props => props.$safe && props.theme.color.success};\n    background-color: ${props => props.$caution && props.theme.color.yellow};\n    background-color: ${props => props.$danger && props.theme.color.alert};\n`\n\nconst SubItem = ({pattern, group}) => {\n\n    const history = useHistory();\n\n    const [type, setType] = useState('')\n    const [qty, setQty] = useState(0)\n\n    const [isEditing, setIsEditing] = useState(false)\n    const [error, setError] = useState('')\n\n    const handleInputChange = e => {\n        switch (e.target.name) {\n            case 'type': {\n                return setType(e.target.id)\n            }\n            case 'qty': {\n                if(error) setError('')\n                return setQty(e.target.value)\n            }\n            default: break\n        }\n    }\n\n    const handleIsEditing = e => {\n        if(e.target.name === 'edit') return setIsEditing(true)\n        if(e.target.name === 'save') {\n            if(!type || !parseInt(qty)) {\n                setType('')\n                setQty(0)\n                return setIsEditing(false)\n            }\n            updatePatternAPI(pattern.id, {\n                type, \n                quantity: parseInt(qty)\n            }).then(result => {\n                if(!result.ok) return setError(result.message)\n                alert('更改存貨數量成功!')\n                return history.go()\n            })\n        }\n    }\n\n    return (\n        <tr>\n            <td></td>\n            <td></td>\n            <td>{pattern[group].size}</td>\n            <td>{pattern.Color.name}</td>\n            <Total \n                $safe={pattern.total >= 30}\n                $caution={pattern.total >= 10 && pattern.total < 30}\n                $danger={pattern.total < 10 && typeof pattern.total === 'number'}\n            >\n                {typeof pattern.total === 'number' ? pattern.total : '-'}\n            </Total>\n            <Form $isError={error}>\n                <Input \n                    checked={type === 'INC'} \n                    onChange={handleInputChange} \n                    type=\"radio\" \n                    name=\"type\" \n                    id=\"INC\" \n                    disabled={!isEditing} \n                />\n                <label htmlFor=\"increase\">增加</label>\n                <Input \n                    checked={type === 'DEC'} \n                    onChange={handleInputChange} \n                    type=\"radio\" \n                    name=\"type\" \n                    id=\"DEC\" \n                    disabled={!isEditing} \n                />\n                <label htmlFor=\"decrease\">減少</label>\n                <Input \n                    value={qty} \n                    onChange={handleInputChange} \n                    type=\"number\" \n                    name=\"qty\" \n                    min=\"0\" \n                    disabled={!isEditing} \n                />個\n            </Form>\n            <td>{isEditing ? (<span>{error}</span>) : pattern.updatedAt}</td>\n            <td>\n                {isEditing ? (\n                    <FilterBtn onClick={handleIsEditing} type=\"submit\" name=\"save\" $white $active>\n                        儲存\n                    </FilterBtn>\n                ) : (\n                    <FilterBtn onClick={handleIsEditing} type=\"button\" name=\"edit\" $white $active>\n                        編輯\n                    </FilterBtn>\n                )}\n            </td>\n            <td>\n                <FilterBtn type=\"button\" $white $active>\n                    查看\n                </FilterBtn>\n            </td>\n        </tr>\n    )\n}\n\nconst Item = ({product}) => {\n\n    const [item, setItem] = useState()\n\n    useEffect(() => {\n        getProductAPI(product.id)\n            .then(result => {\n                setItem({group: result.data.product.Category.group.slice(0, -1), patterns: result.data.patterns})\n            })\n        return () => {\n            setItem()\n        }\n    }, [product.id])\n\n    return (\n        <>\n            <tr>\n                <td>{product.id}</td>\n                <td>{product.name}</td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n            </tr>\n            {item && item.patterns.map(pattern => {\n                return (\n                    <SubItem \n                        key={pattern.id} \n                        pattern={pattern} \n                        group={item.group} \n                    />\n                )\n            })}\n        </>\n    )\n}\n\nexport const Quantity = () => {\n\n    const dispatch = useDispatch()\n\n    const products = useSelector(state => state.product.products)\n    const error = useSelector(state => state.product.error)\n\n    useEffect(() => {\n        dispatch(getProducts('', ''))\n        return () => {\n            dispatch(setProducts(null))\n        }\n    }, [dispatch])\n\n    return (\n        <>\n            <MainContainer>\n                <H2>管理存貨數量與紀錄</H2>\n                <TableContainer>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>id</th>\n                                <th>產品名稱</th>\n                                <th>尺寸</th>\n                                <th>顏色</th>\n                                <th>數量</th>\n                                <th></th>\n                                <th>更新時間</th>\n                                <th></th>\n                                <th>進出紀錄</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {products && !error && products.length > 0 && (\n                                products.map(product => (\n                                    <Item key={product.id} product={product} />\n                                ))\n                            )}\n                        </tbody>\n                    </table>\n                    {products && !error && products.length === 0 && (\n                        <H4>查無商品</H4>\n                    )}\n                    {!products && (\n                        error ? (\n                            <P>{error}</P>\n                        ) : (\n                            <H4>商品載入中......</H4>\n                        )\n                    )}\n                </TableContainer>\n            </MainContainer>\n        </>\n        \n    )\n}","import styled from \"styled-components\"\nimport { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheck, faTimes } from '@fortawesome/free-solid-svg-icons'\n\nimport { fontTheme, H2, H4, P, TextBtn } from \"../../../constants/style\"\nimport { getProducts, setProducts } from \"../../../features/product/productSlice\";\nimport { updateProductAPI } from \"../../../webAPI/productAPI\";\n\n\nconst MainContainer = styled.main`\n    width: 70%;\n    flex-grow: 1;\n    & h2 {\n        padding: 0 10px;\n    }\n`\n\nconst TableContainer = styled.div`\n    padding: 10px;\n    overflow: auto;\n    & table {\n        width: 100%;\n        min-width: 1000px;\n        border: 1px solid #aaa;\n        & th, td {\n            ${fontTheme.span}\n            color: ${props => props.theme.color.black};\n            border-top: 1px solid #aaa;\n            border-bottom: 1px solid #aaa;\n            &:nth-child(n+3):nth-child(-n+6){\n                width: 8%;\n            }\n        }\n        & tr {\n            vertical-align: top;\n            & th {\n                white-space: nowrap;\n                text-align: left;\n                padding: 5px 10px;\n                background-color: ${props => props.theme.color.lightGrey};\n                color: ${props => props.theme.color.white};\n                font-weight: ${props => props.theme.fontWeight.xl};\n            }\n            & td {\n                padding: 10px;\n            }\n        }\n    }\n`\n\nconst FilterContainer = styled.div`\n    padding: 10px;\n    display: flex;\n    ${fontTheme.p}\n    & > div + div {\n        margin-left: 10px;\n    }\n    & > button {\n        margin-right: 20px;\n    }\n`\n\nconst SortBtn = styled.button`\n    ${fontTheme.span}\n    color: ${props => props.theme.color.white};\n    font-weight: ${props => props.theme.fontWeight.xl};\n\n    position: relative;\n    &::before {\n        content: '';\n        display: block;\n        width: 0;\n        height: 0;\n        position: absolute;\n        right: -15px;\n        top: -1px;\n        border-left: 5px solid transparent;\n        border-right: 5px solid transparent;\n        border-bottom: 10px solid ${props => props.theme.color.grey};\n    }\n    &::after {\n        content: '';\n        display: block;\n        width: 0;\n        height: 0;\n        position: absolute;\n        right: -15px;\n        bottom: -1px;\n        border-left: 5px solid transparent;\n        border-right: 5px solid transparent;\n        border-top: 10px solid ${props => props.theme.color.grey};\n    }\n`\n\nconst FilterBtn = styled(TextBtn)`\n    padding: 0 10px;\n`\n\nconst BooleanSvg = styled(FontAwesomeIcon)`\n    font-size: ${props => props.theme.fontSize.bodyLarge};\n    color: ${props => props.$active ? props.theme.color.success : props.theme.color.alert};\n`\n\nconst PriceInput = styled.input`\n    width: 50px;\n`\n\nconst Item = ({product}) => {\n\n    const [isOn, setIsOn] = useState(null)\n    const [isSale, setIsSale] = useState(null)\n    const [priceStandard, setPriceStandard] = useState(NaN)\n    const [priceSale, setPriceSale] = useState(NaN)\n\n    const [isEditing, setIsEditing] = useState(false)\n\n    useEffect(() => {\n        setIsOn(product.is_on)\n        setIsSale(product.is_sale)\n        setPriceStandard(product.price_standard || '')\n        setPriceSale(product.price_sale || '')\n        return () => {\n            setIsOn(null)\n            setIsSale(null)\n            setPriceStandard(NaN)\n            setPriceSale(NaN)\n        }\n    }, [product])\n\n    const handleInputChange = e => {\n        switch (e.target.name) {\n            case 'is_on': {\n                return setIsOn(e.target.checked)\n            }\n            case 'is_sale': {\n                return setIsSale(e.target.checked)\n            }\n            case 'price_standard': {\n                return setPriceStandard(e.target.value)\n            }\n            case 'price_sale': {\n                return setPriceSale(e.target.value)\n            }\n            default: break\n        }\n    }\n\n    const handleIsEditing = e => {\n        if(e.target.name === 'edit') return setIsEditing(true)\n        if(e.target.name === 'save') {\n            return updateProductAPI(product.id, {\n                is_on: isOn, \n                is_sale: isSale, \n                price_standard: parseInt(priceStandard), \n                price_sale: parseInt(priceSale)\n            }).then(result => {\n                if(!result.ok) return console.log(result.message)\n                setIsEditing(false)\n            })\n        }\n    }\n\n    return (\n        <tr>\n            <td>{product.id}</td>\n            <td>{product.name}</td>\n            <td>\n                {isEditing ? (\n                    <input \n                        onChange={handleInputChange} \n                        checked={isOn} \n                        type=\"checkbox\" \n                        name=\"is_on\" \n                    />\n                ) : (\n                    <BooleanSvg icon={isOn ? faCheck : faTimes} $active={isOn} />\n                )}\n            </td>\n            <td>\n                {isEditing ? (\n                    <input \n                        onChange={handleInputChange} \n                        checked={isSale} \n                        type=\"checkbox\" \n                        name=\"is_sale\" \n                    />\n                ) : (\n                    <BooleanSvg icon={isSale ? faCheck : faTimes} $active={isSale} />\n                )}\n            </td>\n            <td>\n                {isEditing ? (\n                    <PriceInput \n                        onChange={handleInputChange} \n                        value={priceStandard} \n                        type=\"number\" \n                        name=\"price_standard\" \n                        min=\"0\"\n                    />\n                ) : (\n                    priceStandard || '-'\n                )}\n            </td>\n            <td>\n                {isEditing ? (\n                    <PriceInput \n                        onChange={handleInputChange} \n                        value={priceSale} \n                        type=\"number\" \n                        name=\"price_sale\" \n                        min=\"0\"\n                    />\n                ) : (\n                    priceSale || '-'\n                )}\n            </td>\n            <td>{product.sold}</td>\n            <td>{product.updatedAt}</td>\n            <td>\n                {isEditing ? (\n                    <FilterBtn name=\"save\" onClick={handleIsEditing} $white $active>\n                        儲存\n                    </FilterBtn>\n                ) : (\n                    <FilterBtn name=\"edit\" onClick={handleIsEditing} $white $active>\n                        編輯\n                    </FilterBtn>\n                )}\n            </td>\n            <td>\n                <FilterBtn $white $active>\n                    查看\n                </FilterBtn>\n            </td>\n        </tr>\n    )\n}\n\nexport const Price = () => {\n\n    const dispatch = useDispatch()\n\n    const products = useSelector(state => state.product.products)\n    const error = useSelector(state => state.product.error)\n\n    const [isOn, setIsOn] = useState('')\n    const [isSale, setIsSale] = useState('')\n    const [order, setOrder] = useState('')\n\n    useEffect(() => {\n        const search = new URLSearchParams();\n        if(isOn !== '') search.set('is_on', isOn)\n        if(isSale !== '') search.set('is_sale', isSale)\n        if(order !== '') search.set('order', order)\n        dispatch(getProducts('', `?${search}`))\n        return () => {\n            dispatch(setProducts(null))\n        }\n    }, [dispatch, isOn, isSale, order])\n\n    const handleSelectChange = e => {\n        if(e.target.name === \"is_on\") return setIsOn(e.target.value)\n        if(e.target.name === \"is_sale\") return setIsSale(e.target.value)\n        if(e.target.name === \"clearFilter\"){\n            setIsOn('')\n            setIsSale('')\n        }\n    }\n\n    const handleSort = e => {\n        if (e.target.name === 'sold') {\n            if(order === 'sold_desc') return setOrder('sold_asc')\n            if(order === 'sold_asc') return setOrder('sold_desc')\n            setOrder('sold_desc')            \n        } else {\n            if(order === 'price_desc') return setOrder('price_asc')\n            if(order === 'price_asc') return setOrder('price_desc')\n            setOrder('price_asc')\n        }\n    }\n\n    return (\n        <MainContainer>\n            <H2>管理商品價格與紀錄</H2>\n            <FilterContainer>\n                <FilterBtn name=\"clearFilter\" onClick={handleSelectChange} $white $active>清除篩選</FilterBtn>\n                <div>\n                    <select name=\"is_on\" value={isOn} onChange={handleSelectChange}>\n                        <option value=\"\">-----</option>\n                        <option value=\"1\">已上架</option>\n                        <option value=\"0\">未上架</option>\n                    </select>\n                </div>\n                <div>\n                    <select name=\"is_sale\" value={isSale} onChange={handleSelectChange}>\n                        <option value=\"\">-----</option>\n                        <option value=\"1\">特價商品</option>\n                        <option value=\"0\">原價商品</option>\n                    </select>\n                </div>\n            </FilterContainer>\n            <TableContainer>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>id</th>\n                            <th>產品名稱</th>\n                            <th>上架中</th>\n                            <th>特價中</th>\n                            <th>\n                                <SortBtn name=\"price_standard\" onClick={handleSort}>原價</SortBtn>\n                            </th>\n                            <th>\n                                <SortBtn name=\"price_sale\" onClick={handleSort}>特價</SortBtn>\n                            </th>\n                            <th>\n                                <SortBtn name=\"sold\" onClick={handleSort}>已售出</SortBtn>\n                            </th>\n                            <th>更新時間</th>\n                            <th></th>\n                            <th>存貨紀錄</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {products && !error && products.length > 0 && (\n                            products.map(product => (\n                                <Item key={product.id} product={product} />\n                            ))\n                        )}\n                    </tbody>\n                </table>\n                {products && !error && products.length === 0 && (\n                    <H4>查無商品</H4>\n                )}\n                {!products && (\n                    error ? (\n                        <P>{error}</P>\n                    ) : (\n                        <H4>商品載入中...</H4>\n                    )\n                )}\n            </TableContainer>\n        </MainContainer>        \n    )\n}","import styled from \"styled-components\";\nimport { Switch, Route, Link, useRouteMatch, useLocation } from \"react-router-dom\"\n\nimport { H3 } from \"../../../constants/style\";\n\nimport { Information } from \"./Information\";\nimport { Quantity } from \"./Quantity\";\nimport { Price } from \"./Price\";\nimport AddProduct from \"./AddProduct\";\n\n\nconst MainContainer = styled.main`\n    width: 70%;\n    flex-grow: 1;\n    & h3 {\n        padding: 10px;\n    }\n    & a {\n        color: ${props => props.theme.color.black};\n    }\n`\n\nexport default function AdminProductPage () {\n\n    const { path, url } = useRouteMatch();\n    const { pathname } = useLocation();\n\n    return (\n        <>\n            {path === pathname && (\n                <MainContainer>\n                    <H3>\n                        <Link to={`${url}/information`}>新增及管理產品資訊</Link>\n                    </H3>\n                    <H3>\n                        <Link to={`${url}/quantity`}>管理存貨數量與紀錄</Link>\n                    </H3>\n                    <H3>\n                        <Link to={`${url}/price`}>管理商品價格與紀錄</Link>\n                    </H3>\n                </MainContainer>\n            )}\n            <Switch>\n                <Route path={`${path}/information`}>\n                    <Information />\n                </Route>\n                <Route path={`${path}/quantity`}>\n                    <Quantity />\n                </Route>\n                <Route path={`${path}/price`}>\n                    <Price />\n                </Route>\n                <Route path={`${path}/new`}>\n                    <AddProduct />\n                </Route>\n                <Route path={`${path}/edit/:id`}>\n                    <AddProduct />\n                </Route>\n            </Switch>\n        </>\n    )\n}","import styled from \"styled-components\";\nimport { Switch, Route, useRouteMatch, useLocation } from \"react-router-dom\"\n\nimport { CrumbNav } from \"../../components/CrumbNav\";\nimport { H4, LinkedTag, MEDIA_QUERY, P, PageContainer, PageWrapper } from \"../../constants/style\";\n\nimport AdminProductPage from \"./AdminProductPage\";\n\n\nconst AsideContainer = styled.aside`\n    width: 20%;\n    min-width: 250px;\n\n    & > div {\n        z-index: 1;\n        margin: 10px;\n        background-color: ${props => props.theme.color.white};\n    }\n\n    ${MEDIA_QUERY.main} {\n        position: fixed;\n        left: -240px;\n        z-index: 200;\n        transition: .3s;\n    }\n\n`\n\nconst AsideBlock = styled.div`\n    border: 1px solid ${props => props.theme.color.lightGrey}8;\n    & > h4 {\n        padding: 10px 15px;\n        font-weight: ${props => props.theme.fontWeight.xl};\n        background-color: #eee;\n    }\n    & > div {\n        padding: 5px 15px;\n    }\n`\n\nconst AsideContent = styled(P)`\n    line-height: 2em;\n    padding: ${props => props.$active ? '5px 0 7px' : '5px 0'};\n    font-weight: ${props => props.$active && props.theme.fontWeight.xl};\n    display: inline-block;\n    & > a {\n        color: ${props => props.theme.color.black};\n    }\n`\n\n\n\nexport default function AdminPage () {\n\n    let { path, url } = useRouteMatch();\n\n    const { pathname } = useLocation();\n    const subPath = pathname.split('/').slice(2, 4)\n    const pathArr = ['', 'admin']\n    if(subPath) subPath.map(path => pathArr.push(path))\n\n\n    return (\n        <>\n            <CrumbNav pathArr={pathArr} />\n            <PageWrapper>\n                <PageContainer>\n                    <AsideContainer>\n                        <AsideBlock>\n                            <H4>商品管理</H4>\n                            <div>\n                                <AsideContent $active={subPath[1] === 'information'}>\n                                    {subPath[1] === 'information' ? (\n                                        <>新增及管理產品資訊</>\n                                    ) : (\n                                        <LinkedTag to={`${url}/product/information`}>新增及管理產品資訊</LinkedTag>\n                                    )}\n                                </AsideContent>\n                                <AsideContent $active={subPath[1] === 'quantity'}>\n                                    {subPath[1] === 'quantity' ? (\n                                        <>管理存貨數量與紀錄</>\n                                    ) : (\n                                        <LinkedTag to={`${url}/product/quantity`}>管理存貨數量與紀錄</LinkedTag>\n                                    )}\n                                </AsideContent>\n                                <AsideContent $active={subPath[1] === 'price'}>\n                                    {subPath[1] === 'price' ? (\n                                        <>管理商品價格與紀錄</>\n                                    ) : (\n                                        <LinkedTag to={`${url}/product/price`}>管理商品價格與紀錄</LinkedTag>\n                                    )}\n                                </AsideContent>\n                            </div>\n                        </AsideBlock>\n                        <AsideBlock>\n                            <H4>訂單管理</H4>\n                            <div>\n                                <AsideContent $active={subPath[0] === 'order'}>\n                                    {subPath[0] === 'order' ? (\n                                        <>管理所有訂單</>\n                                    ) : (\n                                        <LinkedTag to={`${url}/order`}>管理所有訂單</LinkedTag>\n                                    )}\n                                </AsideContent>\n                            </div>\n                        </AsideBlock>\n                        <AsideBlock>\n                            <H4>用戶管理</H4>\n                            <div>\n                                <AsideContent $active={subPath[0] === 'user'}>\n                                    {subPath[0] === 'user' ? (\n                                        <>管理所有用戶</>\n                                    ) : (\n                                        <LinkedTag to={`${url}/user`}>管理所有用戶</LinkedTag>\n                                    )}\n                                </AsideContent>\n                            </div>\n                        </AsideBlock>\n                    </AsideContainer>\n\n                    <Switch>\n                        <Route path={`${path}/product`}>\n                            <AdminProductPage />\n                        </Route>\n                        {/* <Route path={`${path}/order`}>\n                            <AdminProductPage />\n                        </Route>\n                        <Route path={`${path}/user`}>\n                            <AdminProductPage />\n                        </Route> */}\n                    </Switch>\n\n                </PageContainer>\n            </PageWrapper>\n        </>\n    )\n}","import './App.css';\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\"\nimport ScrollRestoration from 'react-scroll-restoration'\n\nimport Header from './components/Header'\nimport Footer from './components/Footer'\nimport HomePage from './pages/HomePage'\nimport ListPage from './pages/ListPage'\nimport ProductPage from './pages/ProductPage'\nimport CartPage from './pages/CartPage'\nimport AdminPage from './pages/AdminPages/AdminPage';\n\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { fab } from '@fortawesome/free-brands-svg-icons'\n\nlibrary.add(fab)\n\n\nfunction App() {\n\n  return (\n    <Router>\n      <ScrollRestoration />\n      <Header/>\n      <Switch>\n        <Route exact path=\"/\">\n          <HomePage />\n        </Route>\n        <Route path=\"/collection\">\n          <ListPage />\n        </Route>\n        <Route path=\"/product/:id\">\n          <ProductPage />\n        </Route>\n        <Route path=\"/cart\">\n          <CartPage />\n        </Route>\n        <Route path=\"/admin\">\n          <AdminPage />\n        </Route>\n      </Switch>\n      <Footer/>\n    </Router>\n  );\n}\n\nexport default App;\n","import { configureStore } from '@reduxjs/toolkit'\nimport productReducer from '../features/product/productSlice'\nimport generalReducer from '../features/general/generalSlice'\nimport cartReducer from '../features/cart/cartSlice'\n\nexport const store = configureStore({\n  reducer: {\n    product: productReducer,\n    general: generalReducer,\n    cart: cartReducer,\n  },\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport { ThemeProvider } from 'styled-components';\nimport { theme } from './constants/theme';\n\nimport { store } from './app/store'\nimport { Provider } from 'react-redux'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ThemeProvider theme={theme}>\n        <App />\n      </ThemeProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}