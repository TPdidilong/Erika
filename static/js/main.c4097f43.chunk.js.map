{"version":3,"sources":["constants/theme.js","constants/style.js","components/LinkItem.js","components/Header/MobileNav.js","components/Header/Nav.js","components/Img.js","webAPI/productAPI.js","features/product/productSlice.js","features/cart/cartSlice.js","hooks/useCart.js","components/Header/Cart.js","assets/logo.png","components/Logo.js","components/Header/Header.js","components/Header/index.js","components/Footer/Footer.js","components/Footer/index.js","pages/HomePage/Carousel.js","hooks/useCarousel.js","assets/arrival_female.jpeg","assets/arrival_male.jpeg","pages/HomePage/Arrival.js","components/Feed.js","components/TestProductCards.js","features/general/generalSlice.js","hooks/useProduct.js","components/ProductItem.js","pages/HomePage/Trend.js","pages/HomePage/HomePage.js","constants/mapping.js","components/CrumbNav.js","hooks/usePriceFilter.js","pages/ListPage/Filter.js","components/Trend.js","components/Aside.js","pages/ListPage/Sort.js","pages/ListPage/Pagination.js","pages/ListPage/ProductList.js","pages/ProductPage/CartPopup.js","components/LoginPopup.js","hooks/useAdminProduct.js","pages/AdminPages/AdminProductPage/AddProduct.js","pages/AdminPages/AdminProductPage/InfoPopup.js","components/Popup.js","pages/ListPage/ListPage.js","pages/ProductPage/Image.js","components/QtySelector.js","pages/ProductPage/Content.js","pages/ProductPage/Detail.js","pages/ProductPage/ProductPage.js","components/CheckoutFlow.js","pages/CartPage/CartItem.js","pages/CartPage/CartPage.js","pages/AdminPages/AdminProductPage/Information.js","pages/AdminPages/AdminProductPage/Quantity.js","pages/AdminPages/AdminProductPage/Price.js","pages/AdminPages/AdminProductPage/AdminProductPage.js","pages/AdminPages/AdminPage.js","App.js","app/store.js","index.js"],"names":["theme","fontSize","bannerLarge","bannerMedium","svgLarge","h2","svg","btn","h3","h4","bodyLarge","body","bodySmall","fontWeight","xxl","xl","l","m","s","xs","color","lightGrey","grey","black","white","light_primary","alert","success","brown","yellow","MEDIA_QUERY","LinkedTag","css","LinkedUL","styled","ul","fontTheme","h5","p","span","H2","H3","H4","P","Span","H5","Btn","button","TextBtn","props","$active","$white","PageWrapper","div","PageContainer","LinkItem","to","name","size","onClick","document","querySelector","checked","MobileMenuNav","nav","MobileMenu","ToggleBtn","ToggleInput","input","CheckBox","id","type","htmlFor","icon","faChevronDown","MobileNav","MenuNav","Menu","SubMenu","SubMenuListFlex","SubMenuListBlock","Nav","spin_loader","keyframes","Loader","Img","image","useState","isLoading","setIsLoading","src","alt","onLoad","baseURL","getProductsAPI","pathname","search","Arr","URLSearchParams","gender","category","push","men","women","tops","shirts","knit","one_piece","outer","bottoms","skirts","general","has","sizes","get","split","map","colors","prices","order","indexOf","page","is_on","is_sale","query","fetch","then","res","console","log","msg","status","Error","statusText","json","data","ok","message","catch","e","getProductAPI","getTrendingProductsAPI","updateProductAPI","product","method","headers","JSON","stringify","productSlice","createSlice","initialState","unfilteredProducts","products","error","spec","qty","reducers","setUnfilteredProducts","state","action","payload","setProducts","setProduct","setError","setSize","setColor","setQty","actions","getProducts","dispatch","result","cartSlice","cart","errorMessage","setCart","setCartQty","find","item","pattern_id","deleteCart","filter","index","addCart","setErrorMessage","getProductInfo","itemPattern","patterns","pattern","group","Category","slice","Color","total","price_standard","price_sale","mainImg","Images","img","is_main","setCartStorage","items","Promise","all","a","useCart","useDispatch","handleDeleteCart","cartLocal","parse","localStorage","getItem","i","setItem","handleQtyChange","target","value","parseInt","handleBtnClick","direction","getTotal","length","reduce","acc","cur","hasError","some","err","MenuBtn","CartContainer","CartCard","li","CartImage","CartInfo","ToCartBtn","Cover","label","Cart","useSelector","useEffect","cartItem","faShoppingCart","every","url","faTrashAlt","LogoContainer","h1","Logo","logo","height","HeaderWrapper","HeaderContainer","HeaderLeft","HeaderRight","BurgerBtn","BurgerInput","MenuBtnGroup","ToAdminBtn","Header","style","position","zIndex","faBars","faUser","faHeart","FooterWrapper","FooterContainer","BottomWrapper","BottomContainer","FooterLeft","FooterRight","LinkBtn","LinkBtnGroup","LinkedList","Footer","BannerWrapper","BannerContainer","LeftBtn","RightBtn","Dot","DotContainer","ArrowContainer","BannerImage","handleClick","link","Carousel","W","setW","currentPage","setCurrentPage","isDragging","setIsDragging","isClicked","setIsClicked","isHovered","setIsHovered","X","useRef","banner","timeoutID","current","setTimeout","transition","transform","clearTimeout","handleTransform","pageX","handleMouseDown","preventDefault","handleMouseMove","handleMouseUp","handleMouseLeave","handleMouseOver","handleButtonClick","handleRadioChange","handleRadioClick","useCarousel","onMouseLeave","onMouseOver","onChange","ref","onMouseDown","onMouseMove","onMouseUp","ArrivalWrapper","ArrivalContainer","ArrivalItem","TitleWrapper","TitleContainer","Arrival","arrival_female_img","arrival_male_img","FeedWrapper","FeedContainer","Feed","ProductCard","section","ImageContainer","ImageMask","ProductPrice","ProductReminder","ProductReminderSale","ProductReminderNew","TestProductCards","faCartPlus","fasHeart","generalSlice","isOpened","popupCode","setIsOpened","setPopupCode","useProduct","isChecked","setIsChecked","setMainImg","scaledImg","size_Initialized","addCommaToPrice","price","arr","reverse","join","offsetX","nativeEvent","offsetY","offsetWidth","perX","perY","left","top","handleImgClick","tagName","handleCheckedChange","handleSizeChange","handleColorChange","isNull","handleAddToCart","newItem","WriteToLocalStorage","handleAddToWishList","handleClosePopup","BtnContainer","ProductItem","TrendingWrapper","TrendingContainer","Subtitle","ProductContainer","Trend","male","female","trends","setTrends","trend","defaultChecked","HomePage","crumbMap","collection","admin","user","information","quantity","new","sizeMap","Size_top","sleeve_length","body_length","body_width","Size_bottom","waist","hip","rise","inseam","Size_skirt","CrumbWrapper","CrumbContainer","CrumbNav","pathArr","faHome","path","usePriceFilter","useContext","LocationContext","minInitailizer","Math","min","maxInitailizer","max","getUnfilteredProducts","minimum","maximum","setMin","setMax","WR","WL","perLeft","perRight","bar","barSelected","knobLeft","knobRight","priceParam","minTemp","maxTemp","right","history","useHistory","isNaN","per","Number","toFixed","offsetLeft","newSearch","set","append","delete","priceURL","ControllerBtn","AsideBlock","FilterContainer","SizeFilter","ColorFilter","ColorSpan","$border","$color","PriceFilter","PriceTag","PriceBar","PriceKnob","ClearBtn","SizeSelect","param","faSquare","includes","faCheckSquare","newParam","ColorSelect","border","PriceSelect","$left","$right","Filter","faFilter","TrendContainer","TrendCard","TrendImage","TrendInfo","TrendPrice","TrendItem","PictureContainer","AsideContainer","aside","Controller","Aside","SortContainer","GalleryBtnGroup","GalleryBtn","$four","GalleryRadio","$two","$three","MenuContainer","SortSelect","sortMap","SortMenu","currentOrder","sold_desc","price_desc","price_asc","title","Object","keys","Sort","faThLarge","faTh","faAlignJustify","rotate","PageBtn","$selected","Result","PageSelect","selected","Page","page_count","n","Pagination","count","per_page","number_start","number_end","IndexContainer","ProductList","window","scrollTo","rows","PopupItem","PopupBtnGroup","PopupBtn","$checked","CartPopup","PopupContent","LoginPopup","useAdminProduct","step","setStep","productToAdd","setProductToAdd","setName","setGender","setCategory","desc","setDesc","material","setMaterial","washing","setWashing","Array","fill","images","setImages","setSizes","setColors","setPatterns","isOn","setIsOn","isSale","setIsSale","priceStandard","setPriceStandard","priceSale","setPriceSale","Colors","checkForm","Set","saveProduct","handleInputChange","toUpperCase","toLowerCase","handleSetStep","searchProductAPI","lastProduct","handleFormSubmit","scrollIntoView","go","addProductAPI","handleAddPattern","obj","ele","code","handleDeletePattern","currentTarget","StepContainer","FirstStepContainer","SecondStepContainer","$step","ThirdStepContainer","MainContainer","main","LeftContainer","RightContainer","FlowNode","FlowText","$fixed","FlowContent","InputBlock","UploadBtn","ImgInput","CheckInput","InputTitle","SizeInput","ColorInput","PatternInput","PriceInput","FirstStepInputs","disabled","required","placeholder","FirstStep","SecondStepInputs","sizesLength","colorsLength","entries","j","faTimes","SecondStep","onSubmit","ThirdStepInputs","ThirdStep","AddProduct","unblock","block","confirm","TableContainer","SizePopup","element","measure","word","ColorPopup","EditPopup","DeletePopup","PopupCover","$isOpened","PopupWrapper","PopupContainer","$type","PopupHeader","$cart","PopupTitle","Popup","faCheck","createContext","ListPage","useLocation","currentPath","currentTitle","previousPath","Provider","ImageMain","$isLoading","ImageCarousel","Image","Qty","QtySelector","ContentContainer","SpecContainer","ColorSelector","Msg","SizeSelector","ColorLabel","$isNull","PriceIsSale","QtyAndAdd","AddBtn","WishList","Content","DetailContainer","DetailTag","TagBtn","DetailContent","InfoContainer","SizeContainer","Detail","ItemContainer","BreadCrumb","setPath","ProductPage","useParams","getProduct","FlowMobile","FlowContainer","CheckoutFlow","NameNote","Price","SellingPrice","ErrorMsg","MobileItem","ItemTitle","ItemContent","ItemImage","ItemName","CartItem","subtotal","MobileCartItem","ADDSTYLE","TotalContainer","MobileCartContainer","CartPage","ToDetailBtn","Item","info","setInfo","handleIsOpened","faPen","Information","handleSelectChange","faPlus","FilterBtn","Input","Form","td","$isError","Total","$safe","$caution","$danger","SubItem","setType","isEditing","setIsEditing","handleIsEditing","updatePatternAPI","updatedAt","Quantity","SortBtn","BooleanSvg","FontAwesomeIcon","NaN","sold","setOrder","handleSort","AdminProductPage","useRouteMatch","AsideContent","AdminPage","subPath","library","add","fab","Layout","App","exact","store","configureStore","reducer","productReducer","generalReducer","cartReducer","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c4097f43.chunk.js","sourcesContent":["export const theme = {\n    fontSize: {\n        bannerLarge: \"64px\",\n        bannerMedium: \"48px\",\n        svgLarge: \"40px\",\n        h2: \"32px\",\n        svg: \"28px\",\n        btn: \"24px\",\n        h3: \"22px\",\n        h4: \"18px\",\n        bodyLarge: \"16px\",\n        body: \"14px\",\n        bodySmall: \"12px\",\n    },\n    fontWeight: {\n        xxl: \"900\",\n        xl: \"700\",\n        l: \"500\",\n        m: \"400\",\n        s: \"300\",\n        xs: \"100\",\n    },\n    color: {\n        lightGrey: \"#aaa\",\n        grey: \"#555\",\n        black: \"#333\",\n        white: \"#fff\",\n        light_primary: \"#eee\",\n        alert: \"#e83927\",\n        success: \"#40a85f\",\n        brown: \"#918481\",\n        yellow: \"#d4ad54\",\n    },\n}","import styled, { css } from \"styled-components\"\nimport { theme } from \"./theme\"\n\nexport const MEDIA_QUERY = {\n    l: \"@media (max-width: 1366px)\",\n    main: \"@media (max-width: 1024px)\",\n    m: \"@media (max-width: 768px)\",\n    s: \"@media (max-width: 512px)\",\n    xs: \"@media (max-width: 256px)\",\n}\n\nexport const LinkedTag = css`\n    & a {\n        display: inline-block;\n        color: ${theme.color.black};\n        &::after {\n            content: '';\n            display: block;\n            width: 0%;\n            height: 2px;\n            background-color: ${theme.color.black};\n            transition: width .4s;\n        }\n        &:hover {\n            &::after {\n                width: 100%\n            }\n        }\n    }\n`\n\nexport const LinkedUL = styled.ul`\n    & a {\n        display: block;\n        color: ${theme.color.black};\n        & h4, p {\n            &::after {\n                content: '';\n                display: block;\n                width: 0%;\n                height: 2px;\n                background-color: ${theme.color.black};\n                transition: width .4s;\n            }\n        }\n        &:hover {\n            & h4, p {\n                &::after {\n                    width: 100%\n                }\n            }\n        }\n    }\n`\n\nexport const fontTheme = {\n    h2: css`\n        font-size: ${theme.fontSize.h2};\n        font-weight: ${theme.fontWeight.xl};\n        line-height: 2em;\n    `,\n    h3: css`\n        font-size: ${theme.fontSize.h3};\n        font-weight: ${theme.fontWeight.xl};\n        line-height: 1.5em;\n    `,\n    h4: css`\n        font-size: ${theme.fontSize.h4};\n        font-weight: ${theme.fontWeight.l};\n        line-height: 1.5em;\n    `, \n    h5: css`\n        font-size: ${theme.fontSize.bodySmall};\n        font-weight: ${theme.fontWeight.s};\n        line-height: 1.5em;\n    `,\n    p: css`\n        font-size: ${theme.fontSize.bodyLarge};\n        font-weight: ${theme.fontWeight.l};\n        line-height: 1.5em;\n    `,\n    span: css`\n        font-size: ${theme.fontSize.body};\n        font-weight: ${theme.fontWeight.m};\n        line-height: 1.5em;\n    `\n}\n\nexport const H2 = styled.h2`\n    ${fontTheme.h2}\n    color: ${theme.color.black};\n`\n\nexport const H3 = styled.h3`\n    ${fontTheme.h3}\n    color: ${theme.color.black};\n`\n\nexport const H4 = styled.h4`\n    ${fontTheme.h4}\n    color: ${theme.color.black};\n`\n\nexport const P = styled.p`\n    ${fontTheme.p}\n    color: ${theme.color.black};\n`\n\nexport const Span = styled.span`\n    ${fontTheme.span}\n    color: ${theme.color.black};\n`\n\nexport const H5 = styled.h5`\n    ${fontTheme.h5}\n    color: ${theme.color.black};\n`\n\n\nexport const Btn = styled.button`\n    & svg {\n        font-size: ${theme.fontSize.svg};\n        color: ${theme.color.lightGrey};\n        transition: .2s;\n    }\n    &:hover svg {\n        cursor: pointer;\n        color: ${theme.color.grey};\n    }\n`\n\nexport const TextBtn = styled.button`\n    padding: 5px 15px;\n    border-radius: .25em;\n    transition: .2s;\n    \n    ${fontTheme.span}\n    font-weight: ${props => props.theme.fontWeight.l};\n    \n    border: 1px solid ${props => props.$active ? props.theme.color.black : props.theme.color.lightGrey};\n    background-color: ${props => (props.$white && props.$active) ? props.theme.color.white : props.$white ? props.theme.color.light_primary : props.$active ? props.theme.color.black : props.theme.color.lightGrey};\n    color: ${props => !props.$white ? props.theme.color.white : props.$active ? props.theme.color.black : props.theme.color.grey};\n    &:hover {\n        border-color: ${props => props.$white && props.$active ? props.theme.color.black : props.theme.color.lightGrey};\n        background-color: ${props => !props.$white ? props.theme.color.lightGrey : props.$active ? props.theme.color.black : props.theme.color.light_primary};\n        color: ${props => (props.$white && !props.$active) ? props.theme.color.grey : props.theme.color.white};\n    }\n    cursor: ${props => props.$active ? 'pointer' : 'not-allowed'};\n`\n\nexport const PageWrapper = styled.div``\nexport const PageContainer = styled.div`\n    width: 90%;\n    ${MEDIA_QUERY.s} {\n        width: 100%;\n    }\n    margin: 0 auto;\n    display: flex;\n    align-items: flex-start;\n`\n","import { Link } from \"react-router-dom\";\nimport { H4, P, Span } from \"../constants/style\";\n\nexport const LinkItem = ({to, name, size}) => {\n  const handleUncheckNav = () => {\n    document.querySelector('#nav').checked = false;\n    document.querySelector('#cart').checked = false;\n  }\n  return (\n    <Link to={to} onClick={handleUncheckNav}>\n      {size === 'H4' && (\n        <H4>{name}</H4>\n      )}\n      {size === 'P' && (\n        <P>{name}</P>\n      )}\n      {size === 'Span' && (\n        <Span>{name}</Span>\n      )}\n    </Link>\n  )\n}\n","import styled from \"styled-components\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\n\nimport { LinkedUL, MEDIA_QUERY, Btn } from \"../../constants/style\"\n\nimport { LinkItem } from \"../LinkItem\"\n\n\nconst MobileMenuNav = styled.nav`\n  display: none;\n  ${MEDIA_QUERY.main} {\n    display: block;\n  }\n`\n\nconst MobileMenu = styled(LinkedUL)`\n\n  position: fixed;\n  left: 0;\n  top: 0;\n  z-index: 20;\n  width: 75%;\n  max-width: 360px;\n  height: 100vh;\n  padding: 0 10px;\n  background-color: #fff;\n  box-shadow: 1px 0px 5px #aaa;\n  overflow-y: auto;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  & li {\n    & a {\n      position: relative;\n      width: 100%;\n      & h4, p {\n        position: absolute;\n        left: 5%;\n        top: 50%;\n        transform: translateY(-50%);\n      }\n    }\n  }\n\n  & > div {\n    & > li {\n      & > a {\n        height: 60px;\n        & > h4 {\n          line-height: 2em;\n        }\n      }\n      & > ul {\n        margin-left: 30px;\n        display: none;\n        & > li {\n          & > a {\n            height: 50px;\n          }\n          & > ul {\n            display: none; \n            margin-left: 30px;\n            & > li {\n              & > a {\n                height: 40px;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n`\n\nconst ToggleBtn = styled(Btn)`\n  width: 60px;\n  height: 60px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  right: 0;\n  z-index: 21;\n  & svg {\n    font-size: ${props => props.theme.fontSize.h4};\n  }\n`\n\n\nconst ToggleInput = styled.input`\n  position: absolute;\n  right: 0;\n  opacity: 0;\n  z-index: -1;\n  &:checked ~ ul {\n    display: block;\n  }\n  &:checked + button {\n    & svg {\n      color: ${props => props.theme.color.grey};\n      transform: rotate(0.5turn);\n    }\n  }\n`\n\nconst CheckBox = ({id}) => {\n  return (\n    <>\n      <ToggleInput id={id} type=\"checkbox\"/>\n      <ToggleBtn>\n        <label htmlFor={id}>\n            <FontAwesomeIcon icon={faChevronDown}/>\n        </label>\n      </ToggleBtn>\n    </>\n  )\n}\n\nexport default function MobileNav() {\n  return (\n    <MobileMenuNav>\n      <MobileMenu>\n        <div>\n          <li><LinkItem to=\"#\" name=\"新品上市\" size=\"H4\" /></li>\n          <li>\n            <CheckBox id=\"collection\"/>\n            <LinkItem to=\"/collection\" name=\"商品一覽\" size=\"H4\" />\n            <ul>\n              <li>\n                <CheckBox id=\"collection-men\" />\n                <LinkItem to=\"/collection/men\" name=\"男裝\" size=\"H4\" />\n                <ul>\n                  <li><LinkItem to=\"/collection/men/tops\" name=\"上衣類\" size=\"P\" /></li>\n                  <li><LinkItem to=\"/collection/men/shirts\" name=\"襯衫類\" size=\"P\" /></li>\n                  <li><LinkItem to=\"/collection/men/knit\" name=\"針織衫 / 毛衣\" size=\"P\" /></li>\n                  <li><LinkItem to=\"/collection/men/bottoms\" name=\"褲裝類\" size=\"P\" /></li>\n                  <li><LinkItem to=\"/collection/men/outer\" name=\"外套類\" size=\"P\" /></li>\n                  <li><LinkItem to=\"/collection/men/general\" name=\"配件類\" size=\"P\" /></li>\n                </ul>\n              </li>\n              <li>\n                <CheckBox id=\"collection-women\" />\n                <LinkItem to=\"/collection/women\" name=\"女裝\" size=\"H4\" />\n                <ul>\n                  <li><LinkItem to=\"/collection/women/tops\" name=\"上衣 / 襯衫\" size=\"P\" /></li>\n                  <li><LinkItem to=\"/collection/women/knit\" name=\"針織衫 / 毛衣\" size=\"P\" /></li>\n                  <li><LinkItem to=\"/collection/women/bottoms\" name=\"褲裝類\" size=\"P\" /></li>\n                  <li><LinkItem to=\"/collection/women/skirts\" name=\"裙子類\" size=\"P\" /></li>\n                  <li><LinkItem to=\"/collection/women/one_piece\" name=\"洋裝類\" size=\"P\" /></li>\n                  <li><LinkItem to=\"/collection/women/outer\" name=\"外套類\" size=\"P\" /></li>\n                  <li><LinkItem to=\"/collection/women/general\" name=\"配件類\" size=\"P\" /></li>\n                </ul>\n              </li>\n            </ul>\n          </li>\n          <li>\n            <CheckBox id=\"on-sale\" />\n            <LinkItem to=\"#\" name=\"特價專區\" size=\"H4\" />\n            <ul>\n              <li><LinkItem to=\"#\" name=\"秋冬女裝新品_7折起\" size=\"H4\" /></li>\n              <li><LinkItem to=\"#\" name=\"秋冬男裝新品_7折起\" size=\"H4\" /></li>\n              <li><LinkItem to=\"#\" name=\"春夏商品出清_3折起\" size=\"H4\" /></li>\n            </ul>\n          </li>\n          <li><LinkItem to=\"#\" name=\"關於我們\" size=\"H4\" /></li>\n        </div>\n        <div>\n          <li><LinkItem to=\"#\" name=\"登入\" size=\"H4\" /></li>\n          <li><LinkItem to=\"#\" name=\"願望清單\" size=\"H4\" /></li>\n        </div>\n      </MobileMenu>\n    </MobileMenuNav>\n  );\n}","import styled from \"styled-components\"\n\nimport { LinkedUL, MEDIA_QUERY } from \"../../constants/style\"\n\nimport { LinkItem } from \"../LinkItem\"\n\nconst MenuNav = styled.nav`\n  ${MEDIA_QUERY.main} {\n    display: none;\n  }\n`\n\nconst Menu = styled(LinkedUL)`\n  margin: 0 20px;\n  display: flex;\n\n  & > li {\n    margin: 0 5px;\n    padding: 16px 0;\n    position: relative;\n    & h4 {\n      padding: 0 10px;\n      line-height: 2em;\n    }\n    & > div {\n      display: none;\n      position: absolute;\n    }\n    &:hover > div {\n      display: flex;\n    }\n  }\n`\n\nconst SubMenu = styled.div`\n  top: 71px;\n  box-shadow: 1px 1px 5px #aaa;\n  background-color: #fff;\n  & > div {\n    margin: 20px 30px;\n    & > a {\n      padding-bottom: 10px;\n      border-bottom: 1px solid #ddd;\n      display: flex;\n      & h4 {\n        font-weight: ${props => props.theme.fontWeight.xl};\n        padding: 5px 5px;\n      }\n    }\n    & ul {\n      & > li {\n        & p {\n          padding: 5px 5px;\n        }\n      }\n    }\n  }\n`\n\nconst SubMenuListFlex = styled.div`\n  width: 240px;\n  & ul {\n    height: 150px;\n    padding: 10px 0;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    flex-wrap: wrap;\n  }\n`\n\nconst SubMenuListBlock = styled.div`\n  width: 180px;\n  & ul {\n    text-align: center;\n    & li {\n      display: inline-block;\n    }\n  }\n`\n\nexport default function Nav() {\n  return (\n    <MenuNav>\n      <Menu>\n        <li><LinkItem to=\"#\" name=\"新品上市\" size=\"H4\" /></li>\n        <li>\n          <LinkItem to=\"/collection\" name=\"商品一覽\" size=\"H4\" />\n          <SubMenu>\n            <SubMenuListFlex>\n              <LinkItem to=\"/collection/men\" name=\"男裝\" size=\"H4\" />\n              <ul>\n                <li><LinkItem to=\"/collection/men/tops\" name=\"上衣類\" size=\"P\" /></li>\n                <li><LinkItem to=\"/collection/men/shirts\" name=\"襯衫類\" size=\"P\" /></li>\n                <li><LinkItem to=\"/collection/men/knit\" name=\"針織衫 / 毛衣\" size=\"P\" /></li>\n                <li><LinkItem to=\"/collection/men/bottoms\" name=\"褲裝類\" size=\"P\" /></li>\n                <li><LinkItem to=\"/collection/men/outer\" name=\"外套類\" size=\"P\" /></li>\n                <li><LinkItem to=\"/collection/men/general\" name=\"配件類\" size=\"P\" /></li>\n              </ul>\n            </SubMenuListFlex>\n            <SubMenuListFlex>\n              <LinkItem to=\"/collection/women\" name=\"女裝\" size=\"H4\" />\n              <ul>\n                <li><LinkItem to=\"/collection/women/tops\" name=\"上衣 / 襯衫\" size=\"P\" /></li>\n                <li><LinkItem to=\"/collection/women/knit\" name=\"針織衫 / 毛衣\" size=\"P\" /></li>\n                <li><LinkItem to=\"/collection/women/bottoms\" name=\"褲裝類\" size=\"P\" /></li>\n                <li><LinkItem to=\"/collection/women/skirts\" name=\"裙子類\" size=\"P\" /></li>\n                <li><LinkItem to=\"/collection/women/one_piece\" name=\"洋裝類\" size=\"P\" /></li>\n                <li><LinkItem to=\"/collection/women/outer\" name=\"外套類\" size=\"P\" /></li>\n                <li><LinkItem to=\"/collection/women/general\" name=\"配件類\" size=\"P\" /></li>\n              </ul>\n            </SubMenuListFlex>\n          </SubMenu>\n        </li>\n        <li>\n          <LinkItem to=\"#\" name=\"特價專區\" size=\"H4\" />\n          <SubMenu>\n            <SubMenuListBlock>\n              <ul>\n                <li><LinkItem to=\"#\" name=\"秋冬女裝新品_7折起\" size=\"P\" /></li>\n                <li><LinkItem to=\"#\" name=\"秋冬男裝新品_7折起\" size=\"P\" /></li>\n                <li><LinkItem to=\"#\" name=\"春夏商品出清_3折起\" size=\"P\" /></li>\n              </ul>\n            </SubMenuListBlock>\n          </SubMenu>\n        </li>\n        <li><LinkItem to=\"#\" name=\"關於我們\" size=\"H4\" /></li>\n      </Menu>\n    </MenuNav>\n  );\n}","import { useState } from \"react\"\nimport styled, { keyframes } from \"styled-components\";\n\nconst spin_loader = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n`\n\nexport const Loader = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  margin: auto;\n  border: 4px solid #f3f3f3;\n  border-top: 4px solid #aaa;\n  border-radius: 50%;\n  width: 10%;\n  height: 10%;\n  animation: ${spin_loader} 1s linear infinite;\n`\n\nexport const Img = ({image}) => {\n\n    const [isLoading, setIsLoading] = useState(true)\n  \n    const handleImgLoad = () => {\n        setIsLoading(false)\n    }\n  \n    return (\n        <>\n            {isLoading && (\n                <Loader />\n            )}\n            <img src={image.src} alt={image.alt} onLoad={handleImgLoad}/>\n        </>\n    )\n}\n","const baseURL = 'https://erika-backend.herokuapp.com/api/v1'\n\nconst getProductsAPI = (pathname, search) => {\n\n    const Arr = [];\n    search = new URLSearchParams(search);\n    const gender = pathname[0]\n    const category = pathname[1]\n    const genderObj = {\n        men: 'M',\n        women: 'F',\n    }\n    const categoryObj = {\n        tops: 101,\n        shirts: 102,\n        knit: 104,\n        one_piece: 105,\n        outer: 106,\n        bottoms: 201,\n        skirts: 301,\n        general: 401\n    }\n    const orderArr = ['price_desc', 'price_asc', 'sold_desc', 'sold_asc']\n\n    if(gender){\n        Arr.push(['gender', genderObj[gender]])\n    }\n    if(category){\n        Arr.push(['category', categoryObj[category]])\n    }\n\n    if(search.has('size')){\n        const sizes = search.get('size').split(' ').map(size => (\n            ['_size[]', size]\n        ))\n        Arr.push(...sizes)\n    }\n\n    if(search.has('color')){\n        const colors = search.get('color').split(' ').map(size => (\n            ['_color[]', size]\n        ))\n        Arr.push(...colors)\n    }\n\n    if(search.has('price')){\n        const prices = search.get('price').split('-')\n        Arr.push(['_min', prices[0]], ['_max', prices[1]])\n    }\n\n    if(search.has('order')){\n        const order = search.get('order')\n        Arr.push(['_order', orderArr.indexOf(order)+1])\n    }\n\n    if(search.has('page')){\n        const page = search.get('page')\n        Arr.push(['_page', page])\n    }\n\n    if(search.has('is_on')){\n        const is_on = search.get('is_on')\n        Arr.push(['_is_on', is_on])\n    }\n\n    if(search.has('is_sale')){\n        const is_sale = search.get('is_sale')\n        Arr.push(['_is_sale', is_sale])\n    }\n\n    const query = new URLSearchParams(Arr);\n\n    return fetch(`${baseURL}/products?${query}`)\n    .then(res => {\n        console.log(`${query}`)\n        let msg = null;\n        if (res.status === 400) {\n            msg = \"目前暫無商品\";\n        } else if (res.status === 200){\n            msg = \"取得商品成功\";\n        } else {\n            throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })\n}\n\nconst getProductAPI = id => {\n    return fetch(baseURL + `/products/${id}`)\n    .then(res => {\n        let msg = null;\n        if (res.status === 400) {\n            msg = \"目前暫無商品\";\n        } else if (res.status === 200){\n            msg = \"取得商品成功\";\n        } else {\n            throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })\n}\n\nconst getTrendingProductsAPI = () => {\n    return fetch(baseURL + `/product/trending`)\n    .then(res => {\n        let msg = null;\n        if (res.status === 400) {\n            msg = \"目前暫無商品\";\n        } else if (res.status === 200){\n            msg = \"取得商品成功\";\n        } else {\n            throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })\n}\n\nconst addProductAPI = product => {\n    return fetch(`${baseURL}/products`, {\n        method: 'POST',\n        headers: {\n            'content-type': 'application/json'\n        },\n        body: JSON.stringify(product)\n    })\n    .then(res => {\n        let msg = null;\n        if (res.status === 400) {\n            msg = \"商品名稱重複\";\n        } else if (res.status === 200){\n            msg = \"新增商品成功\";\n        } else {\n            throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })\n}\n\nconst updateProductAPI = (id, product) => {\n    return fetch(`${baseURL}/products/${id}`, {\n        method: 'PATCH',\n        headers: {\n            'content-type': 'application/json'\n        },\n        body: JSON.stringify(product)\n    })\n    .then(res => {\n        let msg = null;\n        switch (res.status) {\n            case 200: {\n                msg = \"更新商品成功\";\n                break\n            }\n            case 403: {\n                msg = \"商品名稱重複\";\n                break\n            }\n            case 404: {\n                msg = \"無此id對應的商品\";\n                break\n            }\n            default: throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })\n}\n\nconst updatePatternAPI = (id, pattern) => {\n    return fetch(`${baseURL}/product/patterns/${id}`, {\n        method: 'PATCH',\n        headers: {\n            'content-type': 'application/json'\n        },\n        body: JSON.stringify(pattern)\n    })\n    .then(res => {\n        let msg = null;\n        switch (res.status) {\n            case 200: {\n                msg = \"更新存貨數量成功\";\n                break\n            }\n            case 403: {\n                msg = \"存貨數量不可為負\";\n                break\n            }\n            case 404: {\n                msg = \"無此id對應的存貨\";\n                break\n            }\n            default: throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })    \n}\n\nconst deleteProductAPI = id => {\n    return fetch(`${baseURL}/products/${id}`, {\n        method: 'DELETE',\n        headers: {\n            'content-type': 'application/json'\n        }\n    })\n    .then(res => {\n        let msg = null;\n        switch (res.status) {\n            case 200: {\n                msg = \"刪除商品成功\";\n                break\n            }\n            case 404: {\n                msg = \"無此id對應的商品\";\n                break\n            }\n            default: throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })    \n}\n\nconst getFeedImages = () => {\n    return fetch('https://api.unsplash.com/topics/fashion', {\n        method: 'GET',\n        headers: {\n            'Accept-Version': 'v1',\n            'Authorization': 'Client-ID CtXu1O6qrBiFAMp1FcW2cy7KFvKKej8TGHZHPnV8DPo',\n        },\n    })\n    .then(res => res.json())\n    .then(data => {\n        const query = new URLSearchParams({\n            topics: data.id,\n            orientation: 'squarish',\n            count: 6,\n        }).toString()\n        return fetch('https://api.unsplash.com/photos/random?' + query, {\n            method: 'GET',\n            headers: {\n                'Accept-Version': 'v1',\n                'Authorization': 'Client-ID CtXu1O6qrBiFAMp1FcW2cy7KFvKKej8TGHZHPnV8DPo',\n            },\n        })\n        .then(res => res.json())\n    })\n}\n\nconst searchProductAPI = arr => {\n\n    const query = new URLSearchParams(arr);\n\n    return fetch(baseURL + `/product/search?${query}`)\n    .then(res => {\n        let msg = null;\n        if (res.status === 400) {\n            msg = \"目前暫無商品\";\n        } else if (res.status === 200){\n            msg = \"搜尋商品成功\";\n        } else {\n            throw new Error(`${res.status} (${res.statusText})`)\n        }\n        console.log(`${res.status} (${msg})`)\n        return res.json().then(data => (\n            {ok: res.ok, message: msg, data: data}\n        ))\n    })\n    .catch(e => {\n        console.log(e.message)\n        return {ok: 0, message: e.message}\n    })\n}\n\nexport { getFeedImages, getProductsAPI, getProductAPI, addProductAPI, updateProductAPI, updatePatternAPI, deleteProductAPI, getTrendingProductsAPI, searchProductAPI };","import { createSlice } from '@reduxjs/toolkit'\nimport { getProductsAPI, getProductAPI } from '../../webAPI/productAPI';\n\nconst initialState = {\n  unfilteredProducts: null,\n  products: null,\n  product: null,\n  error: null,\n  spec: {size: '', color: '', qty: ''},\n}\n\nexport const productSlice = createSlice({\n  name: 'product',\n  initialState,\n  reducers: {\n    setUnfilteredProducts: (state, action) => {\n      state.unfilteredProducts = action.payload;\n    },\n    setProducts: (state, action) => {\n      state.products = action.payload;\n    },\n    setProduct: (state, action) => {\n      state.product = action.payload;\n    },\n    setError: (state, action) => {\n      state.error = action.payload;\n    },\n    setSize: (state, action) => {\n      state.spec.size = action.payload;\n    },\n    setColor: (state, action) => {\n      state.spec.color = action.payload;\n    },\n    setQty: (state, action) => {\n      state.spec.qty = action.payload;\n    },\n  },\n})\n\nexport const { \n  setUnfilteredProducts,\n  setProducts,\n  setProduct,\n  setError,\n  setSize,\n  setColor,\n  setQty,\n} = productSlice.actions\n\nexport const getUnfilteredProducts = pathname => dispatch => {\n  getProductsAPI(pathname, '')\n    .then(result => {\n      if(!result.ok) {\n        dispatch(setUnfilteredProducts(''))\n      }\n      dispatch(setUnfilteredProducts(result.data))\n    })\n}\n\nexport const getProducts = (pathname, search) => dispatch => {\n  getProductsAPI(pathname, search)\n    .then(result => {\n      if(!result.ok) {\n        dispatch(setProducts(''))\n        return dispatch(setError(result.message))\n      }\n      dispatch(setProducts(result.data))\n      dispatch(setError(null))\n    })\n}\n\nexport const getProduct = id => dispatch => {\n  getProductAPI(id)\n    .then(result => {\n      if(!result.ok) {\n        dispatch(setProduct(''))\n        return dispatch(setError(result.message))\n      }\n      dispatch(setProduct(result.data))\n      dispatch(setError(null))\n    })\n}\n\nexport default productSlice.reducer","import { createSlice } from '@reduxjs/toolkit'\nimport { getProductAPI } from '../../webAPI/productAPI';\nimport { setError } from '../product/productSlice';\n\nconst initialState = {\n  cart: null, \n  errorMessage: '',\n}\n\nexport const cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    setCart: (state, action) => {\n      state.cart = action.payload;\n    },\n    setCartQty: (state, action) => {\n      state.cart.find(item => \n        item.pattern_id === action.payload.pattern_id\n      ).qty = action.payload.qty\n    },\n    deleteCart: (state, action) => {\n      state.cart = state.cart.filter((item, index) => index !== action.payload)\n    },\n    addCart: (state, action) => {\n      state.cart.push(action.payload);\n    },\n    setErrorMessage: (state, action) => {\n      state.errorMessage = action.payload;\n    },\n  },\n})\n\nexport const { \n  setCart,\n  setCartQty,\n  addCart,\n  deleteCart,\n  setErrorMessage\n} = cartSlice.actions\n\n\nexport const getCartStorage = () => dispatch => {\n  const cartItem = JSON.parse(localStorage.getItem('cart')) || [];\n  dispatch(setCartStorage(cartItem))\n}\n\nconst getProductInfo = item => dispatch => {\n  return getProductAPI(item.id)\n    .then(result => {\n      if(!result.ok) {\n        dispatch(setError(result.message))\n        throw new Error(result.message)\n      }\n      return result.data\n    })\n    .then(product => {\n      item.name = product.product.name;\n      const itemPattern = product.patterns.find(pattern => (pattern.id === item.pattern_id))\n      const group = product.product.Category.group.slice(0, -1)\n      item.size = itemPattern[group].size;\n      item.color = itemPattern.Color.name;\n      item.total = itemPattern.total;\n      item.price_standard = product.product.price_standard;\n      item.price_sale = product.product.price_sale;\n      item.is_sale = product.product.is_sale;\n      const mainImg = product.product.Images.find(img => img.is_main)\n      item.src = mainImg.src;\n      item.alt = mainImg.alt;\n    })\n    .catch(e => console.log(e.message))\n}\n\nexport const setCartStorage = items => dispatch => {\n  Promise.all(\n    items.map(async item => {\n        await dispatch(getProductInfo(item))\n        return item\n    })\n  ).then(items => {\n    console.log(items)\n    dispatch(setCart(items))\n  })\n}\n\nexport const addCartStorage = item => dispatch => {\n  dispatch(getProductInfo(item))\n    .then(() => dispatch(addCart(item)))\n}\n\nexport default cartSlice.reducer","import { useDispatch } from \"react-redux\";\nimport { deleteCart, setCartQty } from \"../features/cart/cartSlice\";\n\nexport default function useCart (item) {\n\n    const dispatch = useDispatch()\n\n    const handleDeleteCart = index => () => {\n        dispatch(deleteCart(index))\n        let cartLocal = JSON.parse(localStorage.getItem('cart')) || [];\n        cartLocal = cartLocal.filter((item, i) => i !== index)\n        localStorage.setItem('cart', JSON.stringify(cartLocal))\n    }\n\n    const handleQtyChange = e => {\n        if(!e.target.value) return\n        dispatch(setCartQty({pattern_id: item.pattern_id, qty: parseInt(e.target.value)}))\n        let cartLocal = JSON.parse(localStorage.getItem('cart')) || [];\n        cartLocal = cartLocal.map(i => {\n            if(i.pattern_id === item.pattern_id){\n                i.qty = parseInt(e.target.value)\n            }\n            return i\n        })\n        localStorage.setItem('cart', JSON.stringify(cartLocal))\n    }\n\n    const handleBtnClick = (direction) => {\n        let cartLocal = JSON.parse(localStorage.getItem('cart')) || [];\n        if(direction === 'inc') {\n            dispatch(setCartQty({pattern_id: item.pattern_id, qty: item.qty+1}))\n            cartLocal = cartLocal.map(i => {\n                if(i.pattern_id === item.pattern_id){\n                    i.qty += 1\n                }\n                return i\n            })\n        }\n        if(direction === 'dec') {\n            if(item.qty<=1) return \n            dispatch(setCartQty({pattern_id: item.pattern_id, qty: item.qty-1}))\n            cartLocal = cartLocal.map(i => {\n                if(i.pattern_id === item.pattern_id){\n                    i.qty -= 1\n                }\n                return i\n            })\n        }\n        localStorage.setItem('cart', JSON.stringify(cartLocal))\n    }\n\n    const getTotal = cart => {\n        if(cart.length === 0) return\n        return cart.map(item => \n            (item.is_sale ? item.price_sale : item.price_standard) * item.qty\n        ).reduce((acc, cur) => acc + cur)\n    }\n\n    const hasError = errorMessage => {\n        if(!errorMessage.length) return false\n        return errorMessage.some(err => err)\n    }\n\n    return {\n        handleDeleteCart,\n        handleQtyChange,\n        handleBtnClick,\n        getTotal,\n        hasError\n    }\n}","import styled from \"styled-components\"\n\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faShoppingCart, faTrashAlt } from '@fortawesome/free-solid-svg-icons'\n\nimport { Span, H4, Btn, fontTheme, TextBtn } from \"../../constants/style\"\n\nimport { Img } from \"../Img\";\nimport { Link } from \"react-router-dom\";\nimport { setCartStorage } from \"../../features/cart/cartSlice\";\nimport useCart from \"../../hooks/useCart\";\n\n\nconst MenuBtn = styled.div`\n  position: relative;\n  & > input {\n    display: none;\n    &:checked {\n        & ~ div {\n            display: flex;\n        }\n        & + label {\n            display: block;\n        }\n    }\n  }\n  & > button {\n    &:hover span {\n      cursor: pointer;\n    }\n    & span {\n      position: absolute;\n      width: 15px;\n      line-height: 15px;\n      vertical-align: middle;\n      top: -5px;\n      right: -5px;\n      font-size: ${props => props.theme.fontSize.bodySmall};\n      background-color: ${props => props.theme.color.black};\n      color: ${props => props.theme.color.white};\n      border-radius: 50%;\n    }\n  }\n`\n\nconst CartContainer = styled.div`\n  position: absolute;\n  top: calc(35px + calc(28.5px/2));\n  right: 0;\n  width: 50vw;\n  max-width: 300px;\n  background-color: #fff;\n  border: 1px solid #aaa;\n  display: none;\n  flex-direction: column;\n  align-items: center;\n  & > ul {\n    max-height: 240px;\n    overflow: auto;\n  }\n  & > h4 {\n    padding: 20px;\n  }\n  & > a {\n    margin: 10px;\n  }\n`\n\nconst CartCard = styled.li`\n  display: flex;\n  align-items: flex-start;\n  text-align: left;\n  & > button {\n    padding: 5px;\n    & svg {\n      font-size: ${props => props.theme.fontSize.body};\n      color: ${props => props.theme.color.black};\n    }\n  }\n`\n\nconst CartImage = styled.div`\n  margin: 5px;\n  width: 30%;\n  position: relative;\n  & img {\n    width: 100%;\n  }\n`\nconst CartInfo = styled.div`\n  padding: 5px;\n  width: 70%;\n  ${fontTheme.span}\n  font-weight: ${props => props.theme.fontWeight.l};\n  & p {\n    font-size: ${props => props.theme.fontSize.bodySmall};\n    font-weight: ${props => props.theme.fontWeight.m};\n  }\n  & > span {\n    color: ${props => props.theme.color.alert};\n    font-weight: ${props => props.theme.fontWeight.l};\n    & > span {\n      text-decoration: line-through;\n      color: ${props => props.theme.color.grey};\n      margin-right: 3px;\n    }\n  }\n`\n\nconst ToCartBtn = styled(TextBtn)`\n`\n\nconst Cover = styled.label`\n  z-index: 0;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  opacity: 0;\n  display: none;\n  // background-color: #aaaa;\n`\n\nexport const Cart = () => {\n\n    const dispatch = useDispatch()\n    const cart = useSelector(state => state.cart.cart)\n    const error = useSelector(state => state.product.error)\n  \n    useEffect(() => {\n      const cartItem = JSON.parse(localStorage.getItem('cart')) || [];\n      dispatch(setCartStorage(cartItem))\n    }, [dispatch])\n  \n    const {\n      handleDeleteCart\n    } = useCart()\n\n    const handleCloseHeaderCart = () => {\n      document.querySelector('#cart').checked = false;\n    }\n  \n    return (\n      <MenuBtn>\n        <Btn>\n          <label htmlFor=\"cart\">\n            <FontAwesomeIcon icon={faShoppingCart} />\n            {cart && cart.length > 0 && (\n              <Span>{cart.reduce(((acc, cur) => acc + cur.qty), 0)}</Span>\n            )}\n          </label>\n        </Btn>\n        <input type=\"checkbox\" id=\"cart\"/>\n        <Cover htmlFor=\"cart\" />\n        <CartContainer>\n          {(!cart || !cart.every(item => item.name)) && (\n            error ? (\n              <H4>{error}</H4>\n            ) : (\n              <H4>商品載入中...</H4>\n            )\n          )}\n          {cart && cart.every(item => item.name) && !error && (\n            <>\n              {cart.length > 0 ? (\n                <ul>\n                  {cart.map((item, i) => {\n                    const url = `/product/${item.id}`\n                    return (\n                      <CartCard key={item.pattern_id}>\n                        <CartImage>\n                          <Link to={url}>\n                            <Img image={{src: item.src, alt: item.alt}} />\n                          </Link>\n                        </CartImage>\n                        <CartInfo>\n                          {item.qty} x {item.name}\n                          <p>尺寸: {item.size}, 顏色: {item.color}</p>\n                          {item.is_sale ? (\n                            <Span>\n                              <Span>${item.price_standard}</Span>\n                              ${item.price_sale}\n                            </Span>\n                            ) : (\n                            <>${item.price_standard}</>\n                          )}\n                        </CartInfo>\n                        <button onClick={handleDeleteCart(i)}>\n                          <FontAwesomeIcon icon={faTrashAlt}/>\n                        </button>\n                      </CartCard>\n                    )\n                  })}\n                </ul>\n              ) : (\n                <H4>購物車內目前沒有商品</H4>\n              )}\n              <Link to=\"/cart\" onClick={handleCloseHeaderCart}>\n                  <ToCartBtn $active={cart.length > 0}>\n                      前往結帳\n                  </ToCartBtn>\n              </Link>\n            </>\n          )}\n        </CartContainer>\n      </MenuBtn>\n    )\n  }","export default __webpack_public_path__ + \"static/media/logo.2f43df1d.png\";","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\"\nimport logo from '../assets/logo.png'\nimport { MEDIA_QUERY } from \"../constants/style\"\n\nconst LogoContainer = styled.h1`\n  display: block;\n  height: 70px;\n  text-align: center;\n  ${MEDIA_QUERY.xs} {\n    display: none;\n  }\n`\n\nexport const Logo = () => {\n    return (\n      <LogoContainer>\n        <Link to=\"/\">\n          <img src={logo} height=\"70px\" alt=\"logo\"/>\n        </Link>\n      </LogoContainer>\n    )\n}","import styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBars, faUser, faHeart } from '@fortawesome/free-solid-svg-icons';\n\nimport { Btn, fontTheme, TextBtn } from \"../../constants/style\";\nimport { MEDIA_QUERY } from \"../../constants/style\";\n\nimport MobileNav from './MobileNav';\nimport Nav from './Nav';\nimport { Cart } from \"./Cart\";\nimport { Logo } from '../Logo';\n\nconst HeaderWrapper = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  background-color: ${props => props.theme.color.white};\n  box-shadow: 1px 0px 5px #aaa;\n`\n\nconst HeaderContainer = styled.div`\n  height: 70px;\n  width: 90%;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  & > h1 {\n    display: none;\n    position: absolute;\n    left: 50%;\n    transform: translateX(-50%);\n    ${MEDIA_QUERY.main} {\n      display: block;\n    }\n    ${MEDIA_QUERY.xs} {\n      display: none;\n    }\n  }\n`\n\nconst HeaderLeft = styled.div`\n  display: flex;\n  align-items: center;\n  ${MEDIA_QUERY.main} {\n    & > h1 {\n      display: none;\n    }\n  }\n`\n\nconst HeaderRight = styled.div`\n  display: flex;\n  align-items: center;\n  & > a {\n    margin-right: 30px;\n    ${MEDIA_QUERY.main} {\n      display: none;\n    }\n  }\n`\n\nconst BurgerBtn = styled(Btn)`\n  display: none;\n  ${MEDIA_QUERY.main} {\n    display: block;\n  }\n`\n\nconst BurgerInput = styled.input`\n  ${MEDIA_QUERY.main} {\n    display: block;\n  }\n  position: absolute;\n  left: 0;\n  display: none;\n  opacity: 0;\n  z-index: -1;\n  & ~ nav {\n    & > ul {\n      left: -380px;\n      transition: .25s;\n    }\n  }\n  :checked ~ nav {\n    & > ul {\n      left: 0;\n    }\n  }\n  :checked + button {\n    & label::after {\n      display: none;\n      content: '';\n      width: 100%;\n      height: 100vh;\n      position: fixed;\n      left: 0;\n      top: 0;\n      z-index: 11;\n      background: rgba(0,0,0,0.7);\n      ${MEDIA_QUERY.main} {\n        display: block;\n      }\n    }\n  }\n`\n\nconst MenuBtnGroup = styled.div`\n  display: flex;\n  & > div {\n    ${MEDIA_QUERY.main} {\n      &:nth-child(-n+2){\n        display: none;\n      }\n    }\n    & + div {\n      margin-left: 30px;\n    }\n  }\n`\n\nconst ToAdminBtn = styled(TextBtn)`\n`\n\n\nexport default function Header() {\n  const style = {\n    height: \"70px\",\n    position: \"relative\",\n    zIndex: \"10\"\n  }\n  return (\n    <header style={style}>\n      <HeaderWrapper>\n        <HeaderContainer>\n          <HeaderLeft>\n            <BurgerInput id=\"nav\" type=\"checkbox\"/>\n            <BurgerBtn>\n              <label htmlFor=\"nav\">\n                  <FontAwesomeIcon icon={faBars}/>\n              </label>\n            </BurgerBtn>\n            <MobileNav/>\n            <Logo/>\n            <Nav/>\n          </HeaderLeft>\n          <Logo/>\n          <HeaderRight>\n            <Link to=\"/admin/product\">\n              <ToAdminBtn $white $active>\n                管理後台\n              </ToAdminBtn>\n            </Link>\n            <MenuBtnGroup>\n              <div>\n                <Btn>\n                  <Link to=\"#\"><FontAwesomeIcon icon={faUser}/></Link>\n                </Btn>\n              </div>\n              <div>\n                <Btn>\n                  <Link to=\"#\"><FontAwesomeIcon icon={faHeart}/></Link>\n                </Btn>\n              </div>\n              <Cart />\n            </MenuBtnGroup>\n          </HeaderRight>\n        </HeaderContainer>\n      </HeaderWrapper>\n    </header>\n  );\n}","import Header from './Header'\nexport default Header","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n\nimport { MEDIA_QUERY, Btn, LinkedUL, H5 } from \"../../constants/style\"\n\nimport { Logo } from '../Logo'\nimport { LinkItem } from '../LinkItem'\n\n\n\nconst FooterWrapper = styled.div`\n  background-color: #eee5;\n`\n\nconst FooterContainer = styled.div`\n  width: 90%;\n  margin: 0 auto;\n  padding: 20px 0;\n  display: flex;\n  flex-direction: row-reverse;\n  justify-content: space-between;\n  ${MEDIA_QUERY.s} {\n    display: block;\n  }\n`\n\nconst BottomWrapper = styled.div`\n  background-color: #222;\n`\n\nconst BottomContainer = styled.div`\n  width: 90%;\n  margin: 0 auto;\n  & h5 {\n    text-align: center;\n    color: ${props => props.theme.color.white};\n    padding: 10px 0;\n  }\n`\n\nconst FooterLeft = styled(LinkedUL)`\n  display: flex;\n  justify-content: center;\n  ${MEDIA_QUERY.xs} {\n    display: block;\n  }\n`\n\nconst FooterRight = styled.div``\n\nconst LinkBtn = styled(Btn)``\n\nconst LinkBtnGroup = styled.div`\n  padding: 10px 0;\n  display: flex;\n  justify-content: center;\n  & button + button {\n    margin-left: 20px;\n  }\n`\n\nconst LinkedList = styled.li`\n  & + li {\n    margin-left: 40px;\n  }\n  ${MEDIA_QUERY.xs} {\n    & + li {\n      margin: 0;\n    }\n  }\n\n  & > a {\n    padding: 10px 0;\n    border-bottom: 1px solid #ddd;\n    display: flex;\n    & > h4 {\n      font-weight: ${props => props.theme.fontWeight.xl};\n      padding: 5px 5px;\n    }\n  }\n  & > ul {\n    padding: 10px 0;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    flex-wrap: wrap;\n    & > li {\n      & p {\n        padding: 5px 5px;\n      }\n    }\n  }\n`\n\nexport default function Footer() {\n\n  return (\n    <footer>\n      <FooterWrapper>\n        <FooterContainer>\n          <FooterRight>\n            <Logo/>\n            <LinkBtnGroup>\n              <LinkBtn>\n                <Link to=\"#\"><FontAwesomeIcon icon={['fab', 'facebook']}/></Link>\n              </LinkBtn>\n              <LinkBtn>\n                <Link to=\"#\"><FontAwesomeIcon icon={['fab', 'instagram']}/></Link>\n              </LinkBtn>\n              <LinkBtn>\n                <Link to=\"#\"><FontAwesomeIcon icon={['fab', 'twitter']}/></Link>\n              </LinkBtn>\n            </LinkBtnGroup>\n          </FooterRight>\n          <FooterLeft>\n            <LinkedList>\n              <LinkItem to=\"#\" name=\"會員中心\" size=\"H4\" />\n              <ul>\n                <li><LinkItem to=\"#\" name=\"會員資料管理\" size=\"P\" /></li>\n                <li><LinkItem to=\"#\" name=\"歷史訂單\" size=\"P\" /></li>\n                <li><LinkItem to=\"#\" name=\"願望清單\" size=\"P\" /></li>\n              </ul>\n            </LinkedList>\n            <LinkedList>\n              <LinkItem to=\"#\" name=\"關於我們\" size=\"H4\" />\n              <ul>\n                <li><LinkItem to=\"#\" name=\"隱私權條款\" size=\"P\" /></li>\n                <li><LinkItem to=\"#\" name=\"免責聲明\" size=\"P\" /></li>\n                <li><LinkItem to=\"#\" name=\"退貨政策\" size=\"P\" /></li>\n                <li><LinkItem to=\"#\" name=\"FAQ\" size=\"P\" /></li>\n              </ul>\n            </LinkedList>\n          </FooterLeft>\n        </FooterContainer>\n      </FooterWrapper>\n      <BottomWrapper>\n        <BottomContainer>\n          <H5>Copyright © 2021 TPdidilong All Rights Reserved</H5>\n        </BottomContainer>\n      </BottomWrapper>\n    </footer>\n  );\n}","import Footer from './Footer'\nexport default Footer","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\nimport useCarousel from \"../../hooks/useCarousel\";\n\nconst BannerWrapper = styled.div`\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n`\n\nconst BannerContainer = styled.div`\n  display: flex;\n  & img {\n    width: 100vw;\n  }\n`\n\nconst Btn = styled.button`\n  height: 50px;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  margin: auto 0;\n  z-index: 1;\n  & svg {\n    padding: 5px 10px;\n    font-size: ${props => props.theme.fontSize.svgLarge};\n    color: ${props => props.theme.color.light_primary}4;\n    transition: .2s;\n    filter: drop-shadow(0px 0px 0.75rem ${props => props.theme.color.black});\n    &:hover {\n      color: ${props => props.theme.color.light_primary}6;\n    }\n    &:active ~ div {\n      transition: .25s;\n      transform: translateX(-400vw);\n    }\n  }\n`\n\nconst LeftBtn = styled(Btn)`\n  left: 2.5%;\n  & svg {\n    transform: rotate(90deg);\n  }\n`\n\nconst RightBtn = styled(Btn)`\n  right: 2.5%;\n  & svg {\n    transform: rotate(270deg);\n  }\n`\n\nconst Dot = styled.button`\n  width: 12px;\n  height: 12px;\n  background-color: ${props => props.theme.color.light_primary}6;\n  display: block;\n  border-radius: 50%;\n  position: relative;\n  transition: .25s;\n`\n\nconst DotContainer = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n  z-index: 1;\n  width: 50px;\n  & ul {\n    margin: 0 10px 10px;\n    display: flex;\n    justify-content: space-between;\n  }\n  & input {\n    display: none;\n    &:checked + button {\n      background-color: ${props => props.theme.color.light_primary}d;\n    }\n  }\n`\n\nconst ArrowContainer = styled.div``\n\nconst BannerImage = ({page, handleClick}) => {\n  const link = `#${page}`\n  const src = `https://picsum.photos/970/250?random=${page}`\n  const alt = `BannerImage${page}`\n  return (\n    <Link to={link} onClick={handleClick}>\n      <img src={src} alt={alt} />\n    </Link>\n  )\n}\n\nexport const Carousel = () => {\n\n  const {\n    banner,\n    currentPage,\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleMouseLeave,\n    handleMouseOver,\n    handleClick,\n    handleButtonClick,\n    handleRadioChange,\n    handleRadioClick\n  } = useCarousel();\n  \n  const bannerStyle = {\n    transform: \"translateX(-200vw)\",\n    transition: \"0s\"\n  }\n\n  return (\n    <BannerWrapper onMouseLeave={handleMouseLeave} onMouseOver={handleMouseOver}>\n      <DotContainer>\n        <ul>\n          <li>\n            <label>\n              <input \n                type=\"radio\" \n                name=\"banner\" \n                value=\"page1\" \n                checked={currentPage === \"page1\"} \n                onChange={handleRadioChange} \n              />\n              <Dot onClick={handleRadioClick(1)}/>\n            </label>\n          </li>\n          <li>\n            <label>\n              <input \n                type=\"radio\" \n                name=\"banner\" \n                value=\"page2\" \n                checked={currentPage === \"page2\"} \n                onChange={handleRadioChange} \n              />\n              <Dot onClick={handleRadioClick(2)}/>\n            </label>\n          </li>\n        </ul>\n      </DotContainer>\n      <ArrowContainer>\n        <LeftBtn onClick={handleButtonClick('backward')}>\n          <FontAwesomeIcon icon={faChevronDown}/>\n        </LeftBtn>\n        <RightBtn onClick={handleButtonClick('forward')}>\n          <FontAwesomeIcon icon={faChevronDown}/>\n        </RightBtn>\n      </ArrowContainer>\n      <BannerContainer \n        ref={banner} \n        style={bannerStyle} \n        onMouseDown={handleMouseDown} \n        onMouseMove={handleMouseMove} \n        onMouseUp={handleMouseUp}\n      >\n        <BannerImage page={1} handleClick={handleClick}/>\n        <BannerImage page={2} handleClick={handleClick}/>\n        <BannerImage page={1} handleClick={handleClick}/>\n        <BannerImage page={2} handleClick={handleClick}/>\n        <BannerImage page={1} handleClick={handleClick}/>\n        <BannerImage page={2} handleClick={handleClick}/>\n      </BannerContainer>\n    </BannerWrapper>\n  );\n}","import { useState, useEffect, useRef } from \"react\";\n\nexport default function useCarousel() {\n  \n  const [W, setW] = useState(0)\n  const [currentPage, setCurrentPage] = useState('page1')\n  const [isDragging, setIsDragging] = useState(false)\n  const [isClicked, setIsClicked] = useState(false)\n  const [isHovered, setIsHovered] = useState(false)\n\n  const X = useRef(null);\n  const banner = useRef(null);\n  const timeoutID = useRef(null);\n\n  useEffect(() => {\n    W % 2 ? setCurrentPage('page2') : setCurrentPage('page1')\n  }, [W, setCurrentPage])\n\n  useEffect(() => {\n    if(!isHovered){\n      timeoutID.current = setTimeout(() => {\n        banner.current.style.transition = '0s'\n        banner.current.style.transform = `translateX(${-100 * (W%2+3) + 100}vw)`\n        setTimeout(() => {\n          banner.current.style.transition = '.5s'\n          banner.current.style.transform = `translateX(${-100 * (W%2+3)}vw)`\n          setW(W%2+1)\n        })\n      }, 5000)\n    }\n    if(isHovered) clearTimeout(timeoutID.current)\n    return () => clearTimeout(timeoutID.current)\n  }, [banner, W, isHovered])\n\n  const handleMouseDown = e => {\n    e.preventDefault();\n    X.current = e.pageX;\n    setIsDragging(true)\n    setIsClicked(true)\n  }\n  const handleMouseMove = e => {\n    e.preventDefault();\n    setIsClicked(false)\n    if(isDragging) banner.current.style.transition = '0s'\n    if(X.current && isDragging && e.pageX - X.current < 0){\n      banner.current.style.transform = `translateX(calc(${-100 * (W%2+3) + 100}vw + ${e.pageX-X.current}px))`\n    }\n    if(X.current && isDragging && e.pageX - X.current > 0){\n      banner.current.style.transform = `translateX(calc(${-100 * (W%2+3) - 100}vw + ${e.pageX-X.current}px))`\n    }\n  }\n  const handleMouseUp = e => {\n    if(!isClicked && isDragging) handleTransform(e)\n    setIsDragging(false)\n  }\n  const handleMouseLeave = e => {\n    setIsHovered(false)\n    if(isDragging) handleTransform(e)\n    setIsDragging(false)\n  }\n\n  const handleTransform = e => {\n    banner.current.style.transition = '.25s'\n    if(e.pageX-X.current < 0 && e.pageX-X.current >= -100){\n      return banner.current.style.transform = `translateX(${-100 * (W%2+3) + 100}vw)`\n    }\n    if(e.pageX-X.current > 0 && e.pageX-X.current <= 100){\n      return banner.current.style.transform = `translateX(${-100 * (W%2+3) - 100}vw)`\n    }\n    banner.current.style.transform = `translateX(${-100 * (W%2+3)}vw)`\n    if(e.pageX-X.current < -100) return setW(W%2+1)\n    if(e.pageX-X.current > 100) return setW(W%2-1)\n  }\n\n  const handleMouseOver = e => {\n    setIsHovered(true)\n  }\n\n  const handleClick = e => {\n    if(!isClicked) e.preventDefault()\n  }\n\n  const handleButtonClick = direction => () => {\n    banner.current.style.transition = '0s'\n    if(direction === 'backward') {\n      banner.current.style.transform = `translateX(${-100 * (W%2+3) - 100}vw)`\n    }\n    if(direction === 'forward') {\n      banner.current.style.transform = `translateX(${-100 * (W%2+3) + 100}vw)`\n    }\n    setTimeout(() => {\n      banner.current.style.transition = '.25s'\n      banner.current.style.transform = `translateX(${-100 * (W%2+3)}vw)`\n      if(direction === 'forward') return setW(W%2+1)\n      if(direction === 'backward') return setW(W%2-1)\n    })\n  }\n\n  const handleRadioChange = e => {\n    setCurrentPage(e.target.value)\n  }\n\n  const handleRadioClick = page => () => {\n    banner.current.style.transition = '0s'\n    if(page === 1 && currentPage === \"page2\"){\n      banner.current.style.transform = `translateX(-300vw)`\n    }\n    if(page === 2 && currentPage === \"page1\"){\n      banner.current.style.transform = `translateX(-200vw)`\n    }\n    setTimeout(() => {\n      banner.current.style.transition = '.25s'\n      if(page === 1 && currentPage === \"page2\"){\n        banner.current.style.transform = `translateX(-200vw)`\n        setW(W%2-1)\n      }\n      if(page === 2 && currentPage === \"page1\"){\n        banner.current.style.transform = `translateX(-300vw)`\n        setW(W%2+1)\n      }\n    })\n  }\n\n  return {\n\n    currentPage,\n    banner,\n\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleMouseLeave,\n    handleMouseOver,\n    handleClick,\n    handleButtonClick,\n    handleRadioChange,\n    handleRadioClick,\n\n  };\n}","export default __webpack_public_path__ + \"static/media/arrival_female.82ff7752.jpeg\";","export default __webpack_public_path__ + \"static/media/arrival_male.2de499ab.jpeg\";","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport arrival_female_img from '../../assets/arrival_female.jpeg'\nimport arrival_male_img from '../../assets/arrival_male.jpeg'\nimport { MEDIA_QUERY } from \"../../constants/style\"\n\nconst ArrivalWrapper = styled.div`\n`\nconst ArrivalContainer = styled.div`\n  width: 90%;\n  margin: 0 auto;\n  padding-top: 40px;\n  display: flex;\n  justify-content: space-between;\n  ${MEDIA_QUERY.s} {\n    flex-direction: column;\n    & > div {\n      margin: 10px 0;\n    }\n  }\n`\n\nconst ArrivalItem = styled.div`\n  width: 50%;\n  box-sizing: border-box;\n  margin: 10px;\n  background-color: #aaa;\n  box-shadow: 1px 1px 5px ${props => props.theme.color.lightGrey};\n  position: relative;\n  overflow: hidden;\n\n  &:hover img{\n    transform: scale(1.1);\n  }\n  & img {\n    width: 100%;\n    transition: .5s;\n  }\n  ${MEDIA_QUERY.s} {\n    width: 100%;\n  }\n`\n\nconst TitleWrapper = styled.div`\n  position: absolute;\n  width: 50%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1;\n`\n\nconst TitleContainer = styled.div`\n  text-align: center;\n  & hr {\n    margin: 15px 0;\n    border: 1px solid ${props => props.theme.color.lightGrey};\n  }\n  & h4 {\n    font-size: ${props => props.theme.fontSize.bannerLarge};\n    font-family: impact;\n    color: ${props => props.theme.color.black};\n  }\n  & p {\n    font-size: ${props => props.theme.fontSize.svgLarge};\n    font-weight: ${props => props.theme.fontWeight.xxl};\n    color: ${props => props.theme.color.black};\n    line-height: 1.5em;\n  }\n  ${MEDIA_QUERY.main} {\n    & hr {\n      margin: 7px 0;\n    }\n    & h4 {\n      font-size: ${props => props.theme.fontSize.bannerMedium};\n    }\n    & p {\n      font-size: ${props => props.theme.fontSize.svg};\n    }\n  }\n  ${MEDIA_QUERY.m} {\n    & hr {\n      margin: 5px 0;\n    }\n    & h4 {\n      font-size: ${props => props.theme.fontSize.h2};\n    }\n    & p {\n      font-size: ${props => props.theme.fontSize.h3};\n    }\n  }\n  ${MEDIA_QUERY.xs} {\n    & hr {\n      margin: 5px 0;\n    }\n    & h4 {\n      font-size: ${props => props.theme.fontSize.h3};\n    }\n    & p {\n      font-size: ${props => props.theme.fontSize.body};\n    }\n  }\n`\n\n\nexport const Arrival = () => {\n  return (\n    <ArrivalWrapper>\n      <ArrivalContainer>\n        <ArrivalItem>\n          <Link to=\"#\">\n            <TitleWrapper>\n              <TitleContainer>\n                <div>\n                  <h4>New</h4>\n                  <h4>Arrival</h4>\n                </div>\n                <hr/>\n                <p>女裝新品</p>\n              </TitleContainer>\n            </TitleWrapper>\n            <img src={arrival_female_img} alt=\"arrival_female_img\"/>\n          </Link>\n        </ArrivalItem>\n        <ArrivalItem>\n          <Link to=\"#\">\n            <TitleWrapper>\n              <TitleContainer>\n                <div>\n                  <h4>New</h4>\n                  <h4>Arrival</h4>\n                </div>\n                <hr/>\n                <p>男裝新品</p>\n              </TitleContainer>\n            </TitleWrapper>\n            <img src={arrival_male_img} alt=\"arrival_male_img\"/>\n          </Link>\n        </ArrivalItem>\n      </ArrivalContainer>\n    </ArrivalWrapper>\n  )\n}","import styled from \"styled-components\";\nimport { useState, useEffect } from \"react\";\nimport { getFeedImages } from \"../webAPI/productAPI\";\nimport { MEDIA_QUERY } from \"../constants/style\"\n\nconst FeedWrapper = styled.div`\n`\nconst FeedContainer = styled.div`\n  padding: 40px 0 0;\n  display: flex;\n  overflow: hidden;\n  & div {\n    width: calc(100%/6);\n    ${MEDIA_QUERY.m} {\n      width: calc(100%/4);\n    }\n    ${MEDIA_QUERY.s} {\n      width: calc(100%/3);\n    }\n    ${MEDIA_QUERY.xs} {\n      width: calc(100%/2);\n    }\n    flex-shrink: 0;\n    & img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n`\n\nexport const Feed = () => {\n\n  // const [feeds, setFeeds] = useState()\n  // useEffect(() => {\n  //   getFeedImages().then(data => {\n  //     setFeeds(\n  //       data.map(img => (\n  //         {id: img.id, desc: img.description, url: img.urls.small}\n  //       ))\n  //     )\n  //   })\n  // }, [])\n\n  return (\n    <FeedWrapper>\n      <FeedContainer>\n        {/* {\n          feeds && feeds.map(feed => (\n            <div key={feed.id}>\n              <a target=\"_blank\" rel=\"noreferrer\" href={feed.url}>\n                <img src={feed.url} alt={feed.desc}/>\n              </a>\n            </div>\n          ))\n        } */}\n      </FeedContainer>\n    </FeedWrapper>\n  );\n}","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { H2, H3, H4, P } from \"../constants/style\"\nimport { faCartPlus, faShoppingCart, faHeart as fasHeart} from '@fortawesome/free-solid-svg-icons'\nimport { faHeart } from '@fortawesome/free-regular-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { MEDIA_QUERY } from \"../constants/style\"\n\n\nconst ProductCard = styled.section`\n  padding: 10px;\n  box-sizing: border-box;\n  & a {\n    text-decoration: none;\n  }\n  & img {\n    width: 100%;\n    height: 100%;\n  }\n  & h4 {\n    padding: 10px 0;\n  }\n`\n\nconst ImageContainer = styled.div`\n  position: relative;\n  aspect-ratio: 1;\n  & a {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 1;\n  }\n  &:hover > div:last-child {\n    background-color: ${props => props.theme.color.black}5;\n    & > button {\n      &:nth-child(1) {\n        left: -80px;\n      }\n      &:nth-child(2) {\n        right: -80px;\n      }\n    }\n  }\n`\n\nconst ImageMask = styled.div`\n  background-color: transparent;\n  transition: background-color .3s;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow: hidden;\n  & > button {\n    z-index: 2;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto;\n    &:nth-child(1) {\n      left: -400px;\n      transition: left .3s;\n    }\n    &:nth-child(2) {\n      right: -400px;\n      transition: right .3s .05s;\n    }\n  }\n`\n\nconst Btn = styled.button`\n  width: 60px;\n  height: 60px;\n  background-color: ${props => props.theme.color.lightGrey}a;\n  border-radius: 50%;\n  display: block;\n\n  &:hover {\n    bottom: 4px;\n  }\n  &:active {\n    top: 2px;\n  }\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  & svg {\n    font-size: ${props => props.theme.fontSize.svgLarge};\n    color: ${props => props.theme.color.grey};\n  }\n`\n\nconst ProductPrice = styled(P)`\n  & span {\n    padding: 0 5px;\n    &:nth-child(1) {\n      color: ${props => props.theme.color.grey};\n      font-size: ${props => props.theme.fontSize.body};\n      text-decoration: line-through;\n    }\n    &:nth-child(2) {\n      color: ${props => props.theme.color.alert};\n    }\n  }\n`\n\nconst ProductReminder = styled.div`\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  & span {\n    display: inline-block;\n    width: 50px;\n    color: ${props => props.theme.color.white};\n    font-weight: ${props => props.theme.fontWeight.xl};\n    font-size: ${props => props.theme.fontSize.body};\n    border-radius: 5px;\n    & + span {\n      margin-left: 5px;\n    }\n    ${MEDIA_QUERY.s} {\n      width: 40px;\n      font-size: ${props => props.theme.fontSize.bodySmall};\n    }\n  }\n`\n\nconst ProductReminderSale = styled.span`\n  background-color: ${props => props.theme.color.alert};\n`\nconst ProductReminderNew = styled.span`\n  background-color: ${props => props.theme.color.black};\n`\n\nexport const TestProductCards = () => {\n    return (\n        <>\n            <ProductCard>\n                <div>\n                    <ImageContainer>\n                    <Link to=\"#\"/>\n                    <img src=\"https://picsum.photos/280/280?random=1\" alt=\"001\"/>\n                    <ProductReminder>\n                        <ProductReminderSale>SALE</ProductReminderSale>\n                        <ProductReminderNew>NEW</ProductReminderNew>\n                    </ProductReminder>\n                    <ImageMask>\n                        <Btn>\n                        <FontAwesomeIcon icon={faCartPlus}/>\n                        </Btn>\n                        <Btn>\n                        <FontAwesomeIcon icon={fasHeart}/>\n                        </Btn>\n                    </ImageMask>\n                    </ImageContainer>\n                    <Link to=\"#\">\n                    <H4>商品001</H4>\n                    </Link>\n                </div>\n                <ProductPrice>\n                    <span>NT $1,450</span>\n                    <span>NT $1,150</span>\n                </ProductPrice>\n            </ProductCard>\n            <ProductCard>\n                <div>\n                    <ImageContainer>\n                    <Link to=\"#\"/>\n                    <img src=\"https://picsum.photos/280/280?random=1\" alt=\"001\"/>\n                    <ImageMask>\n                        <Btn>\n                        <FontAwesomeIcon icon={faShoppingCart}/>\n                        </Btn>\n                        <Btn>\n                        <FontAwesomeIcon icon={faHeart}/>\n                        </Btn>\n                    </ImageMask>\n                    </ImageContainer>\n                    <Link to=\"#\">\n                    <H4>商品001</H4>\n                    </Link>\n                </div>\n                <P>NT $1,450</P>\n            </ProductCard>\n        </>\n    )\n}","import { createSlice } from '@reduxjs/toolkit'\n\nconst initialState = {\n  isOpened: false,\n  errorMessage: '',\n  popupCode: '',\n}\n\nexport const generalSlice = createSlice({\n  name: 'general',\n  initialState,\n  reducers: {\n    setIsOpened: (state, action) => {\n      state.isOpened = action.payload;\n    },\n    setErrorMessage: (state, action) => {\n      state.errorMessage = action.payload;\n    },\n    setPopupCode: (state, action) => {\n      state.popupCode = action.payload;\n    },\n  },\n})\n\nexport const { \n  setIsOpened,\n  setErrorMessage,\n  setPopupCode,\n} = generalSlice.actions\n\nexport default generalSlice.reducer","import { useEffect, useRef, useState } from \"react\";\nimport { useDispatch } from 'react-redux'\nimport { addCartStorage, setCartQty } from \"../features/cart/cartSlice\";\nimport { setPopupCode, setErrorMessage, setIsOpened } from \"../features/general/generalSlice\";\nimport { setColor, setProduct, setQty, setSize } from \"../features/product/productSlice\";\n\nexport default function useProduct (spec, product, group, isOpened) {\n\n  const [isChecked, setIsChecked] = useState(true)\n  const [mainImg, setMainImg] = useState({src: '', alt: ''})\n\n  const scaledImg = useRef()\n\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if(isOpened) return;\n    if (!group || !product) return;\n    const size_Initialized = product ? product.product[`${group}s`][0].size : ''\n    dispatch(setSize(size_Initialized))\n    dispatch(setColor(''))\n    dispatch(setQty(1))\n  }, [product, group, dispatch, isOpened])\n\n  const handleClosePopup = type => () => {\n    dispatch(setIsOpened(false))\n    if(type === 'size' || type === 'color' || type === 'edit' || type === 'delete'){\n      dispatch(setProduct(''))\n    }\n    dispatch(setPopupCode(''))\n    dispatch(setErrorMessage(''))\n  }\n\n  const handleSizeChange = e => {\n    dispatch(setSize(e.target.value))\n    dispatch(setColor(''))\n  }\n  const handleColorChange = isNull => e => {\n    if(isNull) return;\n    dispatch(setColor(e.target.value))\n  }\n  const handleQtyChange = e => {\n    dispatch(setQty(parseInt(e.target.value)))\n  }\n  const handleBtnClick = direction => {\n    if(direction === 'inc') return dispatch(setQty(spec.qty+1))\n    if(direction === 'dec') {\n      if(spec.qty<=1) return \n      dispatch(setQty(spec.qty-1))\n    }\n  }\n\n  const handleMouseMove = e => {\n    e.preventDefault();\n    const offsetX = e.nativeEvent.offsetX > 0 ? e.nativeEvent.offsetX : 0\n    const offsetY = e.nativeEvent.offsetY > 0 ? e.nativeEvent.offsetY : 0\n    const offsetWidth = e.target.offsetWidth\n    const perX = offsetX / offsetWidth\n    const perY = offsetY / offsetWidth\n    scaledImg.current.style.left = `-${perX*100}%`\n    scaledImg.current.style.top = `-${perY*100}%`\n  }\n\n  const handleImgClick = e => {\n    if(e.target.tagName === 'IMG'){\n      setMainImg({src: e.target.src, alt: e.target.alt})\n    }\n  }\n\n  const handleCheckedChange = () => {\n    setIsChecked(!isChecked)\n  }\n\n  const handleAddToCart = () => {\n    if(!spec.size || !spec.color) return dispatch(setErrorMessage('請選擇尺寸或顏色'))\n    const cartItem = JSON.parse(localStorage.getItem('cart')) || [];\n    WriteToLocalStorage(cartItem)\n    dispatch(setIsOpened(true))\n  }\n\n  const handleAddToWishList = () => {\n    dispatch(setPopupCode('login'))\n    dispatch(setIsOpened(true))\n  }\n\n  function WriteToLocalStorage (cartItem) {\n    const pattern_id = product.patterns.find(pattern => (pattern.Color.name === spec.color) && (pattern[group].size === spec.size)).id\n    const newItem = {\n      pattern_id,\n      qty: spec.qty,\n    }\n    const getItem = cartItem.find(item => \n      item.pattern_id === newItem.pattern_id\n    )\n    if (getItem) {\n      getItem.qty += spec.qty\n      newItem.qty = getItem.qty\n      dispatch(setCartQty(newItem))\n    } else {\n      newItem.id = product.product.id\n      cartItem.push(newItem)\n      dispatch(addCartStorage(newItem))\n    }\n    return localStorage.setItem('cart', JSON.stringify(cartItem))\n  }\n\n  function addCommaToPrice (price) {\n    let p = price\n    const arr = []\n    while (parseInt(p/1000) > 0) {\n      const a = []\n      for(let i=0; i<3; i++){\n        a.push(parseInt(p%(10**(i+1))/(10**i)))\n      }\n      arr.push(a.reverse().join(''))\n      p = parseInt(p/1000)\n    }\n    arr.push(p)\n    return arr.reverse().join(',')\n  }\n\n  return {\n    addCommaToPrice,\n    mainImg,\n    setMainImg,\n    scaledImg,\n    handleMouseMove,\n    handleImgClick,\n    isChecked,\n    handleCheckedChange,\n    handleBtnClick,\n    handleSizeChange,\n    handleColorChange,\n    handleQtyChange,\n    handleAddToCart,\n    handleAddToWishList,\n    handleClosePopup,\n  };\n}","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { H4, P } from \"../constants/style\"\nimport { faCartPlus, faShoppingCart, faHeart as fasHeart} from '@fortawesome/free-solid-svg-icons'\nimport { faHeart } from '@fortawesome/free-regular-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { MEDIA_QUERY } from \"../constants/style\"\nimport useProduct from \"../hooks/useProduct\";\nimport { Img } from \"./Img\";\nimport { useDispatch } from \"react-redux\";\n\n\nconst ProductCard = styled.section`\n  padding: 10px;\n  box-sizing: border-box;\n  & a {\n    text-decoration: none;\n  }\n  & img {\n    width: 100%;\n    height: 100%;\n  }\n  & h4 {\n    padding: 10px 0;\n  }\n`\n\nconst ImageContainer = styled.div`\n  position: relative;\n  aspect-ratio: 1;\n  & > a {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 1;\n  }\n  &:hover > div:last-child {\n    background-color: ${props => props.theme.color.grey}5;\n    & button {\n      right: 0px;\n    }\n  }\n`\n\nconst ImageMask = styled.div`\n  background-color: transparent;\n  transition: background-color .3s;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow: hidden;\n`\n\nconst BtnContainer = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 10px;\n  & > button {\n    margin-top: 5px;\n  }\n`\n\nconst Btn = styled.button`\n  width: 40px;\n  height: 40px;\n  display: block;\n  background-color: ${props => props.theme.color.lightGrey}a;\n  border-radius: 50%;\n  z-index: 2;\n  position: relative;\n  right: -60px;\n  &:nth-child(1) {\n    transition: .3s;\n  }\n  &:nth-child(2) {\n    transition: .3s .1s;\n  }\n  &:hover {\n    background-color: ${props => props.theme.color.white}a;\n  }\n\n  & svg {\n    font-size: ${props => props.theme.fontSize.btn};\n    color: ${props => props.theme.color.grey};\n  }\n`\n\nconst ProductPrice = styled(P)`\n  & span {\n    padding: 0 5px;\n    &:nth-child(1) {\n      color: ${props => props.theme.color.grey};\n      font-size: ${props => props.theme.fontSize.body};\n      text-decoration: line-through;\n    }\n    &:nth-child(2) {\n      color: ${props => props.theme.color.alert};\n    }\n  }\n`\n\nconst ProductReminder = styled.div`\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  & span {\n    display: inline-block;\n    width: 50px;\n    color: ${props => props.theme.color.white};\n    font-weight: ${props => props.theme.fontWeight.xl};\n    font-size: ${props => props.theme.fontSize.body};\n    border-radius: 5px;\n    & + span {\n      margin-left: 5px;\n    }\n    ${MEDIA_QUERY.s} {\n      width: 40px;\n      font-size: ${props => props.theme.fontSize.bodySmall};\n    }\n  }\n`\n\nconst ProductReminderSale = styled.span`\n  background-color: ${props => props.theme.color.alert};\n`\nconst ProductReminderNew = styled.span`\n  background-color: ${props => props.theme.color.black};\n`\n\nexport const ProductItem = ({product}) => {\n\n  const dispatch = useDispatch()\n\n  const { \n    addCommaToPrice, \n    handleAddToWishList\n  } = useProduct();\n\n  const url = `/product/${product.id}`\n\n  return (\n    <ProductCard>\n      <div>\n        <ImageContainer>\n          <Link to={url}/>\n          <Img image={product.Images[0]} />\n          <ProductReminder>\n            {product.is_sale && (\n              <ProductReminderSale>SALE</ProductReminderSale>\n            )}\n            <ProductReminderNew>NEW</ProductReminderNew>\n          </ProductReminder>\n          <ImageMask>\n            <BtnContainer>\n              <Link to={url}>\n                <Btn>\n                  <FontAwesomeIcon icon={faShoppingCart}/>\n                </Btn>\n              </Link>\n              <Btn onClick={handleAddToWishList}>\n                <FontAwesomeIcon icon={faHeart}/>\n              </Btn>\n            </BtnContainer>\n          </ImageMask>\n        </ImageContainer>\n        <Link to={url}>\n          <H4>{product.name}</H4>\n        </Link>\n      </div>\n      {\n        product.is_sale ? (\n          <ProductPrice>\n            <span>NT ${addCommaToPrice(product.price_standard)}</span>\n            <span>NT ${addCommaToPrice(product.price_sale)}</span>\n          </ProductPrice>\n        ) : (\n          <P>NT ${addCommaToPrice(product.price_standard)}</P>\n        )\n      }\n    </ProductCard>\n  )\n}\n","import styled from \"styled-components\";\nimport { useState, useEffect } from \"react\";\n\nimport { H2, H3, P } from \"../../constants/style\"\nimport { getTrendingProductsAPI } from \"../../webAPI/productAPI\";\nimport { MEDIA_QUERY } from \"../../constants/style\"\nimport { TestProductCards } from \"../../components/TestProductCards\";\nimport { ProductItem } from \"../../components/ProductItem\";\n\nconst TrendingWrapper = styled.div`\n`\nconst TrendingContainer = styled.div`\n  width: 90%;\n  margin: 0 auto;\n  padding: 40px 0;\n  text-align: center;\n  ${MEDIA_QUERY.s} {\n    width: 100%;\n  }\n  & h2, div {\n    text-align: center;\n  }\n  & input {\n    display: none;\n    &:checked + div {\n      display: flex;\n    }\n  }\n  & > p {\n    padding: 20px;\n  }\n`\n\nconst Subtitle = styled(H3)`\n  display: flex;\n  justify-content: center;\n  padding: 10px 0;\n  & span::after {\n    content: '';\n    display: block;\n    width: 0%;\n    height: 2px;\n    background-color: ${props => props.theme.color.black};\n    transition: width .4s;\n  }\n  & label {\n    padding: 0 5px;\n    &:hover {\n      cursor: pointer;\n      & span::after {\n        width: 100%;\n      }\n    }\n  }\n`\n\nconst ProductContainer = styled.div`\n  display: none;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  & > section {\n    width: calc(100%/4);\n    ${MEDIA_QUERY.main} {\n      width: calc(100%/3);\n      &:nth-child(n+7) {\n        display: none;\n      }\n    }\n    ${MEDIA_QUERY.m} {\n      width: 50%;\n      &:nth-child(n+5) {\n        display: none;\n      }\n    }\n    ${MEDIA_QUERY.xs} {\n      width: 100%;\n    }\n  }\n`\n\nexport const Trend = () => {\n\n  const [trends, setTrends] = useState(() => (\n    {male: '', female: ''}\n  ))\n  const [error, setError] = useState()\n\n  useEffect(() => {\n    getTrendingProductsAPI()\n    .then(data => {\n      if(!data.ok) return setError(data.message)\n      setTrends({\n        male: data.data.filter(trend => trend.gender === 'M'), \n        female: data.data.filter(trend => trend.gender === 'F')\n      })\n    })\n  }, [])\n\n  return (\n    <TrendingWrapper>\n      <TrendingContainer>\n        <H2>熱賣商品</H2>\n        <Subtitle>\n          <label htmlFor=\"female\"><span>女裝</span></label>\n          /\n          <label htmlFor=\"male\"><span>男裝</span></label>\n        </Subtitle>\n        {!trends.male && !trends.female && (\n          error ? (\n            <P>{error}</P>\n          ) : (\n            <P>商品載入中...</P>\n          )\n        )}\n        {trends.male && trends.female && !error && (\n          <div>\n            <input id=\"female\" type=\"radio\" name=\"subtitle\" defaultChecked/>\n            {trends.female.length > 0 ? (\n              <ProductContainer>\n                {\n                  trends.female && trends.female.map(trend => {\n                    return (\n                      <ProductItem key={trend.id} product={trend} />\n                    )\n                  })\n                }\n                <TestProductCards />\n              </ProductContainer>\n            ) : (\n              <ProductContainer>\n                <P>查無商品</P>\n              </ProductContainer>\n            )}\n            <input id=\"male\" type=\"radio\" name=\"subtitle\"/>\n            {trends.male.length > 0 ? (\n              <ProductContainer>\n                {\n                  trends.male && trends.male.map(trend => {\n                    return (\n                      <ProductItem key={trend.id} product={trend} />\n                    )\n                  })\n                }\n                <TestProductCards />\n              </ProductContainer>\n            ) : (\n              <ProductContainer>\n                <P>查無商品</P>\n              </ProductContainer>\n            )}\n          </div>\n        )}\n      </TrendingContainer>\n    </TrendingWrapper>\n  );\n}","import { Carousel } from './Carousel'\nimport { Arrival } from './Arrival'\nimport { Feed } from '../../components/Feed'\nimport { Trend } from './Trend'\n\nexport default function HomePage() {\n  return (\n    <main>\n      <Carousel />\n      <Arrival />\n      <Trend />\n      <Feed />\n    </main>\n  );\n}","export const crumbMap = [\n    {\n        collection: '商品一覽',\n        admin: '管理後台'\n    },\n    {\n        men: '男裝',\n        women: '女裝',\n        product: '商品管理',\n        order: '訂單管理',\n        user: '用戶管理'\n    },\n    {\n        tops: '上衣類',\n        shirts: '襯衫類',\n        knit: '針織衫 / 毛衣',\n        one_piece: '洋裝類',\n        outer: '外套類',\n        bottoms: '褲裝類',\n        skirts: '裙子類',\n        general: '配件類',\n        information: '新增及管理產品資訊',\n        quantity: '管理存貨數量與紀錄',\n        price: '管理商品價格與紀錄',\n        new: '新增產品'\n    }\n]\n\nexport const sizeMap = {\n    Size_top: {\n      sleeve_length: '袖長',\n      body_length: '衣長',\n      body_width: '胸寬'\n    },\n    Size_bottom: {\n      waist: '腰圍',\n      hip: '臀圍',\n      rise: '褲檔',\n      inseam: '褲內檔長'\n    },\n    Size_skirt: {\n      waist: '腰圍',\n      hip: '臀圍',\n      length: '裙長'\n    }\n}","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\"\n\nimport { crumbMap } from \"../constants/mapping\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faHome } from '@fortawesome/free-solid-svg-icons'\nimport { MEDIA_QUERY } from \"../constants/style\";\n\n\n\nconst CrumbWrapper = styled.nav`\n  ${MEDIA_QUERY.xs} {\n    display: none;\n  }\n`\nconst CrumbContainer = styled.div`\n  width: 90%;\n  margin: 20px auto 10px;\n  & ol {\n    display: flex;\n    flex-wrap: wrap;\n    & li {\n      & a {\n        font-size: ${props => props.theme.fontSize.bodyLarge};\n        font-weight: ${props => props.theme.fontWeight.l};\n        color: ${props => props.theme.color.black};\n        line-height: 1.5em;\n        &:last-child {\n          font-weight: ${props => props.theme.fontWeight.xl};\n        }\n      }\n      & + li {\n        margin-left: 5px;\n        &::before {\n          content: '>';\n          margin-right: 5px;\n        }\n      }\n    }\n  }\n  & li {\n    z-index: 1;\n  }\n`\n\n\n\nexport const CrumbNav = ({pathArr, name}) => {\n  \n    return (\n      <CrumbWrapper>\n        <CrumbContainer>\n          <ol>\n            <li>\n              <Link to=\"/\">\n                <FontAwesomeIcon icon={faHome}/>\n              </Link>\n            </li>\n            {pathArr.slice(1).map((path, index) => {\n              return (\n                <li key={index}>\n                  <Link to={pathArr.slice(0, index+2).join('/')}>\n                    <span>{crumbMap[index][path]}</span>\n                  </Link>\n                </li>\n              )\n            })}\n            {name && (\n              <li>\n                <Link to=\"#\">\n                  <span>{name}</span>\n                </Link>\n              </li>\n            )}\n          </ol>\n        </CrumbContainer>\n      </CrumbWrapper>\n    )\n  }","import { useState, useEffect, useContext, useRef } from \"react\";\nimport { useHistory } from \"react-router\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUnfilteredProducts } from \"../features/product/productSlice\";\n\nimport { LocationContext } from \"../pages/ListPage/ListPage\";\n\nexport default function usePriceFilter() {\n\n  const { pathname, search } = useContext(LocationContext);\n  \n  const unfilteredProducts = useSelector(state => state.product.unfilteredProducts)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    dispatch(getUnfilteredProducts(pathname.split('/').slice(2, 4)))\n  }, [pathname, dispatch])\n\n  function minInitailizer () {\n    if(!unfilteredProducts) return 300\n    const arr = unfilteredProducts.map(product => product.is_sale ? product.price_sale : product.price_standard)\n    return Math.min(...arr)\n  }\n  function maxInitailizer () {\n    if(!unfilteredProducts) return 1200\n    const arr = unfilteredProducts.map(product => product.is_sale ? product.price_sale : product.price_standard)\n    return Math.max(...arr)\n  }\n\n  const minimum = minInitailizer() || 300\n  const maximum = maxInitailizer() || 1200\n\n  const [min, setMin] = useState(() => minInitailizer());\n  const [max, setMax] = useState(() => maxInitailizer());\n  const [isDragging, setIsDragging] = useState(false)\n\n  const X = useRef(null);\n  const direction = useRef(null);\n\n  const WR = useRef(null);\n  const WL = useRef(null);\n  const perLeft = useRef(100);\n  const perRight = useRef(100);\n\n  const bar = useRef();\n  const barSelected = useRef();\n  const knobLeft = useRef();\n  const knobRight = useRef();\n\n  let newSearch = new URLSearchParams(search);\n  const priceParam = newSearch.get('price') || `${minimum}-${maximum}`\n  useEffect(() => {\n    const minTemp = parseInt(priceParam.split('-')[0])\n    const maxTemp = parseInt(priceParam.split('-')[1])\n    setMin(minTemp)\n    setMax(maxTemp)\n    perLeft.current = 100 - (100*(maximum-maxTemp)/(maximum-minimum))\n    perRight.current = 100 - (100*(minTemp-minimum)/(maximum-minimum))\n    WR.current = perLeft.current * bar.current.offsetWidth / 100\n    WL.current = perRight.current * bar.current.offsetWidth / 100\n    barSelected.current.style.right = `${100 - perLeft.current}%`;\n    barSelected.current.style.left = `${100 - perRight.current}%`;\n    knobLeft.current.style.right = `${perRight.current}%`;\n    knobRight.current.style.left = `${perLeft.current}%`;\n  }, [priceParam, maximum, minimum])\n\n  const history = useHistory()\n\n  const handleMouseDown = e => {\n    console.log(WR)\n    console.log(WL)\n    console.log(perLeft)\n    console.log(perRight)\n    if(isNaN(WR.current) || isNaN(WL.current) || isNaN(perLeft.current) || isNaN(perRight.current)){\n      return setIsDragging(false)\n    }\n    X.current = e.pageX;\n    if(e.target === knobRight.current){\n      direction.current = 'R';\n    } else if(e.target === knobLeft.current){\n      direction.current = 'L';\n    }\n    if(WR.current === null){\n      WR.current = bar.current.offsetWidth;\n    }\n    if(WL.current === null){\n      WL.current = bar.current.offsetWidth;\n    }\n    setIsDragging(true)\n  }\n\n  const handleMouseMove = e => {\n    if(X.current && isDragging){\n      e.preventDefault();\n      if(direction.current === 'R'){\n        let per = ((WR.current - X.current + e.pageX)/bar.current.offsetWidth * 100);\n        if(per > 100) per = 100;\n        if(per < 100 - perRight.current) per = 100 - perRight.current;\n        knobRight.current.style.left = `${per}%`;\n        barSelected.current.style.right = `${100 - per}%`;\n        perLeft.current = per;\n        setMax(Number((maximum - (maximum - minimum) * (100 - per) / 100).toFixed(0)));\n      }\n      if(direction.current === 'L'){\n        let per = ((WL.current + X.current - e.pageX)/bar.current.offsetWidth * 100);\n        if(per > 100) per = 100;\n        if(per < 100 - perLeft.current) per = 100 - perLeft.current;\n        knobLeft.current.style.right = `${per}%`;\n        barSelected.current.style.left = `${100 - per}%`;\n        perRight.current = per;\n        setMin(Number((minimum + (maximum - minimum) * (100 - per) / 100).toFixed(0)));\n      }\n    }\n  }\n\n  const handleMouseUp = e => {\n    if(isDragging) {\n      if(direction.current === 'R'){\n        if(!barSelected.current.offsetWidth){\n          WR.current = knobRight.current.offsetLeft\n        }else{\n          WR.current = WR.current - X.current + e.pageX;\n        }\n        if(WR.current > bar.current.offsetWidth){\n          WR.current = bar.current.offsetWidth\n        }\n      }\n      if(direction.current === 'L'){\n        if(!barSelected.current.offsetWidth){\n          WL.current = bar.current.offsetWidth - knobRight.current.offsetLeft\n        }else{\n          WL.current = WL.current + X.current - e.pageX;\n        }\n        if(WL.current > bar.current.offsetWidth){\n          WL.current = bar.current.offsetWidth\n        }\n      }\n      setIsDragging(false)\n\n      let newSearch = new URLSearchParams(search);\n      const priceParam = newSearch.get('price');\n    \n      if (priceParam) {\n        newSearch.set('price', `${min}-${max}`)\n      } else {\n        newSearch.append('price', `${min}-${max}`)\n      }\n\n      if (newSearch.has('page')) {\n        newSearch.delete('page')\n      }\n    \n      const priceURL = `${pathname}?${newSearch}`\n\n      history.push(priceURL)\n    }\n  }\n\n  const handleMouseLeave = e => {\n    if(isDragging) {\n      if(direction.current === 'R'){\n        if(!barSelected.current.offsetWidth){\n          WR.current = knobRight.current.offsetLeft\n        }else{\n          WR.current = WR.current - X.current + e.pageX;\n        }\n        if(WR.current > bar.current.offsetWidth){\n          WR.current = bar.current.offsetWidth\n        }\n      }\n      if(direction.current === 'L'){\n        if(!barSelected.current.offsetWidth){\n          WL.current = bar.current.offsetWidth - knobRight.current.offsetLeft\n        }else{\n          WL.current = WL.current + X.current - e.pageX;\n        }\n        if(WL.current > bar.current.offsetWidth){\n          WL.current = bar.current.offsetWidth\n        }\n      }\n      setIsDragging(false)\n\n      let newSearch = new URLSearchParams(search);\n      const priceParam = newSearch.get('price');\n    \n      if (priceParam) {\n        newSearch.set('price', `${min}-${max}`)\n      } else {\n        newSearch.append('price', `${min}-${max}`)\n      }\n\n      if (newSearch.has('page')) {\n        newSearch.delete('page')\n      }\n    \n      const priceURL = `${pathname}?${newSearch}`\n\n      history.push(priceURL)\n    }\n  }\n\n  return {\n    bar,\n    barSelected,\n    knobLeft,\n    knobRight,\n\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleMouseLeave,\n\n    min,\n    max,\n    isDragging\n  };\n}","import { Link } from \"react-router-dom\";\nimport { useContext } from \"react\";\nimport styled from \"styled-components\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSquare, faCheckSquare } from '@fortawesome/free-regular-svg-icons'\nimport { faFilter } from '@fortawesome/free-solid-svg-icons'\n\nimport { H4, P } from \"../../constants/style\"\nimport { MEDIA_QUERY, Btn } from \"../../constants/style\"\n\nimport useProduct from \"../../hooks/useProduct\";\nimport usePriceFilter from \"../../hooks/usePriceFilter\";\n\nimport { LocationContext } from \"./ListPage\";\n\n\nconst ControllerBtn = styled(Btn)`\n  display: none;\n  height: 40px;\n  padding-left: 20px;\n  border-radius: 5px;\n  background-color: #eee;\n  box-shadow: 1px 0px 5px ${props => props.theme.color.lightGrey};\n  & svg {\n    padding: 10px;\n    font-size: ${props => props.theme.fontSize.h3};\n  }\n  ${MEDIA_QUERY.main} {\n    display: block;\n    position: absolute;\n    right: -30px;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n  }\n`\n\nconst AsideBlock = styled.div`\n  border: 1px solid ${props => props.theme.color.lightGrey}8;\n  & > h4 {\n    padding: 10px 15px;\n    font-weight: ${props => props.theme.fontWeight.xl};\n    background-color: #eee;\n  }\n  & a {\n    color: ${props => props.theme.color.black};\n  }\n`\n\nconst FilterContainer = styled(AsideBlock)`\n  ${MEDIA_QUERY.main} {\n    position: relative;\n    border: none;\n    box-shadow: 1px 0px 5px ${props => props.theme.color.lightGrey};\n  }\n  & section {\n    padding: 10px 15px 0;\n    &:last-child {\n      padding-bottom: 10px;\n    }\n    & ul {\n      padding: 5px 10px;\n    }\n  }\n`\n\nconst SizeFilter = styled.section`\n  & li {\n    display: flex;\n  }\n  & a {\n    z-index: 1;\n    width: 100%;\n    & > svg {\n      font-size: ${props => props.theme.fontSize.h4};\n      color: ${props => props.theme.color.grey};\n    }\n    & > span {\n      padding: 0 5px;\n      line-height: 2em;\n    }\n  }\n`\n\nconst ColorFilter = styled.section`\n  & ul {\n    display: flex;\n    & li {\n      z-index: 1;\n      & + li {\n        margin-left: 5px;\n      }\n    }\n  }\n`\n\nconst ColorSpan = styled.span`\n  display: block;\n  box-sizing: border-box;\n  border: 1px solid #aaa8;\n  border: ${props => (props.$border || (props.$color === 'black')) && 'thin solid #333'};\n  border: ${props => (props.$border && (props.$color === 'black')) && 'medium double #eee'};\n  width: 30px;\n  height: 30px;\n  background-color: ${props => props.theme.color[props.$color]};\n`\n\nconst PriceFilter = styled.section`\n`\n\nconst PriceTag = styled(P)`\n  font-weight: ${props => props.theme.fontWeight.m};\n  & span {\n    &:last-child {\n      &::before {\n        content: '-';\n        margin: 0 5px;\n      }\n    }\n  }\n`\n\nconst PriceBar = styled.div`\n  margin: 10px auto;\n  padding: 0 15px;\n  background-color: ${props => props.theme.color.lightGrey};\n  & > div {\n    z-index: 1;\n    width: 100%;\n    height: 5px;\n    position: relative;\n    & > div {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      background-color: ${props => props.theme.color.grey};\n    }\n  }\n`\n\nconst PriceKnob = styled.span`\n  display: block;\n  width: 15px;\n  height: 15px;\n  box-sizing: border-box;\n  border-radius: 50%;\n  border: 2px solid ${props => props.theme.color.grey};\n  background-color: ${props => props.theme.color.light_primary};\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  margin: auto 0;\n`\n\nconst Cover = styled.label`\n  z-index: 2;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  opacity: 0;\n`\n\nconst ClearBtn = styled(Btn)`\n  background-color: ${props => props.theme.color.black};\n  padding: 3px 10px;\n  margin: 10px 15px 0;\n  border-radius: 1em;\n  & span {\n    color: ${props => props.theme.color.white};\n    font-size: ${props => props.theme.fontSize.bodyLarge};\n    font-weight: ${props => props.theme.fontWeight.l};\n  }\n`\n\n\nconst SizeSelect = ({size}) => {\n\n  const { pathname, search } = useContext(LocationContext);\n  const newSearch = new URLSearchParams(search);\n  const param = newSearch.get('size');\n  let icon = faSquare;\n\n  if (param) {\n    if (!param.includes(size)) {\n      newSearch.set('size', `${param} ${size}`)\n    } else if (param === size) {\n      newSearch.delete('size')\n      icon = faCheckSquare;\n    } else {\n      const newParam = param.split(' ' + size).join('').split(size + ' ').join('')\n      newSearch.set('size', newParam)\n      icon = faCheckSquare;\n    }\n  } else {\n    newSearch.append('size', size)\n  }\n\n  if (newSearch.has('page')) {\n    newSearch.delete('page')\n  }\n\n  const url = `${pathname}?${newSearch}`\n\n  return (\n    <Link to={url}>\n      <FontAwesomeIcon icon={icon}/>\n      <span>{size}</span>\n    </Link>\n  )\n}\n\nconst ColorSelect = ({color}) => {\n\n  const colors = {\n    white: 'light_primary',\n    black: 'black',\n    grey: 'lightGrey',\n    yellow: 'yellow',\n    brown: 'brown',\n  }\n  \n  const { pathname, search } = useContext(LocationContext);\n  const newSearch = new URLSearchParams(search);\n  const param = newSearch.get('color');\n  let border = false;\n\n  if (param) {\n    if (!param.includes(color)) {\n      newSearch.set('color', `${param} ${color}`)\n    } else if (param === color) {\n      newSearch.delete('color')\n      border = true;\n    } else {\n      const newParam = param.split(' ' + color).join('').split(color + ' ').join('')\n      newSearch.set('color', newParam)\n      border = true;\n    }\n  } else {\n    newSearch.append('color', color)\n  }\n\n  if (newSearch.has('page')) {\n    newSearch.delete('page')\n  }\n\n  const url = `${pathname}?${newSearch}`\n\n  return (\n    <Link to={url}>\n      <ColorSpan $border={border} $color={colors[color]}/>\n    </Link>\n  )\n}\n\nconst PriceSelect = () => {\n\n  const rightStyle = {\n    left: \"100%\"\n  }\n  const leftStyle = {\n    right: \"100%\"\n  }\n  const barStyle = {\n    left: \"0%\",\n    right: \"0%\"\n  }\n\n  const { addCommaToPrice } = useProduct()\n  \n  const {\n    bar,\n    barSelected,\n    knobLeft,\n    knobRight,\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleMouseLeave,\n    min,\n    max,\n    isDragging\n  } = usePriceFilter();\n\n  return (\n    <div>\n      <PriceTag>\n        <span>${addCommaToPrice(min)}</span>\n        <span>${addCommaToPrice(max)}</span>\n      </PriceTag>\n      <PriceBar>\n        <div ref={bar}>\n          <div ref={barSelected} style={barStyle} />\n            <PriceKnob ref={knobLeft} $left style={leftStyle} onMouseDown={handleMouseDown} />\n            <PriceKnob ref={knobRight} $right style={rightStyle} onMouseDown={handleMouseDown} />\n        </div>\n      </PriceBar>\n      {isDragging && (\n        <Cover\n          onMouseMove={handleMouseMove}\n          onMouseUp={handleMouseUp}\n          onMouseLeave={handleMouseLeave}\n        />\n      )}\n    </div>\n  )\n}\n\nexport const Filter = () => {\n  const sizes = ['S', 'M', 'L']\n  const colors = ['brown', 'yellow', 'white', 'grey', 'black']\n\n  const { pathname, search } = useContext(LocationContext);\n\n  console.log(search)\n  \n  return (\n    <>\n      <ControllerBtn>\n        <label htmlFor=\"filter\">\n          <FontAwesomeIcon icon={faFilter}/>\n        </label>\n      </ControllerBtn>\n      <FilterContainer>\n        <H4>商品篩選</H4>\n        {search && !search.includes('page') && (\n          <ClearBtn>\n            <Link to={pathname}>\n              <span>清除篩選</span>\n            </Link>\n          </ClearBtn>\n        )}\n        <SizeFilter>\n          <P>尺寸</P>\n          <ul>\n            {sizes.map(size => (\n              <li key={size}>\n                <SizeSelect {...{size}} />\n              </li>\n            ))}\n          </ul>\n        </SizeFilter>\n        <ColorFilter>\n          <P>顏色</P>\n          <ul>\n            {colors.map(color => (\n              <li key={color}>\n                <ColorSelect {...{color}} />\n              </li>\n            ))}\n          </ul>\n        </ColorFilter>\n        <PriceFilter>\n          <P>價格</P>\n          <PriceSelect />\n        </PriceFilter>\n      </FilterContainer>\n    </>\n  )\n}","import styled from \"styled-components\"\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { H4, P, Span } from \"../constants/style\"\nimport { MEDIA_QUERY } from \"../constants/style\"\n\nimport useProduct from \"../hooks/useProduct\";\nimport { getTrendingProductsAPI } from \"../webAPI/productAPI\";\nimport { Img } from \"./Img\";\n\n\nconst AsideBlock = styled.div`\n  border: 1px solid ${props => props.theme.color.lightGrey}8;\n  & > h4 {\n    padding: 10px 15px;\n    font-weight: ${props => props.theme.fontWeight.xl};\n    background-color: #eee;\n  }\n  & a {\n    color: ${props => props.theme.color.black};\n  }\n`\n\nconst TrendContainer = styled(AsideBlock)`\n  ${MEDIA_QUERY.main} {\n    display: none;\n  }\n  & > p {\n    text-align: center;\n    padding: 20px;\n  }\n`\n\nconst TrendCard = styled.section`\n  padding: 10px 0;\n  display: flex;\n  & > div {\n      padding: 0 10px;\n  }\n`\n\nconst TrendImage = styled.div`\n  z-index: 1;\n  width: 60%;\n  display: flex;\n  align-items: center;\n  position: relative;\n  & img {\n    width: 100%;\n  }\n`\n\nconst TrendInfo = styled.div`\n  width: 40%;\n  & p {\n    padding: 5px 0;\n  }\n  & span {\n    display: block;\n    font-weight: ${props => props.theme.fontWeight.l};\n  }\n`\n\nconst TrendPrice = styled.div`\n  & span {\n    &:nth-child(1) {\n      color: ${props => props.theme.color.grey};\n      text-decoration: line-through;\n    }\n    &:nth-child(2) {\n      color: ${props => props.theme.color.alert};\n    }\n  }\n`\n\nconst TrendItem = ({trend}) => {\n\n  const { addCommaToPrice } = useProduct()\n\n  return (\n    <TrendCard>\n      <TrendImage>\n        <Link to=\"/products\">\n          <Img image={trend.Images[0]} />\n          {/* <img src={trend.Images[0].src} alt={trend.Images[0].alt} /> */}\n        </Link>\n      </TrendImage>\n      <TrendInfo>\n        <Link to=\"/products\">\n          <P>{trend.name}</P>\n        </Link>\n        {\n          trend.is_sale ? (\n            <TrendPrice>\n              <Span>NT ${addCommaToPrice(trend.price_standard)}</Span>\n              <Span>NT ${addCommaToPrice(trend.price_sale)}</Span>\n            </TrendPrice>\n          ) : (\n            <Span>NT ${addCommaToPrice(trend.price_standard)}</Span>\n          )\n        }\n      </TrendInfo>\n    </TrendCard>\n  )\n}\n\nexport const Trend = () => {\n\n  const [trends, setTrends] = useState()\n  const [error, setError] = useState()\n\n  useEffect(() => {\n    getTrendingProductsAPI().then(data => {\n      if(!data.ok) {\n        setTrends()\n        return setError(data.message)\n      }\n      setTrends(data.data.slice(0, 4))\n      setError()\n    })\n  }, [])\n\n  return (\n    <TrendContainer>\n      <H4>熱賣商品</H4>\n      {!trends && (\n        error ? (\n          <P>{error}</P>\n        ) : (\n          <P>商品載入中...</P>\n        )\n      )}\n      {trends && !error && (\n        trends.length > 0 ? (\n          trends.map(trend => (\n            <TrendItem key={trend.id} trend={trend} />\n          ))\n        ) : (\n          <P>查無商品</P>\n        )\n      )}\n    </TrendContainer>\n  )\n}","import { Link } from \"react-router-dom\";\n\nimport styled from \"styled-components\"\nimport { MEDIA_QUERY } from \"../constants/style\"\n\nimport { Filter } from \"../pages/ListPage/Filter\"\nimport { Trend } from \"./Trend\"\n\n\nconst Cover = styled.label`\n  z-index: 0;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  opacity: 0;\n  display: none;\n  // background-color: #aaaa;\n`\n\nconst PictureContainer = styled.div`\n  & img {\n    width: 100%;\n  }\n  ${MEDIA_QUERY.main} {\n    display: none;\n  }\n`\n\nconst AsideContainer = styled.aside`\n  width: 20%;\n  min-width: 250px;\n  & > div {\n    z-index: 1;\n    margin: 10px;\n    background-color: ${props => props.theme.color.white};\n  }\n  ${MEDIA_QUERY.main} {\n    position: fixed;\n    left: -240px;\n    z-index: 200;\n    transition: .3s;\n  }\n`\n\nconst Controller = styled.input`\n  display: none;\n  &:checked {\n    & ~ aside {\n      left: -10px;\n    }\n    & + label {\n      display: block;\n    }\n  }\n`\n\nexport const Aside = ({filter}) => {\n\n  return (\n      <>\n        {filter && (\n          <>\n            <Controller id=\"filter\" type=\"checkbox\" />\n            <Cover htmlFor=\"filter\" />\n          </>\n        )}\n        <AsideContainer>\n          <PictureContainer>\n            <Link to=\"/products\">\n              <img src=\"https://picsum.photos/200/250\" alt=\"aside_img\" />\n            </Link>\n          </PictureContainer>\n          {filter && (\n            <Filter />\n          )}\n          <Trend />\n        </AsideContainer>\n      </>\n  )\n}","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\"\nimport { useEffect, useContext } from \"react\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTh, faThLarge, faChevronDown, faAlignJustify } from '@fortawesome/free-solid-svg-icons'\n\nimport { LocationContext } from \"./ListPage\";\n\nimport { Span } from \"../../constants/style\"\nimport { MEDIA_QUERY, Btn } from \"../../constants/style\"\n\nconst SortContainer = styled.div`\n  margin: 0 10px;\n  padding: 10px 15px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: ${props => props.theme.color.lightGrey}3;\n`\n\nconst GalleryBtnGroup = styled.div`\n  z-index: 1;\n  ${MEDIA_QUERY.s} {\n    display: none;\n  }\n`\n\nconst GalleryBtn = styled(Btn)`\n  padding: 5px;\n  & svg {\n    font-size: ${props => props.theme.fontSize.btn};\n  }\n  ${MEDIA_QUERY.m} {\n    ${props => props.$four && 'display: none;'}\n  }\n`\n\nconst GalleryRadio = styled.input`\n  display: none;\n  &:checked {\n    & ~ div {\n      & section {\n        width: ${props => props.$two && 'calc(100%/2)'};\n        width: ${props => props.$three && 'calc(100%/3)'};\n        width: ${props => props.$four && 'calc(100%/4)'};\n      }\n    }\n  }\n`\n\nconst MenuContainer = styled.div`\n  width: 150px;\n  position: relative;\n  & span {\n    display: block;\n    font-weight: ${props => props.theme.fontWeight.l};\n  }\n  & > input {\n    display: none;\n    &:checked {\n      & ~ ul {\n        display: block;\n      }\n      & + label {\n        display: block;\n      }\n    }\n  }\n`\nconst Menu = styled.div`\n  z-index: 1;\n  background-color: ${props => props.theme.color.white};\n  border: 1px solid ${props => props.theme.color.lightGrey}8;\n  padding: 5px 10px;\n  display: flex;\n  justify-content: space-between;\n  position: relative;\n  & span {\n    color: ${props => props.theme.color.lightGrey};\n  }\n  & button {\n    & svg {\n      font-size: ${props => props.theme.fontSize.bodyLarge};\n    }\n  }\n  & label {\n    position: absolute;\n    display: block;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n`\n\nconst SubMenu = styled.ul`\n  width: 100%;\n  position: absolute;\n  top: 33px;\n  background-color: #fff;\n  z-index: 5;\n  box-shadow: 1px 0px 5px ${props => props.theme.color.lightGrey};\n  display: none;\n  & li:hover {\n    background-color: ${props => props.theme.color.grey};\n    & span {\n    color: ${props => props.theme.color.light_primary};\n    }\n  }\n  & span {\n    padding: 5px 10px;\n    color: ${props => props.theme.color.grey};\n  }\n`\n\nconst Cover = styled.label`\n  z-index: 0;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  opacity: 0;\n  display: none;\n  // background-color: #aaaa;\n`\n\nconst SortSelect = ({sortMap, order}) => {\n\n  const { pathname, search } = useContext(LocationContext);\n  const newSearch = new URLSearchParams(search);\n\n  newSearch.set('order', order)\n  if (newSearch.has('page')) {\n    newSearch.delete('page')\n  }\n  \n  const url = `${pathname}?${newSearch}`\n\n  return (\n    <Link to={url}>\n      <Span>{sortMap[order]}</Span>\n    </Link>\n  )\n}\n\nconst SortMenu = () => {\n\n    let { search } = useContext(LocationContext);\n    search = new URLSearchParams(search);\n    const currentOrder = search.get('order');\n  \n    const sortMap = {\n      sold_desc: '熱門度優先', \n      price_desc: '價格 (高至低)', \n      price_asc: '價格 (低至高)',\n    };\n\n    const title = currentOrder ? sortMap[currentOrder] : sortMap.sold_desc\n  \n    useEffect(() => {\n      document.querySelector('#sort-menu').checked = false\n    }, [search])\n  \n    return (\n      <MenuContainer>\n        <Menu>\n          <label htmlFor=\"sort-menu\" />\n          <Span>{title}</Span>\n          <Btn><FontAwesomeIcon icon={faChevronDown}/></Btn>\n        </Menu>\n        <input id=\"sort-menu\" type=\"checkbox\" />\n        <Cover htmlFor=\"sort-menu\"/>\n        <SubMenu>\n          {Object.keys(sortMap).map(order => (\n            <li key={order}>\n              <SortSelect {...{sortMap, order}}/>\n            </li>\n          ))}\n        </SubMenu>\n      </MenuContainer>\n    )\n}\n\nexport const Sort = () => {\n  // console.log('Sort render')\n  return (\n      <>\n          <SortContainer>\n            <GalleryBtnGroup>\n              <GalleryBtn>\n                <label htmlFor=\"two-columns\">\n                  <FontAwesomeIcon icon={faThLarge}/>\n                </label>\n              </GalleryBtn>\n              <GalleryBtn>\n                <label htmlFor=\"three-columns\">\n                  <FontAwesomeIcon icon={faTh}/>\n                </label>\n              </GalleryBtn>\n              <GalleryBtn $four>\n                <label htmlFor=\"four-columns\">\n                  <FontAwesomeIcon icon={faAlignJustify} transform={{ rotate: 90 }}/>\n                </label>\n              </GalleryBtn>\n            </GalleryBtnGroup>\n            <SortMenu />\n          </SortContainer>\n          <GalleryRadio $two id=\"two-columns\" name=\"gallery\" type=\"radio\" />\n          <GalleryRadio $three id=\"three-columns\" name=\"gallery\" type=\"radio\" />\n          <GalleryRadio $four id=\"four-columns\" name=\"gallery\" type=\"radio\" />\n      </>\n  )\n}","import { Link } from \"react-router-dom\";\nimport { useContext, useRef } from \"react\";\nimport styled from \"styled-components\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\n\nimport { LocationContext } from \"./ListPage\";\n\nimport { MEDIA_QUERY } from \"../../constants/style\"\nimport { Span } from \"../../constants/style\"\n\n\n\nconst PageContainer = styled.div`\n  z-index: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  & button + button {\n    margin-left: 5px;\n  }\n`\n\nconst PageBtn = styled.button`\n  width: 30px;\n  height: 30px;\n  transition: .2s;\n  box-shadow: 1px 0px 5px ${props => props.theme.color.lightGrey}5;\n  background-color: ${props => props.$selected ? props.theme.color.lightGrey : props.theme.color.white};\n  &:hover {\n    background-color: ${props => props.theme.color.black};\n    & span, svg {\n      color: ${props => props.theme.color.white};\n    }\n  }\n  & svg {\n    margin: 0 auto;\n    font-size: ${props => props.theme.fontSize.body};\n    color: ${props => props.theme.color.black};\n    display: block;\n  }\n  & span {\n    font-weight: ${props => props.theme.fontWeight.xl};\n    color: ${props => props.$selected && props.theme.color.white};\n    display: block;\n  }\n`\n\nconst Result = styled.div`\n    ${MEDIA_QUERY.s} {\n        opacity: 0;\n    }\n`\n\nconst PageSelect = ({page}) => {\n\n    const { pathname, search } = useContext(LocationContext);\n    const newSearch = new URLSearchParams(search);\n    const currentPage = parseInt(newSearch.get('page')) || 1;\n\n    newSearch.set('page', page)\n    const selected = (currentPage === page) ? true : false\n\n    const url = `${pathname}?${newSearch}`\n\n    return (\n        <PageBtn $selected={selected}>\n            <Link to={url}><Span>{page}</Span></Link>\n        </PageBtn>\n    )\n}\n\nconst Page = ({page_count}) => {\n\n    const { pathname, search } = useContext(LocationContext);\n    const newSearch = new URLSearchParams(search);\n    const currentPage = parseInt(newSearch.get('page')) || 1;\n\n    let n = 1\n    const arr = []\n    while (n<=page_count){\n        arr.push(n)\n        n++\n    }\n  \n    if(currentPage !== arr[0]){\n        newSearch.set('page', currentPage-1)\n    }\n    if(currentPage !== arr[arr.length-1]){\n        newSearch.set('page', currentPage+1)\n    }\n\n    const url = `${pathname}?${newSearch}`\n\n    // const x = useRef(0)\n    return (\n        <PageContainer>\n            {/* {x.current++} */}\n            {(currentPage !== arr[0]) && (\n                <PageBtn>\n                    <Link to={url}>\n                        <FontAwesomeIcon icon={faChevronDown} transform={{ rotate: 90 }}/>\n                    </Link>\n                </PageBtn>\n            )}\n            {arr.map(page => (\n                <PageSelect \n                    key={page}\n                    page={page} \n                />\n            ))}\n            {(currentPage !== arr[arr.length-1]) && (\n                <PageBtn>\n                    <Link to={url}>\n                        <FontAwesomeIcon icon={faChevronDown} transform={{ rotate: -90 }}/>\n                    </Link>\n                </PageBtn>\n            )}\n        </PageContainer>\n    )\n}\n\nexport const Pagination = ({products}) => {\n\n    // console.log('Pagination render')\n\n    const { count, per_page, page, page_count } = products;\n\n    const number_start = (page - 1) * per_page + 1\n    const number_end = (page === page_count) ? (\n        number_start + count - (page - 1) * per_page - 1\n    ) : (\n        number_start + per_page - 1\n    )\n\n    // const x = useRef(0)\n\n    return (\n        <>\n            {/* {x.current++} */}\n            <Result>\n                <p>{number_start} ~ {number_end}，共 {count} 筆資料</p>\n            </Result>\n            <Page {...{page_count}} />\n        </>\n    )\n}","import styled from \"styled-components\"\nimport { useEffect, useContext } from \"react\";\n\nimport { useSelector, useDispatch } from 'react-redux'\nimport { getProducts, setProducts } from \"../../features/product/productSlice\";\n\nimport { P, H4 } from \"../../constants/style\"\nimport { MEDIA_QUERY } from \"../../constants/style\"\n\nimport { ProductItem } from \"../../components/ProductItem\";\n\nimport { Pagination } from \"./Pagination\";\nimport { LocationContext } from \"./ListPage\";\n\nconst ProductContainer = styled.div`\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  text-align: center;\n  & > section {\n    width: calc(100%/4);\n    ${MEDIA_QUERY.l} {\n      width: calc(100%/3);\n    }\n    ${MEDIA_QUERY.m} {\n      width: 50%;\n    }\n    ${MEDIA_QUERY.xs} {\n      width: 100%;\n    }\n  }\n  & > p {\n    margin: 0 auto;\n    padding: 20px;\n  }\n  & > h4 {\n    margin: 0 auto;\n    padding: 40px 0;\n  }\n`\n\nconst IndexContainer = styled.div`\n\n  height: 55px;\n  box-sizing: border-box;\n\n  margin: 0 10px;\n  padding: 10px 15px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: ${props => props.theme.color.lightGrey}3;\n`\n\nexport const ProductList = () => {\n\n  const { pathname, search } = useContext(LocationContext);\n\n  const products = useSelector(state => state.product.products)\n  const error = useSelector(state => state.product.error)\n  const dispatch = useDispatch()\n\n  useEffect(() => {    \n    window.scrollTo(0, 0);\n    const newSearch = new URLSearchParams(search);\n    if(!newSearch.has('page')){\n      newSearch.set('page', 1)\n    }\n    const pathArr = pathname.split('/').slice(2, 4)\n    dispatch(getProducts(pathArr, `?${newSearch}`))\n    return () => {\n      dispatch(setProducts(''))\n    }\n  }, [pathname, search, dispatch])\n  \n  return (\n    <>\n      <ProductContainer>\n        {!products && (\n          error ? (\n            <P>{error}</P>\n          ) : (\n            <H4>商品載入中...</H4>\n          )\n        )}\n        {products && !error && ( \n          products.rows.length > 0 ? (\n            products.rows.map(product => (\n              <ProductItem key={product.id} product={product} />\n            ))\n          ) : (\n            <H4>查無商品</H4>\n          )\n        )}\n      </ProductContainer>\n      <IndexContainer>\n        {products && (\n          <Pagination {...{products}} />\n        )}\n      </IndexContainer>\n    </>\n  )\n}","import styled from \"styled-components\"\nimport { Link } from \"react-router-dom\";\n\nimport { useSelector } from \"react-redux\";\nimport useProduct from \"../../hooks/useProduct\"\n\nimport { MEDIA_QUERY } from \"../../constants/style\";\nimport { H4, P, Span } from \"../../constants/style\"\n\n\nconst PopupItem = styled.div`\n    display: flex;\n    & > div {\n        padding: 20px;\n        width: 50%;\n        & img {\n            width: 100%;\n        }\n    }\n    ${MEDIA_QUERY.s} {\n        display: block;\n        & > div {\n            padding: 10px 0;\n            margin: 0 auto;\n            width: 80%;\n        }\n    }\n`\n\nconst PopupBtnGroup = styled.div`\n  text-align: center;\n  padding: 10px 0 20px;\n  & a {\n    margin-left: 5px;\n  }\n`\nconst PopupBtn = styled.button`\n  padding: 5px 15px;\n  border-radius: .25em;\n  border: 1px solid ${props => props.$checked ? props.theme.color.black : props.theme.color.lightGrey};\n  transition: .4s;\n  background-color: ${props => props.$checked ? props.theme.color.black : props.theme.color.white};\n  & span {\n    font-size: ${props => props.theme.fontSize.bodyLarge};\n    font-weight: ${props => props.theme.fontWeight.l};\n    color: ${props => props.$checked ? props.theme.color.white : props.theme.color.black};\n  }\n  &:hover {\n    background-color: ${props => props.theme.color.black};\n    border-color: ${props => props.theme.color.black};\n    & span {\n      color: ${props => props.theme.color.white};\n    }\n  }\n`\n\n\nexport const CartPopup = () => {\n\n  const product = useSelector(state => state.product.product)\n  const spec = useSelector(state => state.product.spec)\n\n  const mainImg = product.product.Images.find(img => img.is_main)\n  const price = product.product.is_sale ? product.product.price_sale : product.product.price_standard\n  \n  const {\n    handleClosePopup\n  } = useProduct()\n\n  return (\n    <>\n      <PopupItem>\n          <div>\n            <img src={mainImg.src} alt={mainImg.alt}/>\n          </div>\n          <div>\n            <H4>{product.product.name}</H4>\n            <P>價格: {price}</P>\n            <P>尺寸: {spec.size}, 顏色: {spec.color}</P>\n            <P>數量: {spec.qty}</P>\n          </div>\n      </PopupItem>\n      <PopupBtnGroup>\n        <PopupBtn onClick={handleClosePopup()}>\n          <Span>繼續選購</Span>\n        </PopupBtn>\n        <Link to=\"/cart\" onClick={handleClosePopup()}>\n          <PopupBtn>\n            <Span>前往結帳</Span>\n          </PopupBtn>\n        </Link>\n      </PopupBtnGroup>\n    </>\n  )\n}","import styled from \"styled-components\"\nimport { Link } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\n\nimport { P, Span } from \"../constants/style\"\n\n\nconst PopupContent = styled.div`\n    display: flex;\n    justify-content: space-between;\n    & a {\n        text-decoration: underline ${props => props.theme.color.black};\n    }\n    & span {\n        font-weight: ${props => props.theme.fontWeight.xl}\n    }\n`\n\nexport const LoginPopup = () => {\n\n    const popupCode = useSelector(state => state.general.popupCode)\n  \n    return (\n        <>\n            {popupCode === 'login' && (\n                <PopupContent>\n                    <P>請先登入！</P>\n                    <Link to=\"/\">\n                        <Span>點我登入</Span>\n                    </Link>\n                </PopupContent>\n            )}\n        </>\n    )\n}","import { useEffect, useState } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { sizeMap } from \"../constants/mapping\";\nimport { setErrorMessage } from \"../features/general/generalSlice\";\nimport { addProductAPI, searchProductAPI, updateProductAPI } from \"../webAPI/productAPI\"\n\n\nexport default function useAdminProduct ({step, setStep, productToAdd, setProductToAdd, top}) {\n\n    const history = useHistory();\n\n    const [name, setName] = useState('')\n    const [gender, setGender] = useState('')\n    const [category, setCategory] = useState('')\n    const [desc, setDesc] = useState('')\n    const [material, setMaterial] = useState('')\n    const [washing, setWashing] = useState('')\n    const [images, setImages] = useState(Array(4).fill({src: ''}))\n\n    const [sizes, setSizes] = useState([])\n    const [colors, setColors] = useState([])\n    \n    const [patterns, setPatterns] = useState([])\n    const [isOn, setIsOn] = useState(false)\n    const [isSale, setIsSale] = useState(false)\n    const [priceStandard, setPriceStandard] = useState(0)\n    const [priceSale, setPriceSale] = useState(0)\n\n    const product = useSelector(state => state.product.product)\n    const errorMessage = useSelector(state => state.general.errorMessage)\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        if(!product) return\n        setName(product.product.name)\n        setGender(product.product.gender)\n        setCategory(product.product.Category.name)\n        setDesc(product.product.desc)\n        setMaterial(product.product.material)\n        setWashing(product.product.washing)\n        setImages(Array(4).fill({src: ''}).map((image, i) => product.product.Images[i] ? {...image, id: product.product.Images[i].id, src: product.product.Images[i].src} : image))\n        setSizes(product.product[product.product.Category.group].map(size => size.waist ? {...size, waist: size.waist.split('~')} : size))\n        setColors(product.product.Colors)\n    }, [product])\n\n\n    const handleInputChange = e => {\n        switch (e.target.name) {\n            case 'name': {\n                if(errorMessage) dispatch(setErrorMessage(''))\n                return setName(e.target.value)\n            }\n            case 'gender': {\n                if(e.target.id === 'male') return setGender('M')\n                if(e.target.id === 'female') return setGender('F')\n                break\n            }\n            case 'category': return setCategory(e.target.value)\n            case 'desc': return setDesc(e.target.value)\n            case 'material': return setMaterial(e.target.value)\n            case 'washing': return setWashing(e.target.value)\n            case 'image': {\n                return setImages(images.map((image, index) => index === parseInt(e.target.id.slice(-1)) ? {...image, src: e.target.value} : image))\n            }\n            case 'size': {\n                if(e.target.id.includes('size') && errorMessage === '尺碼不可重複') dispatch(setErrorMessage(''))\n                if(e.target.id.includes('waist')){\n                    return setSizes(sizes.map((size, i) => i === parseInt(e.target.id.slice(-1)) ? {...size, waist: size.waist.map((a, i) => i === parseInt(e.target.id.split('_')[1]) ? e.target.value : a)} : size))\n                }\n                return setSizes(sizes.map((size, i) => i === parseInt(e.target.id.slice(-1)) ? {...size, [e.target.id.slice(0, -2)]: e.target.value.toUpperCase()} : size))\n            }\n            case 'color': {\n                if(e.target.id.includes('name') && errorMessage === '名稱不可重複') dispatch(setErrorMessage(''))\n                return setColors(colors.map((color, i) => i === parseInt(e.target.id.slice(-1)) ? {...color, [e.target.id.split('_')[0]]: e.target.value.toLowerCase()} : color))\n            }\n            case 'pattern': {\n                return setPatterns(patterns.map((pattern, i) => i === parseInt(e.target.id.slice(-1)) ? {...pattern, [e.target.id.split('_')[0]]: e.target.value} : pattern))\n            }\n            case 'is_on': return setIsOn(e.target.checked)\n            case 'is_sale': return setIsSale(e.target.checked)\n            case 'price_standard': return setPriceStandard(e.target.value)\n            case 'price_sale': return setPriceSale(e.target.value)\n            default: break\n        }\n    }\n\n    const handleSetStep = e => {\n        switch (step) {\n            case 1: {\n                window.scrollTo(0, 0)\n                if(!name || !gender || !category || !images[0].src) return; \n                return searchProductAPI([['name', name]]).then(result => {\n                    if(result.ok) return dispatch(setErrorMessage('商品名稱重複'))\n                    saveProduct()\n                    setStep(step+1)\n                })\n            }\n            case 2: {\n                if(e.target.name === 'next'){\n                    if(saveProduct()){\n                        setStep(step+1)\n                        window.scrollTo(0, 400)\n                    }else{\n                        window.scrollTo(0, 0)\n                    }\n                }\n                if(e.target.name === 'back') {\n                    setProductToAdd('')\n                    setStep(step-1)\n                    window.scrollTo(0, 0)\n                    setSizes([])\n                }\n                break\n            }\n            case 3: {\n                const lastProduct = {...productToAdd}\n                delete lastProduct.sizes\n                delete lastProduct.colors\n                setProductToAdd(lastProduct)\n                setStep(step-1)\n                return window.scrollTo(0, 0)\n            }\n            default: break\n        }\n    }\n\n    const handleFormSubmit = e => {\n        e.preventDefault()\n        switch (e.target.id) {\n            case 'edit': {\n                const group = product.product.Category.group.slice(0, -1)\n                return checkForm() ? (\n                    updateProductAPI(product.product.id, {\n                        name, \n                        gender, \n                        category, \n                        desc, \n                        material, \n                        washing, \n                        images, \n                        sizes, \n                        colors, \n                        group\n                    }).then(result => {\n                        if (!result.ok) {\n                            dispatch(setErrorMessage(result.message))\n                            return top.current.scrollIntoView();\n                        }\n                        dispatch(setErrorMessage(''))\n                        alert('更新成功!')\n                        history.go()\n                    })\n                ) : (\n                    top.current.scrollIntoView()\n                )\n            }\n            case 'addThird': {\n                console.log(productToAdd)\n                return saveProduct() && addProductAPI(productToAdd)\n                .then(result => {\n                    if (!result.ok) {\n                        const lastProduct = {...productToAdd}\n                        if(step === 3){\n                            delete lastProduct.patterns\n                            delete lastProduct.is_on\n                            delete lastProduct.is_sale\n                            delete lastProduct.price_standard\n                            delete lastProduct.price_sale\n                        }\n                        setProductToAdd(lastProduct)\n                        alert(result.message)\n                        return window.scrollTo(0, 0)\n                    }\n                    setProductToAdd('')\n                    dispatch(setErrorMessage(''))\n                    alert('新增成功!')\n                    history.push('/admin/product/information')\n                })\n            }\n            default: break\n        }\n    }\n\n    function checkForm () {\n        if(!sizes.every(size => size.size) || !colors.every(color => color.name)) return false\n        if(new Set(sizes.map(size => size.size)).size !== sizes.length){\n            dispatch(setErrorMessage('尺碼不可重複'))\n            return false\n        }\n        if(new Set(colors.map(color => color.name)).size !== colors.length){\n            dispatch(setErrorMessage('名稱不可重複'))\n            return false\n        }\n        return true\n    }\n\n    function saveProduct () {\n        switch (step) {\n            case 1: {\n                return setProductToAdd({\n                    ...productToAdd,\n                    name, gender, category, desc, material, washing, \n                    images: images\n                        .filter(image => image.src)\n                        .map((image, index) => image.src && ({\n                            src: image.src,\n                            alt: `${name}_0${index+1}`\n                        })),\n                    group: ['tops', 'shirts', 'knit', 'one_piece', 'outer'].includes(category) ? 'Size_top' : category === 'bottoms' ? 'Size_bottom' : category === 'skirts' ? 'Size_skirt' : 'Size_general'\n                })\n            }\n            case 2: {\n                if(checkForm()){\n                    setProductToAdd({\n                        ...productToAdd,\n                        sizes, colors\n                    })\n                    return true\n                }else{\n                    return false\n                }\n            }\n            case 3: {\n                setProductToAdd({\n                    ...productToAdd,\n                    patterns,\n                    is_on: isOn,\n                    is_sale: isSale,\n                    price_standard: priceStandard,\n                    price_sale: priceSale\n                })\n                return true\n            }\n            default: break\n        }\n    }\n\n    const handleAddPattern = group => e => {\n        switch (e.target.name) {\n            case 'size': {\n                if(errorMessage === '尺碼不可重複') dispatch(setErrorMessage(''))\n                const obj = {size: ''}\n                Object.keys(sizeMap[group]).map(ele => (\n                    obj[ele] = (ele === 'waist' ? [0, 0] : 0)\n                ))\n                return setSizes([...sizes, obj])\n            }\n            case 'color': {\n                if(errorMessage === '名稱不可重複') dispatch(setErrorMessage(''))\n                return setColors([...colors, {name: '', code: '#000000'}])\n            }\n            default: break\n        }\n    }\n\n    const handleDeletePattern = index => e => {\n        switch (e.currentTarget.name) {\n            case 'size': {\n                if(sizes.length === 1) return\n                if(errorMessage === '尺碼不可重複') dispatch(setErrorMessage(''))\n                return setSizes(sizes.filter((size, i) => i !== index))\n            }\n            case 'color': {\n                if(colors.length === 1) return\n                if(errorMessage === '名稱不可重複') dispatch(setErrorMessage(''))\n                return setColors(colors.filter((size, i) => i !== index))\n            }\n            default: break\n        }\n    }\n\n    return {\n        name, \n        gender, \n        category, \n        desc, \n        material, \n        washing, \n        images, \n\n        sizes, \n        setSizes, \n        colors, \n        setColors, \n\n        patterns, \n        setPatterns, \n\n        isOn, \n        setIsOn, \n        isSale, \n        setIsSale, \n        priceStandard, \n        setPriceStandard, \n        priceSale, \n        setPriceSale, \n\n        handleInputChange, \n        handleSetStep, \n        handleFormSubmit, \n        checkForm, \n        saveProduct, \n        handleAddPattern, \n        handleDeletePattern, \n    }\n}","import { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\n\nimport { sizeMap } from \"../../../constants/mapping\"\nimport { P, fontTheme, TextBtn, Btn } from \"../../../constants/style\";\n\nimport useAdminProduct from \"../../../hooks/useAdminProduct\";\n\n\nconst StepContainer = styled.div`\n    border: 1px solid #aaa8;\n    border-radius: .5em;\n    background-color: #eee;\n    ${props => !props.$active && 'opacity: 0.5;'}\n    transition: .5s;\n    padding: 10px;\n`\n\nconst FirstStepContainer = styled(StepContainer)``\nconst SecondStepContainer = styled(StepContainer)`\n    margin-bottom: 20px;\n    max-height: ${props => props.$step >= 2 || props.$step === 0 ? '1000px' : '80px'};\n    overflow: hidden;\n    transition: 1s;\n`\nconst ThirdStepContainer = styled(StepContainer)`\n    max-height: ${props => props.$step >= 3 || props.$step === 0 ? '1000px' : '80px'};\n    overflow: hidden;\n    transition: 1s;\n`\n\nconst MainContainer = styled.main`\n    width: 70%;\n    flex-grow: 1;\n    display: flex;\n    & > div {\n        width: 50%;\n        padding: 10px;\n    }\n`\n\nconst LeftContainer = styled.div``\nconst RightContainer = styled.div``\n\n\nconst FlowNode = styled.div`\n    ${fontTheme.span};\n    margin-right: 10px;\n    background-color: ${props => props.theme.color.lightGrey};\n    color: ${props => props.theme.color.white};\n    min-width: 60px;\n    min-height: 60px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n    & > p {\n        ${fontTheme.h4}\n    }\n`\n\nconst FlowText = styled.div`\n    ${fontTheme.h4}\n    padding-right: 10px;\n    color: ${props => props.theme.color.lightGrey};\n    min-width: ${props => props.$fixed && '108px'};\n`\n\nconst FlowContent = styled.li`\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n    padding: 10px;\n    position: relative;\n    & + li::before {\n        content: '>';\n        position: absolute;\n        left: -10px;\n        ${fontTheme.h3}\n        color: ${props => props.theme.color.lightGrey};\n    }\n    ${FlowNode} {\n        background-color: ${props => props.$active && props.theme.color.black};\n    }\n    ${FlowText} {\n        color: ${props => props.$active && props.theme.color.black};\n    }\n`\n\nconst InputBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    padding: 0px 10px 10px;\n    ${fontTheme.p}\n    position: relative;\n    & label {\n        line-height: 2em;\n    }\n    & input, select, textarea {\n        ${fontTheme.span}\n        padding: 3px 8px;\n        &:invalid {\n            border: 2px solid red;\n            & ~ span {\n                &::before {\n                    ${fontTheme.span}\n                    color: ${props => props.theme.color.alert};\n                    content: '這是必填欄位';\n                }\n            }\n        }\n    }\n    & > input, > select, > textarea {\n        margin: 0 5px;\n    }\n    & span {\n        position: absolute;\n        top: 10px;\n        right: 15px;\n        ${fontTheme.span}\n        color: ${props => props.theme.color.alert};\n    }\n`\n\nconst BtnContainer = styled.div`\n    display: flex;\n    justify-content: flex-end;\n    padding: 20px 10px 10px;\n    & > button {\n        margin: 0px 5px;\n    }\n`\n\nconst UploadBtn = styled(TextBtn)`\n    ${fontTheme.h5}\n    font-weight: ${props => props.theme.fontWeight.m};\n    padding: 3px 8px;\n`\n\nconst ImgInput = styled.div`\n    display: flex;\n    align-items: center;\n    margin: 0 5px;\n    & + div {\n        margin-top: 5px;\n    }\n    & input {\n        flex-grow: 9.5;\n        font-size: ${props => props.theme.fontSize.bodySmall};\n    }\n    & button {\n        flex-grow: 0.5;\n        margin-left: 5px;\n    }\n`\n\nconst CheckInput = styled.div`\n    & input {\n        margin: 0 5px;\n        & ~ input {\n            margin-left: 10px;\n        }\n    }\n`\n\nconst InputTitle = styled.div`\n    margin-left: 0;\n    display: flex;\n    align-items: center;\n    & > button {\n        margin-left: 10px;\n    }\n`\n\nconst SizeInput = styled.div`\n    display: flex;\n    flex-wrap: wrap;\n    & input {\n        margin: 0 5px;\n        width: 40px;\n    }\n    align-items: baseline;\n    margin: 5px 5px 0;\n    & > div {\n        // flex-grow: 1;\n        display: flex;\n        & > input {\n            // flex-grow: 1;\n        }\n    }\n    & > button {\n        margin: 5px 5px 0;\n        & svg {\n            font-size: ${props => props.theme.fontSize.h4};\n        }\n    }\n`\n\nconst ColorInput = styled.div`\n    display: flex;\n    & input {\n        margin: 0 5px;\n    }\n    & > div {\n        display: flex;\n        align-items: baseline;\n        margin: 5px 5px 0;\n        flex-grow: 1;\n        & > input {\n            flex-grow: 1;\n        }\n    }\n    & > button {\n        margin: 5px 5px 0;\n        & svg {\n            font-size: ${props => props.theme.fontSize.h4};\n        }\n    }\n`\n\nconst PatternInput = styled.div`\n    margin: 0 5px;\n    & input {\n        margin: 0 5px;\n        width: 40px;\n    }\n    & + div {\n        margin-top: 5px;\n    }\n`\n\nconst PriceInput = styled.div`\n    margin: 0 5px;\n    & input {\n        margin: 0 5px;\n        width: 60px;\n    }\n`\n\nexport const FirstStepInputs = ({step, name, gender, category, desc, material, washing, images, error, handleInputChange}) => {\n\n    const errorMessage = useSelector(state => state.general.errorMessage)\n\n    return (\n        <>\n            <InputBlock>\n                <label htmlFor=\"name\">品名</label>\n                <input\n                    value={name}\n                    onChange={handleInputChange}\n                    type=\"text\"\n                    name=\"name\"\n                    id=\"name\"\n                    disabled={step > 1}\n                    required\n                />\n                <span>{errorMessage === '商品名稱重複' && errorMessage}</span>\n            </InputBlock>\n            <InputBlock>\n                <label>性別</label>\n                <CheckInput>\n                    <input\n                        checked={gender === 'M'}\n                        onChange={handleInputChange}\n                        type=\"radio\"\n                        name=\"gender\"\n                        id=\"male\"\n                        disabled={step > 1}\n                        required\n                    />\n                    <label htmlFor=\"male\">男裝</label>\n                    <input\n                        checked={gender === 'F'}\n                        onChange={handleInputChange}\n                        type=\"radio\"\n                        name=\"gender\"\n                        id=\"female\"\n                        disabled={step > 1}\n                        required\n                    />\n                    <label htmlFor=\"female\">女裝</label>\n                    <span></span>\n                </CheckInput>\n            </InputBlock>\n            <InputBlock>\n                <label htmlFor=\"category\">分類</label>\n                <select\n                    value={category}\n                    onChange={handleInputChange}\n                    name=\"category\"\n                    id=\"category\"\n                    disabled={step !== 1}\n                    required pattern=\".\"\n                >\n                    <option value=\"\">-----</option>\n                    <option value=\"tops\">上衣類</option>\n                    <option value=\"shirts\">襯衫類</option>\n                    <option value=\"knit\">針織衫 / 毛衣</option>\n                    <option value=\"one_piece\">洋裝類</option>\n                    <option value=\"outer\">外套類</option>\n                    <option value=\"bottoms\">褲裝類</option>\n                    <option value=\"skirts\">裙子類</option>\n                    <option value=\"general\">配件類</option>\n                </select>\n                <span></span>\n            </InputBlock>\n            <InputBlock>\n                <label htmlFor=\"desc\">簡介</label>\n                <textarea\n                    value={desc}\n                    onChange={handleInputChange}\n                    name=\"desc\"\n                    id=\"desc\"\n                    disabled={step > 1}\n                    rows=\"5\"\n                />\n            </InputBlock>\n            <InputBlock>\n                <label htmlFor=\"material\">材質</label>\n                <textarea\n                    value={material}\n                    onChange={handleInputChange}\n                    name=\"material\"\n                    id=\"material\"\n                    disabled={step > 1}\n                    rows=\"2\"\n                />\n            </InputBlock>\n            <InputBlock>\n                <label htmlFor=\"washing\">洗滌方式</label>\n                <textarea\n                    value={washing}\n                    onChange={handleInputChange}\n                    name=\"washing\"\n                    id=\"washing\"\n                    disabled={step > 1}\n                    rows=\"4\"\n                />\n            </InputBlock>\n            <InputBlock>\n                <label htmlFor=\"image\">照片 (第一張為封面)</label>\n                {images.map((image, i) => (\n                    <ImgInput key={i}>\n                        <input\n                            value={image.src}\n                            placeholder={!i ? '(必填)' : '(選填)'}\n                            onChange={handleInputChange}\n                            type=\"text\"\n                            name=\"image\"\n                            id={`image_${i}`}\n                            disabled={step > 1}\n                            required={i === 0}\n                        />\n                        <UploadBtn $white $active={step === 1 || step === 0}>上傳照片</UploadBtn>\n                        <span></span>\n                    </ImgInput>\n                ))}\n            </InputBlock>\n        </>\n    )\n}\n\nconst FirstStep = ({step, setStep, productToAdd, setProductToAdd}) => {\n\n    const {\n        name, \n        gender, \n        category, \n        desc, \n        material, \n        washing, \n        images, \n        handleInputChange, \n        handleSetStep, \n    } = useAdminProduct({step, setStep, productToAdd, setProductToAdd})\n\n\n    return (\n        <FirstStepContainer $active={step === 1}>\n            <FlowContent $active>\n                <FlowNode>\n                    Step\n                    <p>01</p>\n                </FlowNode>\n                <FlowText $fixed>\n                    產品基本資料\n                </FlowText>\n            </FlowContent>\n            <form>\n                <FirstStepInputs {...{step, name, gender, category, desc, material, washing, images, handleInputChange}} />\n                <BtnContainer>\n                    <TextBtn type=\"button\" name=\"next\" onClick={handleSetStep} $active={step === 1} disabled={step !== 1}>下一步</TextBtn>\n                </BtnContainer>\n            </form>\n        </FirstStepContainer>        \n    )\n}\n\nexport const SecondStepInputs = ({step, group, sizes, colors, handleInputChange, handleAddPattern, handleDeletePattern, sizesLength, colorsLength}) => {\n\n    const errorMessage = useSelector(state => state.general.errorMessage)\n\n    return (\n        <>\n            <InputBlock>\n                <InputTitle>\n                    <label>尺寸</label>\n                    {group !== 'Size_general' && (\n                        <UploadBtn type=\"button\" onClick={handleAddPattern(group)} name=\"size\" $white $active={step === 2 || step === 0}>新增尺寸</UploadBtn>\n                    )}\n                </InputTitle>\n                    {sizes.length > 0 ? (\n                        group && sizeMap[group] ? (\n                            sizes.map((size, i) => (\n                                <SizeInput key={i}>\n                                    <div>\n                                        <label htmlFor={`size_${i}`}>尺碼:</label>\n                                        <input\n                                            value={size.size}\n                                            onChange={handleInputChange}\n                                            type=\"text\"\n                                            name=\"size\"\n                                            id={`size_${i}`}\n                                            size=\"2\"\n                                            disabled={step !== 2 && (sizesLength ? i < sizesLength : 1)}\n                                            required\n                                        />\n                                        <span>{errorMessage === '尺碼不可重複' && errorMessage}</span>\n                                    </div>\n                                    {Object\n                                        .entries(sizeMap[group])\n                                        .map((spec, j) => (\n                                            <div key={j}>\n                                                <label htmlFor={`${spec[0]}_${i}`}>{spec[1]}:</label>\n                                                {spec[0] === 'waist' ? (\n                                                    <>\n                                                        <input\n                                                            value={size[spec[0]][0]}\n                                                            onChange={handleInputChange}\n                                                            type=\"number\"\n                                                            name=\"size\"\n                                                            id={`${spec[0]}_0_${i}`}\n                                                            min=\"0\"\n                                                            disabled={step !== 2 && step !== 0}\n                                                        />~\n                                                        <input\n                                                            value={size[spec[0]][1]}\n                                                            onChange={handleInputChange}\n                                                            type=\"number\"\n                                                            name=\"size\"\n                                                            id={`${spec[0]}_1_${i}`}\n                                                            min=\"0\"\n                                                            disabled={step !== 2 && step !== 0}\n                                                        />\n                                                    </>\n                                                ) : (\n                                                    <input\n                                                        value={size[spec[0]]}\n                                                        onChange={handleInputChange}\n                                                        type=\"number\"\n                                                        name=\"size\"\n                                                        id={`${spec[0]}_${i}`}\n                                                        min=\"0\"\n                                                        disabled={step !== 2 && step !== 0}\n                                                    />\n                                                )}\n                                            </div>\n                                        ))\n                                    }\n                                    <Btn \n                                        onClick={handleDeletePattern(i)} \n                                        type=\"button\" \n                                        name=\"size\"\n                                        disabled={step !== 2 && (sizesLength ? i < sizesLength : 1)}\n                                    >\n                                        <FontAwesomeIcon icon={faTimes} />\n                                    </Btn>\n                                </SizeInput>\n                        ))) : (\n                            <P>單一尺寸</P>\n                        )\n                    ) : (\n                        <>\n                            {Array(2).fill('').map(() => (\n                                <SizeInput>\n                                    <div>\n                                        <label>尺碼:</label>\n                                        <input\n                                            type=\"text\"\n                                            name=\"size\"\n                                            size=\"2\"\n                                            disabled\n                                            required\n                                        />\n                                    </div>\n                                </SizeInput>\n                            ))}\n                        </>\n                    )}\n            </InputBlock>\n            <InputBlock>\n                <InputTitle>\n                    <label>顏色</label>\n                    <UploadBtn type=\"button\" onClick={handleAddPattern()} name=\"color\" $white $active={step === 2 || step === 0}>新增顏色</UploadBtn>\n                </InputTitle>\n                {colors && colors.map((color, i) => (\n                    <ColorInput key={i}>\n                        <div>\n                            <label htmlFor={`name_${i}`}>名稱:</label>\n                            <input\n                                value={color.name}\n                                onChange={handleInputChange}\n                                type=\"text\"\n                                name=\"color\"\n                                id={`name_${i}`}\n                                size=\"10\"\n                                disabled={step !== 2 && (colorsLength ? i < colorsLength : 1)}\n                                required\n                            />\n                            <span>{errorMessage === '名稱不可重複' && errorMessage}</span>\n                        </div>\n                        <div>\n                            <label htmlFor={`code_${i}`}>色碼:</label>\n                            <input\n                                value={color.code}\n                                onChange={handleInputChange}\n                                type=\"color\"\n                                name=\"color\"\n                                id={`code_${i}`}\n                                disabled={step !== 2 && step !== 0}\n                            />\n                        </div>\n                        <Btn \n                            onClick={handleDeletePattern(i)} \n                            type=\"button\" \n                            name=\"color\"\n                            disabled={step !== 2 && (colorsLength ? i < colorsLength : 1)}\n                        >\n                            <FontAwesomeIcon icon={faTimes} />\n                        </Btn>\n                    </ColorInput>\n                ))}\n            </InputBlock>\n        </>\n    )\n}\n\nconst SecondStep = ({step, setStep, productToAdd, setProductToAdd}) => {\n\n    const {\n        sizes, \n        setSizes, \n        colors, \n        setColors, \n        error, \n        handleInputChange, \n        handleSetStep, \n        handleFormSubmit, \n        handleAddPattern, \n        handleDeletePattern, \n    } = useAdminProduct({step, setStep, productToAdd, setProductToAdd})\n\n\n    useEffect(() => {\n        if(step !== 2) return;\n        if(productToAdd.group === 'Size_general'){\n            setSizes([{size: 'one'}])\n        } else {\n            let arr = Array(2).fill({size: ''})\n            Object.keys(sizeMap[productToAdd.group]).map(ele => (\n                arr.map(a => a[ele] = (ele === 'waist' ? [0, 0] : 0))\n            ))\n            setSizes(arr)\n        }\n        setColors(Array(2).fill({name: '', code: '#000000'}))\n    }, [productToAdd.group, step, setSizes, setColors])\n\n\n    return (\n        <SecondStepContainer $active={step === 2} $step={step}>\n            <FlowContent $active>\n                <FlowNode>\n                    Step\n                    <p>02</p>\n                </FlowNode>\n                <FlowText $fixed>\n                    設定尺寸及顏色\n                </FlowText>\n            </FlowContent>\n            {/* {productToAdd.group && ( */}\n                <form id=\"addSecond\" onSubmit={handleFormSubmit}>\n                    <SecondStepInputs \n                        step={step}\n                        group={productToAdd.group || null}\n                        sizes={sizes}\n                        colors={colors}\n                        error={error}\n                        handleInputChange={handleInputChange}\n                        handleAddPattern={handleAddPattern}\n                        handleDeletePattern={handleDeletePattern}\n                    />\n                    <BtnContainer>\n                        <TextBtn type=\"button\" name=\"back\" onClick={handleSetStep} $active={step === 2} disabled={step !== 2}>上一步</TextBtn>\n                        <TextBtn type=\"button\" name=\"next\" onClick={handleSetStep} $active={step === 2} disabled={step !== 2}>下一步</TextBtn>\n                        <TextBtn type=\"submit\" $active={step === 2} disabled={step !== 2}>略過並儲存</TextBtn>\n                    </BtnContainer>\n                </form>\n            {/* )} */}\n        </SecondStepContainer>        \n    )\n}\n\nconst ThirdStepInputs = ({step, patterns, isOn, isSale, priceStandard, priceSale, handleInputChange}) => {\n    return (\n        <>\n            <InputBlock>\n                <label>存貨數量</label>\n                {patterns && patterns.map((pattern, i) => (\n                    <PatternInput key={i}>\n                        尺寸: {pattern.size}, 顏色: {pattern.color},\n                        <label htmlFor={`total_${i}`}> 數量:</label>\n                        <input\n                            value={pattern.total}\n                            onChange={handleInputChange}\n                            type=\"number\"\n                            name=\"pattern\"\n                            id={`total_${i}`}\n                            min=\"0\"\n                            disabled={step !== 3}\n                        />\n                    </PatternInput>\n                ))}\n            </InputBlock>\n            <InputBlock>\n                <label>商品價格</label>\n                <CheckInput>\n                    <input\n                        checked={isOn}\n                        onChange={handleInputChange}\n                        type=\"checkbox\"\n                        name=\"is_on\"\n                        id=\"is_on\"\n                        disabled={step !== 3}\n                    />\n                    <label htmlFor=\"is_on\">上架中</label>\n                    <input\n                        value={isSale}\n                        onChange={handleInputChange}\n                        type=\"checkbox\"\n                        name=\"is_sale\"\n                        id=\"is_sale\"\n                        disabled={step !== 3}\n                    />\n                    <label htmlFor=\"is_sale\">特價中</label>\n                </CheckInput>\n                <PriceInput>\n                        <label htmlFor=\"price_standard\">原價:</label>\n                        <input\n                            value={priceStandard}\n                            onChange={handleInputChange}\n                            type=\"number\"\n                            name=\"price_standard\"\n                            id=\"price_standard\"\n                            min=\"0\"\n                            disabled={step !== 3}\n                        />\n                        <label htmlFor=\"price_standard\">特價:</label>\n                        <input\n                            value={priceSale}\n                            onChange={handleInputChange}\n                            type=\"number\"\n                            name=\"price_sale\"\n                            id=\"price_sale\"\n                            min=\"0\"\n                            disabled={step !== 3}\n                        />\n                </PriceInput>\n            </InputBlock>\n        </>\n    )\n}\n\nconst ThirdStep = ({step, setStep, productToAdd, setProductToAdd}) => {\n\n    const {\n        patterns, \n        setPatterns, \n        isOn, \n        setIsOn, \n        isSale, \n        setIsSale, \n        priceStandard, \n        setPriceStandard, \n        priceSale, \n        setPriceSale, \n        handleInputChange, \n        handleSetStep, \n        handleFormSubmit, \n        saveProduct, \n    } = useAdminProduct({step, setStep, productToAdd, setProductToAdd})\n\n\n    useEffect(() => {\n        if(step !== 3) return;\n        if(!productToAdd.sizes || !productToAdd.colors) return;\n        let arr = [];\n        productToAdd.sizes.map(size => productToAdd.colors.map(color => (\n            arr.push({size: size.size, color: color.name, total: 0})\n        )))\n        setPatterns(arr)\n        setIsOn(false)\n        setIsSale(false)\n        setPriceStandard(0)\n        setPriceSale(0)\n    }, [step, productToAdd, setPatterns, setIsOn, setIsSale, setPriceStandard, setPriceSale])\n\n\n    return (\n        <ThirdStepContainer $active={step === 3} $step={step}>\n            <FlowContent $active>\n                <FlowNode>\n                    Step\n                    <p>03</p>\n                </FlowNode>\n                <FlowText $fixed>\n                    存貨數量及商品價格\n                </FlowText>\n            </FlowContent>\n            {patterns.length > 0 && (\n                <form id=\"addThird\" onSubmit={handleFormSubmit}>\n                    <ThirdStepInputs {...{step, patterns, isOn, isSale, priceStandard, priceSale, handleInputChange}} />\n                    <BtnContainer>\n                        <TextBtn type=\"button\" name=\"back\" onClick={handleSetStep} $active={step === 3} disabled={step !== 3}>上一步</TextBtn>\n                        <TextBtn type=\"submit\" $active={step === 3} disabled={step !== 3}>略過並儲存</TextBtn>\n                        <TextBtn onClick={saveProduct} type=\"submit\" $active={step === 3} disabled={step !== 3}>送出</TextBtn>\n                    </BtnContainer>\n                </form>\n            )}\n        </ThirdStepContainer>\n    )\n}\n\nexport default function AddProduct () {\n\n    const history = useHistory()\n\n    const [step, setStep] = useState(1)\n    const [productToAdd, setProductToAdd] = useState('')\n\n    useEffect(() => {\n        const unblock = history.block(() => {\n            return window.confirm(\"目前的資料尚未被儲存, 是否要離開?\");\n        });\n    \n        return () => {\n            unblock();\n        };\n    })\n\n    return (\n        <MainContainer>\n            <LeftContainer>\n                <FirstStep {...{step, setStep, productToAdd, setProductToAdd}} />\n            </LeftContainer>\n            <RightContainer>\n                <SecondStep {...{step, setStep, productToAdd, setProductToAdd}} />\n                <ThirdStep {...{step, setStep, productToAdd, setProductToAdd}} />\n            </RightContainer>\n        </MainContainer>\n    )\n}","import { useRef } from \"react\"\nimport { Link, useHistory } from \"react-router-dom\"\nimport { useSelector } from \"react-redux\"\nimport styled from \"styled-components\"\n\nimport { sizeMap } from \"../../../constants/mapping\"\nimport { fontTheme, H4, P, TextBtn } from \"../../../constants/style\"\n\nimport useAdminProduct from \"../../../hooks/useAdminProduct\"\nimport useProduct from \"../../../hooks/useProduct\"\n\nimport { deleteProductAPI } from \"../../../webAPI/productAPI\"\n\nimport { FirstStepInputs, SecondStepInputs } from \"./AddProduct\"\n\n\nconst TableContainer = styled.div`\n    padding: 10px;\n    & table {\n        width: 100%;\n        border: 1px solid ${props => props.theme.color.lightGrey};\n        & th, td {\n            ${fontTheme.span}\n            color: ${props => props.theme.color.black};\n            border-top: 1px solid ${props => props.theme.color.lightGrey};\n            border-bottom: 1px solid ${props => props.theme.color.lightGrey};\n        }\n        & tr {\n            vertical-align: top;\n            & th {\n                white-space: nowrap;\n                text-align: left;\n                padding: 5px 10px;\n                background-color: ${props => props.theme.color.lightGrey};\n                color: ${props => props.theme.color.white};\n                font-weight: ${props => props.theme.fontWeight.xl};\n            }\n            & td {\n                padding: 10px;\n            }\n        }\n    }\n`\n\nconst BtnContainer = styled.div`\n    display: flex;\n    justify-content: flex-end;\n    padding: 20px 10px 10px;\n    & > button {\n        margin: 0px 5px;\n    }\n`\n\nconst PopupContent = styled.div`\n    & h4 {\n        padding: 10px;\n        text-align: center;\n    }\n    & > div {\n        padding: 10px;\n        text-align: center;\n        & button {\n            margin: 5px;\n        }\n    }\n`\n\nexport const SizePopup = () => {\n\n    const product = useSelector(state => state.product.product)\n    const group = product ? product.product.Category.group : null;\n\n    return (\n        <TableContainer>\n            {product && group.slice(0, -1) === 'Size_general' ? (\n                <P>單一尺寸 One Size</P>\n            ) : (\n                <table>\n                    <thead>\n                        <tr>\n                            <th></th>\n                            {product ? (\n                                Object.keys(sizeMap[group.slice(0, -1)]).map((element, index) => {\n                                    const measure = element\n                                    .split('_')\n                                    .map(word => word[0].toUpperCase() + word.slice(1))\n                                    .join(' ')\n                                    return (\n                                        <th key={index}>\n                                            {measure}\n                                            <p>{sizeMap[group.slice(0, -1)][element]}</p>\n                                        </th>\n                                    )\n                            })) : null}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {product ? product.product[group].map(i => (\n                            <tr key={i.id}>\n                                <td>{i.size}</td>\n                                {Object.keys(sizeMap[group.slice(0, -1)]).map((j, index) => (\n                                    <td key={index}>\n                                        {i[j] ? `${i[j]}cm` : '-'}\n                                    </td>\n                                ))}\n                            </tr>\n                        )) : null}\n                    </tbody>\n                </table>\n            )}\n        </TableContainer>\n    )\n}\n\nexport const ColorPopup = () => {\n\n    const product = useSelector(state => state.product.product)\n\n    return (\n        <TableContainer>\n            <table>\n                <thead>\n                    <tr>\n                        <th>Color Name</th>\n                        <th>HEX Code</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {product ? product.product.Colors.map((color, i) => (\n                        <tr key={i}>\n                            <td>{color.name}</td>\n                            <td>{color.code}</td>\n                        </tr>\n                    )) : null}\n                </tbody>\n            </table>\n        </TableContainer>\n    )\n}\n\nexport const EditPopup = () => {\n\n    const product = useSelector(state => state.product.product)\n\n    const top = useRef()\n\n    const {\n        name, \n        gender, \n        category, \n        desc, \n        material, \n        washing, \n        images, \n        sizes, \n        colors, \n        handleInputChange, \n        handleAddPattern, \n        handleDeletePattern, \n        handleFormSubmit\n    } = useAdminProduct({top})\n\n\n    return (\n        <TableContainer ref={top}>\n            {product && product.product.Category.name === category && (\n                <form id=\"edit\" onSubmit={handleFormSubmit}>\n                    <FirstStepInputs \n                        step={0} \n                        name={name}\n                        gender={gender}\n                        category={category}\n                        desc={desc}\n                        material={material}\n                        washing={washing}\n                        images={images}\n                        handleInputChange={handleInputChange}\n                    />\n                    <SecondStepInputs \n                        step={0}\n                        sizes={sizes}\n                        colors={colors}\n                        handleInputChange={handleInputChange}\n                        handleAddPattern={handleAddPattern}\n                        handleDeletePattern={handleDeletePattern}\n                        group={product?.product.Category.group.slice(0, -1)}\n                        sizesLength={product.product[product.product.Category.group].length}\n                        colorsLength={product.product.Colors.length}\n                    />\n                    <BtnContainer>\n                        <TextBtn type=\"submit\" $active>送出</TextBtn>\n                    </BtnContainer>\n                </form>\n            )}\n        </TableContainer>\n    )\n}\n\nexport const DeletePopup = () => {\n\n    const history = useHistory()\n\n    const product = useSelector(state => state.product.product)\n\n    const { handleClosePopup } = useProduct()\n\n    const handleDeleteProduct = () => {\n        deleteProductAPI(product.product.id)\n        .then(() => history.go())\n    }\n  \n    return (\n        <PopupContent>\n            <H4>是否要刪除此商品？</H4>\n            <div>\n                <TextBtn onClick={handleClosePopup} $active>返回</TextBtn>\n                <Link to=\"#\" onClick={handleDeleteProduct}>\n                    <TextBtn $active>刪除</TextBtn>\n                </Link>\n            </div>\n        </PopupContent>\n    )\n}","import styled from \"styled-components\"\nimport { useSelector } from \"react-redux\";\n\nimport { Btn, H3 } from \"../constants/style\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheck, faTimes } from '@fortawesome/free-solid-svg-icons'\n\nimport useProduct from \"../hooks/useProduct\";\n\nimport { CartPopup } from \"../pages/ProductPage/CartPopup\";\nimport { LoginPopup } from \"./LoginPopup\"\nimport { SizePopup, ColorPopup, EditPopup, DeletePopup } from \"../pages/AdminPages/AdminProductPage/InfoPopup\";\n\n\nconst PopupCover = styled.div`\n    opacity: ${props => props.$isOpened ? '1' : '0'};\n    visibility: ${props => props.$isOpened ? 'visible' : 'hidden'};\n    transition: .2s;\n\n    background-color: rgba(0,0,0,0.5);\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 11;\n`\n\nconst PopupWrapper = styled.div`\n    width: 90%;\n    height: 100%;\n    margin: auto;\n    position: relative;\n    & > label {\n        background-color: transparent;\n        position: fixed;\n        top: 0;\n        bottom: 0;\n        right: 0;\n        left: 0;\n    }\n`\n\nconst PopupContainer = styled.div`\n    transform: ${props => props.$isOpened ? 'translateY(0%)' : 'translateY(-50%)'};\n    opacity: ${props => props.$isOpened ? '1' : '0'};\n    transition: .2s;\n    width: 100%;\n    max-width: ${props => props.$type === 'edit' ? '768px' : '512px'};\n    max-height: calc(100vh - 80px);\n    position: absolute;\n    left: 0;\n    right: 0;\n    margin: 40px auto;\n    background-color: ${props => props.theme.color.white};\n    border: 1px solid ${props => props.theme.color.lightGrey};\n    & > div {\n        padding: 10px;\n    }\n`\n\nconst PopupHeader = styled.div`\n    border-bottom: 1px solid ${props => props.theme.color.lightGrey};\n    position: relative;\n    & > button {\n        & svg {\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            margin: auto;\n            right: 10px;\n        }\n    }\n    ${props => props.$cart && 'display: flex;'}\n`\n\nconst PopupTitle = styled(H3)`\n    & > svg {\n        color: ${props => props.theme.color.success};\n        margin-right: 5px;\n    }\n`\n\nconst PopupContent = styled.div`\n    max-height: calc(100vh - 145px);\n    overflow: auto;\n`\n\n\nexport const Popup = ({type}) => {\n\n    const isOpened = useSelector(state => state.general.isOpened)\n    \n    const {\n        handleClosePopup\n    } = useProduct()\n  \n    return (\n        <PopupCover $isOpened={isOpened}>\n            <PopupWrapper>\n                <label onClick={handleClosePopup(type)} />\n                <PopupContainer $isOpened={isOpened} $type={type}>\n                    <PopupHeader $cart={type === 'cart'}>\n                        {type === 'cart' && (\n                            <PopupTitle>\n                                <FontAwesomeIcon icon={faCheck} />\n                                已成功加入至購物車\n                            </PopupTitle>\n                        )}\n                        <Btn onClick={handleClosePopup(type)}>\n                            <FontAwesomeIcon icon={faTimes} />\n                        </Btn>\n                    </PopupHeader>\n                    <PopupContent>\n                        {type === 'login' && (\n                            <LoginPopup />\n                        )}\n                        {type === 'cart' && (\n                            <CartPopup />\n                        )}\n                        {type === 'size' && (\n                            <SizePopup />\n                        )}\n                        {type === 'color' && (\n                            <ColorPopup />\n                        )}\n                        {type === 'edit' && (\n                            <EditPopup />\n                        )}\n                        {type === 'delete' && (\n                            <DeletePopup />\n                        )}\n                    </PopupContent>\n                </PopupContainer>\n            </PopupWrapper>\n        </PopupCover>\n    )\n}","import { useEffect, createContext } from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\"\n\nimport { H2, PageWrapper, PageContainer } from \"../../constants/style\"\nimport { crumbMap } from \"../../constants/mapping\";\n\nimport { Feed } from \"../../components/Feed\";\nimport { CrumbNav } from \"../../components/CrumbNav\";\nimport { Aside } from \"../../components/Aside\"\n\nimport { Sort } from \"./Sort\"\nimport { ProductList } from \"./ProductList\";\nimport { Popup } from \"../../components/Popup\";\n\n\n\nconst MainContainer = styled.main`\n  width: 80%;\n  flex-grow: 1;\n  & h2 {\n    padding: 0 10px;\n  }\n`\n\n\nexport const LocationContext = createContext();\n\nexport default function ListPage() {\n\n  const { pathname, search } = useLocation();\n  const pathArr = pathname.split('/')\n  const currentPath = pathArr[pathArr.length-1]\n  const currentTitle = crumbMap[pathArr.length-2] ? crumbMap[pathArr.length-2][currentPath] : 0\n\n  const history = useHistory()\n    \n  useEffect(() => {\n    if(!currentTitle){\n      const previousPath = pathArr.slice(0, pathArr.length-1).join('/')\n      history.push(previousPath)\n    }\n  }, [history, pathArr, currentTitle])\n\n  return (\n    <LocationContext.Provider value={{pathname, search}} >\n      <>\n        {currentTitle && (\n          <CrumbNav pathArr={pathArr}/>\n        )}\n        <PageWrapper>\n          <PageContainer>\n            <Aside filter />\n            <MainContainer>\n              <H2>{currentTitle}</H2>\n              <Sort />\n              <ProductList />\n            </MainContainer>\n          </PageContainer>\n        </PageWrapper>\n        <Feed />\n        <Popup type=\"login\" />\n      </>\n    </LocationContext.Provider>\n  );\n}","import { useEffect } from \"react\"\nimport styled from \"styled-components\"\nimport { Img } from \"../../components/Img\"\nimport { MEDIA_QUERY } from \"../../constants/style\"\nimport useProduct from \"../../hooks/useProduct\"\n\nconst ImageContainer = styled.div`\n  & img {\n    width: 100%;\n    height: 100%;\n  }\n`\n\nconst ImageMain = styled.div`\n  aspect-ratio: 1;\n  border: 1px solid #aaa;\n  margin-bottom: 5px;\n  overflow: hidden;\n  position: relative;\n  @media (min-width: 512px) {\n    &:hover {\n      cursor: crosshair;\n      & > img:last-child {\n        opacity: 0;\n      }\n    }\n  }\n  & > img:first-child {\n    z-index: -1;\n    transform: scale(2);\n    transform-origin: top left;\n    position: absolute;\n    top: -50%;\n    left: -50%;\n  }\n  background-color: ${props => props.$isLoading && '#f00'};\n`\n\nconst ImageCarousel = styled.div`\n  padding: 5px;\n  display: flex;\n  & > div {\n    position: relative;\n    aspect-ratio: 1;\n    width: calc(100%/3);\n    border: 1px solid #aaa;\n    margin: 5px;\n    &:nth-child(n+5) {\n      display: none;\n    }\n  }\n  ${MEDIA_QUERY.l} {\n    & > div:nth-child(4) {\n      display: none;\n    }\n  }\n  ${MEDIA_QUERY.m} {\n    & > div:nth-child(4) {\n      display: block;\n    }\n  }\n  ${MEDIA_QUERY.s} {\n    & > div:nth-child(4) {\n      display: none;\n    }\n  }\n`\n\n\nexport const Image = ({images}) => {\n\n  const {\n    handleMouseMove,\n    handleImgClick,\n    mainImg,\n    setMainImg,\n    scaledImg\n  } = useProduct()\n\n  useEffect(() => {\n    const img = images.find(img => img.is_main === true)\n    setMainImg({src: img.src, alt: img.alt})\n  }, [images, setMainImg])\n\n  return (\n    <ImageContainer>\n      <ImageMain onMouseMove={handleMouseMove}>\n        <img src={mainImg.src} alt={mainImg.alt} ref={scaledImg} />\n        <Img image={mainImg}/>\n      </ImageMain>\n      <ImageCarousel onClick={handleImgClick}>\n        {images.slice(0, 4).map(image => (\n          <div key={image.id}>\n            <Img image={image} />\n          </div>\n        ))}\n        <div>\n          <Img image={{src: \"https://images.unsplash.com/photo-1631410744690-3cc75aaea4df?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MzJ8fG9uZSUyMHBpZWNlJTIwZHJlc3N8ZW58MHwyfDJ8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60\", alt: \"02\"}} />\n        </div>\n        <div>\n          <Img image={{src: \"https://images.unsplash.com/photo-1601460588655-109bd38204db?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Nzd8fGRyZXNzJTIwb25lJTIwcGllY2V8ZW58MHwyfDB8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60\", alt: \"03\"}} />\n        </div>\n        <div>\n          <Img image={{src: \"https://images.unsplash.com/photo-1623052760790-9605a8579730?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NDV8fHNoaXJ0c3xlbnwwfDJ8Mnx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60\", alt: \"04\"}} />\n        </div>\n      </ImageCarousel>\n    </ImageContainer>\n  )\n}","import styled from \"styled-components\"\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\nimport useProduct from \"../hooks/useProduct\";\nimport { setCartQty } from \"../features/product/productSlice\";\n\nconst Qty = styled.div`\n    width: 60px;\n    height: 40px;\n    position: relative;\n    & > input {\n        width: 100%;\n        box-sizing: border-box;\n        padding-left: 5px;\n        height: 100%;\n        outline: 0;\n        border: 1px solid #aaa;\n    }\n    & > div {\n        display: flex;\n        flex-direction: column;\n        position: absolute;\n        top: 0;\n        right: 0;\n        width: 20px;\n        & > button {\n            box-sizing: content-box;\n            height: 18.5px;\n            border: 1px solid #aaa;\n            transition: .25s;\n            background-color: ${props => props.theme.color.white};\n            & + button {\n                margin-top: -1px;\n            }\n            & svg {\n                display: block;\n                margin: auto;\n                color: ${props => props.theme.color.grey};\n                font-size: ${props => props.theme.fontSize.bodySmall};\n            }\n            &:hover {\n                background-color: #eee;\n            }\n        }\n    }\n`\n\nexport const QtySelector = ({qty, handleQtyChange, handleBtnClick}) => {\n\n    return (\n        <Qty>\n            <input\n                type=\"number\"\n                value={qty}\n                min={1}\n                onChange={handleQtyChange}\n            />\n            <div>\n                <button onClick={() => handleBtnClick('inc')}>\n                    <FontAwesomeIcon icon={faChevronDown} transform={{ rotate: 180 }}/>\n                </button>\n                <button onClick={() => handleBtnClick('dec')}>\n                    <FontAwesomeIcon icon={faChevronDown} transform={{ rotate: 0 }}/>\n                </button>\n            </div>\n        </Qty>\n    )\n}","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronDown, faShoppingCart, faHeart } from '@fortawesome/free-solid-svg-icons'\n\nimport { H3, H4, P, Span, TextBtn } from \"../../constants/style\"\nimport useProduct from \"../../hooks/useProduct\";\n\nimport { useSelector } from \"react-redux\";\nimport { QtySelector } from \"../../components/QtySelector\";\n\n\nconst ContentContainer = styled.div`\n  & > div {\n    padding-bottom: 20px;\n  }\n`\n\nconst TitleContainer = styled.div`\n  & p {\n    font-weight: ${props => props.theme.fontWeight.m};\n    line-height: 1.75em;\n    padding: 10px 0;\n  }\n  & h3 {\n    padding: 10px 0;\n    border-bottom: 1px solid #aaa;\n  }\n`\n\nconst SpecContainer = styled.div`\n  & > div {\n    padding: 5px 0;\n  }\n  & h4 {\n    padding: 5px 0;\n  }\n`\n\nconst ColorSelector = styled.div`\n  & ul {\n    display: flex;\n    & li {\n      z-index: 1;\n      & + li {\n        margin-left: 5px;\n      }\n    }\n  }\n`\n\nconst Msg = styled(Span)`\n  color: ${props => props.theme.color.alert};\n`\n\nconst SizeSelector = styled.div`\n  & > div {\n    position: relative;\n    width: 60px;\n    height: 33px;\n    & > div {\n      display: flex;\n      height: 100%;\n      box-sizing: border-box;\n      border: 1px solid #aaa;\n      & span {\n        width: 50%;\n        padding-left: 5px;\n        margin: auto 0;\n        font-size: ${props => props.theme.fontSize.body};\n      }\n    }\n    & svg {\n      display: block;\n      margin: auto;\n      color: ${props => props.theme.color.grey};\n      font-size: ${props => props.theme.fontSize.bodySmall};\n    }\n    & select {\n      position: absolute;\n      top: 0;\n      opacity: 0;\n      padding: 5px;\n      outline: 0;\n      border-color: ${props => props.theme.color.lightGrey};\n      width: 60px;\n    }\n  }\n`\n\nconst ColorLabel = styled.label`\n  & input {\n    display: none;\n    &:checked + span {\n      border: ${props => (parseInt(props.$color.slice(1), 16) <= parseInt('777777', 16)) ? 'medium double #eee' : 'thin solid #333'};\n    }\n  }\n  & span {\n    background-color: ${props => props.$color};\n    position: relative;\n    overflow: hidden;\n    ${props => props.$isNull && 'cursor: not-allowed;'}\n    &:before {\n      content: '';\n      width: 40px;\n      position: absolute;\n      transform: rotate(45deg);\n      transform-origin: top left;\n      top: 0;\n      left: 0;\n      background-color: #aaaa;\n      height: 2px;\n      display: ${props => props.$isNull ? 'block' : 'none'};\n    }\n    &:after {\n      content: '';\n      width: 40px;\n      position: absolute;\n      transform: rotate(-45deg);\n      transform-origin: top right;\n      top: 0;\n      right: 0;\n      background-color: #aaaa;\n      height: 2px;\n      display: ${props => props.$isNull ? 'block' : 'none'};\n    }\n  }\n`\n\nconst ColorSpan = styled.span`\n  display: block;\n  box-sizing: border-box;\n  border: 1px solid #aaa8;\n  width: 30px;\n  height: 30px;\n`\n\nconst PriceIsSale = styled.div`\n  & h4 {\n    display: inline-block;\n    // font-weight: ${props => props.theme.fontWeight.m};\n    &:nth-child(1) {\n      color: ${props => props.theme.color.grey};\n      text-decoration: line-through;\n    }\n    &:nth-child(2) {\n      color: ${props => props.theme.color.alert};\n      font-size: ${props => props.theme.fontSize.h3};\n    }\n    & + h4 {\n      padding-left: 10px;\n    }\n  }\n`\n\nconst QtyAndAdd = styled.div`\n  display: flex;\n`\n\nconst AddBtn = styled(TextBtn)`\n  margin-left: 10px;\n  padding: 10px 15px;\n\n  & svg {\n    font-size: ${props => props.theme.fontSize.bodyLarge};\n    color: ${props => props.theme.color.white};\n    margin-right: 5px;\n  }\n`\n\nconst WishList = styled(P)`\n\n  & svg {\n    color: ${props => props.theme.color.grey};\n    font-size: ${props => props.theme.fontSize.body};\n    margin-right: 3px;\n  }\n  & a > span {\n    color: ${props => props.theme.color.grey};\n    font-weight: ${props => props.theme.fontWeight.l};\n  }\n  & > span {\n    margin-left: 10px;\n  }\n`\n\n\nconst ColorSelect = ({name, code, total, color, handleColorChange}) => {\n\n    const isNull = !total ? true : false\n\n    return (\n      <ColorLabel $color={code} $isNull={isNull}>\n        <input \n          type=\"radio\" \n          name=\"color\" \n          value={name} \n          onChange={handleColorChange(isNull)} \n          checked={(color === name) && !isNull}\n        />\n        <ColorSpan />\n      </ColorLabel>\n    )\n  }\n\n\nexport const Content = ({product, group}) => {\n\n  const spec = useSelector(state => state.product.spec)\n  \n  const isOpened = useSelector(state => state.general.isOpened)\n  const errorMessage = useSelector(state => state.general.errorMessage)\n\n  const {\n    addCommaToPrice,\n    handleBtnClick,\n    handleSizeChange,\n    handleQtyChange,\n    handleColorChange,\n    handleAddToCart,\n    handleAddToWishList\n  } = useProduct(spec, product, group, isOpened)\n\n\n  return (\n    <ContentContainer>\n      <TitleContainer>\n        <H3>{product.product.name}</H3>\n        <P>{product.product.desc}</P>\n      </TitleContainer>\n      <SpecContainer>\n        <SizeSelector>\n          <H4>尺寸</H4>\n          <div>\n            <div>\n              <span>{spec.size}</span>\n              <span>\n                <FontAwesomeIcon icon={faChevronDown} transform={{ rotate: 0 }}/>\n              </span>\n            </div>\n            {spec.size && (\n              <select value={spec.size} onChange={handleSizeChange}>\n                {product.product[`${group}s`].map(size => (\n                  <option key={size.id} value={size.size}>{size.size}</option>\n                ))}\n              </select>\n            )}\n          </div>\n        </SizeSelector>\n        <ColorSelector>\n          <H4>顏色</H4>\n          <ul>\n            {product.patterns\n            .filter(pattern => pattern[group].size === spec.size)\n            .map((pattern, index) => (\n              <li key={index}>\n                <ColorSelect\n                  name={pattern.Color.name}\n                  code={pattern.Color.code}\n                  total={pattern.total}\n                  color={spec.color}\n                  handleColorChange={handleColorChange}\n                />\n              </li>\n            ))}\n          </ul>\n          {spec.size && spec.color && (\n            product.patterns.find(pattern => (\n              (pattern[group].size === spec.size) && (pattern.Color.name === spec.color))\n            ).total <= 10 && (\n              <Msg>庫存數量少</Msg>\n            )\n          )}\n        </ColorSelector>\n        {(product.product.is_sale ? (\n          <PriceIsSale>\n            <H4>NT ${addCommaToPrice(product.product.price_standard)}</H4>\n            <H4>NT ${addCommaToPrice(product.product.price_sale)}</H4>\n          </PriceIsSale>\n        ) : (\n          <div>\n            <H4>NT ${addCommaToPrice(product.product.price_standard)}</H4>\n          </div>\n        ))}\n        {errorMessage && (<Msg>{errorMessage}</Msg>)}\n        <QtyAndAdd>\n          <QtySelector\n            qty={spec.qty}\n            handleQtyChange={handleQtyChange}\n            handleBtnClick={handleBtnClick}\n          />\n          <AddBtn onClick={handleAddToCart} $active>\n            <FontAwesomeIcon icon={faShoppingCart} />\n            加入購物車\n          </AddBtn>\n        </QtyAndAdd>\n        <WishList>\n          <Link to=\"#\" onClick={handleAddToWishList}>\n            <FontAwesomeIcon icon={faHeart} />\n            <Span>加入願望清單</Span>\n          </Link>\n        </WishList>\n      </SpecContainer>\n    </ContentContainer>\n  )\n}","import styled from \"styled-components\"\nimport { sizeMap } from \"../../constants/mapping\";\nimport { MEDIA_QUERY, H4, P, TextBtn } from \"../../constants/style\"\nimport useProduct from \"../../hooks/useProduct\";\n\n\nconst DetailContainer = styled.div`\n  padding: 10px;\n  ${MEDIA_QUERY.m} {\n    width: 90%;\n    margin: 0 auto;\n  }\n`\nconst DetailTag = styled.div`\n  text-align: center;\n  padding: 10px 0 20px;\n`\nconst TagBtn = styled(TextBtn)`\n  margin: 5px;\n  font-size: ${props => props.theme.fontSize.bodyLarge};\n  &:hover {\n    background-color: ${props => props.theme.color.black};\n    border-color: ${props => props.theme.color.black};\n    &::before {\n      opacity: 1;\n    }\n  }\n  position: relative;\n  &::before {\n    opacity: ${props => props.$checked ? 1 : 0};\n    transition: .4s;\n    content: '';\n    width: 0;\n    height: 0;\n    position: absolute;\n    left: 0;\n    right: 0;\n    margin: 0 auto;\n    bottom: -8px;\n    border-left: 10px solid transparent;\n    border-right: 10px solid transparent;\n    border-top: 8px solid ${props => props.theme.color.black};\n  }\n  position: relative;\n  & label {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    cursor: pointer;\n  }\n`\n\nconst DetailContent = styled.div`\n  border: 1px solid #aaa;\n  padding: 20px;\n  & > input {\n    display: none;\n    &:checked + div {\n      opacity: 1;\n      position: relative;\n      top: 0px;\n      transition: opacity .5s;\n    }\n  }\n  position: relative;\n  & > div {\n    z-index: -1;\n    opacity: 0;\n    position: absolute;\n    top: -200px;\n    margin: 10px;\n  }\n  ${MEDIA_QUERY.s} {\n    padding: 0;\n  }\n`\n\nconst InfoContainer = styled.div`\n  & h4 {\n    font-size: ${props => props.theme.fontSize.bodyLarge};\n    font-weight: ${props => props.theme.fontWeight.xl};\n    padding: 5px 0 10px;\n  }\n  & p {\n    color: ${props => props.theme.color.grey};\n    padding-bottom: 10px;\n  }\n`\nconst SizeContainer = styled.div`\n  overflow: auto;\n  & table {\n    border-collapse: collapse;\n  }\n  & th, td {\n    border: 1px solid #aaa;\n    width: 150px;\n    text-align: center;\n    padding: 5px 0;\n    & span {\n      display: block;\n    }\n  }\n  & th, td, span {\n    font-size: ${props => props.theme.fontSize.bodyLarge};\n    font-weight: ${props => props.theme.fontWeight.l};\n    color: ${props => props.theme.color.black};\n    line-height: 1.5em;\n  }\n`\n\n\nexport const Detail = ({product, group}) => {\n\n    const { \n      isChecked,\n      handleCheckedChange\n    } = useProduct()\n  \n    return (\n        <DetailContainer>\n          <DetailTag>\n            <TagBtn $white={!isChecked} $active>\n              <label htmlFor=\"detail_info\" />\n              商品詳情\n            </TagBtn>\n            <TagBtn $white={isChecked} $active>\n              <label htmlFor=\"detail_size\" />\n              尺寸資訊\n            </TagBtn>\n          </DetailTag>\n          <DetailContent>\n            <input type=\"radio\" name=\"detail\" id=\"detail_info\" checked={isChecked} onChange={handleCheckedChange} />\n            {product && (\n              <InfoContainer>\n                <H4>材質</H4>\n                <P>{product.product.material}</P>\n                <H4>清洗方式</H4>\n                <P>{product.product.washing}</P>\n              </InfoContainer>\n            )}\n            <input type=\"radio\" name=\"detail\" id=\"detail_size\" checked={!isChecked} onChange={handleCheckedChange} />\n            <SizeContainer>\n              {group && (group === 'Size_general' ? (\n                <P>單一尺寸 One Size</P>\n              ) : (\n                <table>\n                  <thead>\n                    <tr>\n                      <th></th>\n                      {Object.keys(sizeMap[group]).map((element, index) => {\n                        const measure = element\n                          .split('_')\n                          .map(word => word[0].toUpperCase() + word.slice(1))\n                          .join(' ')\n                        return (\n                          <th key={index}>\n                            <span>{measure}</span>\n                            <span>{sizeMap[group][element]}</span>\n                          </th>\n                        )\n                      })}\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {product.product[`${group}s`].map(i => (\n                      <tr key={i.id}>\n                        <td>{i.size}</td>\n                        {Object.keys(sizeMap[group]).map((j, index) => (\n                          <td key={index}>\n                            {i[j] ? `${i[j]}cm` : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              ))}\n            </SizeContainer>\n          </DetailContent>\n        </DetailContainer>\n    )\n}","import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux'\nimport styled from \"styled-components\"\n\nimport { MEDIA_QUERY, PageWrapper, PageContainer, H4 } from \"../../constants/style\"\n\nimport { CrumbNav } from \"../../components/CrumbNav\";\nimport { Aside } from \"../../components/Aside\";\nimport { Popup } from \"../../components/Popup\";\nimport { Feed } from \"../../components/Feed\";\n\nimport { getProduct, setProduct } from \"../../features/product/productSlice\";\n\nimport { Image } from \"./Image\";\nimport { Content } from \"./Content\";\nimport { Detail } from \"./Detail\";\n\nconst Msg = styled(H4)`\n  margin: 0 auto;\n  padding: 20px;\n`\n\nconst MainContainer = styled.main`\n  width: 80%;\n  flex-grow: 1;\n`\n\nconst ItemContainer = styled.div`\n  display: flex;\n  & > div {\n    width: 50%;\n    padding: 10px;\n  }\n  ${MEDIA_QUERY.m} {\n    display: block;\n    & > div {\n      width: 90%;\n      margin: 0 auto;\n    }\n  }\n`\n\n\nconst BreadCrumb = ({product}) => {\n  const [path, setPath] = useState(['', 'collection'])\n  useEffect(() => {\n    if(!product) return\n    const gender = product.gender === 'M' ? 'men' : 'women';\n    const category = product.Category.name;\n    setPath(['', 'collection', gender, category])\n    // return () => {\n    //   setPath(['', 'collection'])\n    // }\n  }, [product])\n  return (\n    <CrumbNav pathArr={path} name={product?.name} />   \n  )\n}\n\nexport default function ProductPage () {\n\n    const { id } = useParams()\n\n    const product = useSelector(state => state.product.product)\n    const error = useSelector(state => state.product.error)\n    const popupCode = useSelector(state => state.general.popupCode)\n    const dispatch = useDispatch()\n\n    const group = product?.product?.Category?.group.slice(0, -1)\n\n    useEffect(() => {\n      dispatch(getProduct(id))\n      return () => {\n        dispatch(setProduct(''))\n      }\n    }, [id, dispatch])\n\n    return (\n        <>\n          <BreadCrumb product={product?.product}/>\n          <PageWrapper>\n            <PageContainer>\n              <Aside />\n              {!product && (\n                error ? (\n                  <Msg>{error}</Msg>\n                ) : (\n                  <Msg>商品載入中...</Msg>\n                )\n              )}\n              {product && !error && (\n                <MainContainer>\n                  <ItemContainer>\n                    <Image images={product.product.Images} />\n                    <Content product={product} group={group} />\n                  </ItemContainer>\n                  <Detail product={product} group={group} />\n                </MainContainer>\n              )}\n            </PageContainer>\n          </PageWrapper>\n          <Feed />\n          {popupCode !== 'cart' && (\n            <Popup type=\"login\" />\n          )}\n          {product && popupCode !== 'login' && (\n            <Popup type=\"cart\" />\n          )}\n        </>\n    )\n}","import styled from \"styled-components\"\nimport { fontTheme, MEDIA_QUERY } from \"../constants/style\"\n\n\nconst FlowMobile = styled.li`\n    margin: 1px 0;\n    padding: 10px;\n    border-left: 3px solid ${props => props.$active ? props.theme.color.black : props.theme.color.lightGrey};\n    color: ${props => props.$active && props.theme.color.black};\n`\n\nconst FlowContainer = styled.div`\n    & ol {\n        &:nth-child(1) {\n            display: flex;\n            justify-content: center;\n            ${MEDIA_QUERY.m} {\n                display: none;\n            }\n        }\n        &:nth-child(2) {\n            display: none;\n            ${fontTheme.p}\n            color: ${props => props.theme.color.lightGrey};\n            padding: 10px 0;\n            ${MEDIA_QUERY.m} {\n                display: block;\n            }\n        }\n    }\n`\n\nconst FlowNode = styled.div`\n    ${fontTheme.p};\n    margin: 10px;\n    background-color: ${props => props.theme.color.lightGrey};\n    color: ${props => props.theme.color.white};\n    min-width: 80px;\n    min-height: 80px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n    & > p {\n        ${fontTheme.h3}\n    }\n`\n\nconst FlowText = styled.div`\n    ${fontTheme.p}\n    padding-right: 10px;\n    color: ${props => props.theme.color.lightGrey};\n    min-width: ${props => props.$fixed && '108px'};\n    & > p {\n        ${fontTheme.h4}\n    }\n`\n\nconst FlowContent = styled.li`\n    display: flex;\n    align-items: center;\n    padding: 10px 20px;\n    position: relative;\n    & + li::before {\n        content: '>';\n        position: absolute;\n        left: -10px;\n        ${fontTheme.h3}\n        color: ${props => props.theme.color.lightGrey};\n    }\n    ${FlowNode} {\n        background-color: ${props => props.$active && props.theme.color.black};\n    }\n    ${FlowText} {\n        color: ${props => props.$active && props.theme.color.black};\n    }\n`\n\nexport const CheckoutFlow = ({step}) => {\n    return (\n        <FlowContainer>\n            <ol>\n                <FlowContent $active={step === 1}>\n                    <FlowNode>\n                        Step\n                        <p>01</p>\n                    </FlowNode>\n                    <FlowText $fixed>\n                        Check Order\n                        <p>確認購買清單</p>\n                    </FlowText>\n                </FlowContent>\n                <FlowContent $active={step === 2}>\n                    <FlowNode>\n                        Step\n                        <p>02</p>\n                    </FlowNode>\n                    <FlowText $fixed>\n                        Write the Add\n                        <p>填寫付款及運送資料</p>\n                    </FlowText>\n                </FlowContent>\n                <FlowContent $active={step === 3}>\n                    <FlowNode>\n                        Step\n                        <p>03</p>\n                    </FlowNode>\n                    <FlowText>\n                        Completed\n                        <p>完成訂單</p>\n                    </FlowText>\n                </FlowContent>\n            </ol>\n            <ol>\n                <FlowMobile $active={step === 1}>\n                    STEP1. 確認購買訂單 Check Order\n                </FlowMobile>\n                <FlowMobile $active={step === 2}>\n                    STEP2. 填寫付款及運送資料 Write the Add\n                </FlowMobile>\n                <FlowMobile $active={step === 3}>\n                    STEP3. 完成訂單 Completed\n                </FlowMobile>\n            </ol>\n        </FlowContainer>\n    )\n}","import styled from \"styled-components\"\nimport { Link } from \"react-router-dom\"\nimport { useSelector } from \"react-redux\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTrashAlt } from '@fortawesome/free-solid-svg-icons'\n\nimport { Btn, fontTheme, MEDIA_QUERY } from \"../../constants/style\"\n\nimport { QtySelector } from \"../../components/QtySelector\"\nimport { Img } from \"../../components/Img\"\nimport useProduct from \"../../hooks/useProduct\"\nimport useCart from \"../../hooks/useCart\"\n\n\nconst NameNote = styled.div`\n    display: none;\n    ${MEDIA_QUERY.m} {\n        display: block;\n    }\n    padding: 10px 0;\n    & > p {\n        ${fontTheme.span}\n    }\n`\n\nconst Price = styled.p`\n    font-weight: ${props => props.theme.fontWeight.xl};\n    font-size: ${props => props.theme.fontSize.h4};\n    ${MEDIA_QUERY.s} {\n        font-size: ${props => props.theme.fontSize.bodyLarge};\n    }\n`\n\nconst SellingPrice = styled(Price)`\n    color: ${props => props.theme.color.alert};\n    & + div {\n        font-weight: ${props => props.theme.fontWeight.xl};\n        color: ${props => props.theme.color.lightGrey};\n        line-height: 1.25em;\n        margin-top: 10px;\n    }\n`\n\nconst ErrorMsg = styled.span`\n    ${fontTheme.span}\n    color: ${props => props.theme.color.alert};\n    padding: 5px 0;\n    position: absolute;\n    ${MEDIA_QUERY.s} {\n        bottom: 0;\n        right: -100px;\n    }\n`\n\nconst MobileItem = styled.div`\n    padding: 10px 0;\n`\nconst ItemTitle = styled.div`\n    display: flex;\n    & > div {\n        width: 50%;\n        padding: 5px;\n        ${fontTheme.p}\n    }\n    ${MEDIA_QUERY.xs} {\n        display: block;\n        & > div {\n            width: 95%;\n            margin: 0 auto;\n        }\n    }\n`\n\nconst TableContainer = styled.div`\n    & table {\n        width: 100%;\n        border: 1px solid #aaa;\n        & th, td {\n            ${fontTheme.p}\n            color: ${props => props.theme.color.black};\n            border-top: 1px solid #aaa;\n            border-bottom: 1px solid #aaa;\n        }\n        & tr {\n            vertical-align: top;\n            & th {\n                text-align: left;\n                padding: 5px 10px;\n                background-color: ${props => props.theme.color.lightGrey};\n                color: ${props => props.theme.color.white};\n                font-weight: ${props => props.theme.fontWeight.xl};\n            }\n            & td {\n                padding: 10px;\n            }\n        }\n    }\n`\n\nconst ItemContent = styled(TableContainer)`\n    overflow: auto;\n    & table {\n        border: none;\n        border-bottom: 1px solid #aaa;\n        & th, td {\n            border: none;\n            ${fontTheme.span}\n            position: relative;\n            &:last-child {\n                width: 10%;\n            }\n        }\n        & svg {\n            font-size: ${props => props.theme.fontSize.h3};\n        }\n    }\n`\nconst ItemImage = styled.div`\n    position: relative;\n    & img {\n        width: 100%;\n        aspect-ratio: 1;\n    }\n`\nconst ItemName = styled.div`\n`\n\n\nexport const CartItem = ({item, index}) => {\n\n    const url = `/product/${item.id}`\n\n    const subtotal = (item.is_sale ? item.price_sale : item.price_standard) * item.qty\n\n    const errorMessage = useSelector(state => state.cart.errorMessage)\n\n    const {\n        addCommaToPrice,\n    } = useProduct()\n\n    const {\n        handleDeleteCart,\n        handleQtyChange,\n        handleBtnClick\n    } = useCart(item)\n\n    return (\n        <tr>\n            <td>\n                <Link to={url}>\n                    <Img image={{src: item.src, alt: item.alt}} />\n                </Link>\n            </td>\n            <td>\n                {item.name}\n                <NameNote>\n                    <p>尺寸 : {item.size}</p>\n                    <p>顏色 : {item.color}</p>\n                </NameNote>\n            </td>\n            <td>\n                <p>尺寸 : {item.size}</p>\n                <p>顏色 : {item.color}</p>\n            </td>\n            <td>\n                {item.is_sale ? (\n                    <>\n                        <SellingPrice>\n                            ${addCommaToPrice(item.price_sale)}\n                        </SellingPrice>\n                        <div>\n                            原價\n                            <p>${addCommaToPrice(item.price_standard)}</p>\n                        </div>\n                    </>\n                ) : (\n                    <Price>\n                        ${addCommaToPrice(item.price_standard)}\n                    </Price>\n                )}\n            </td>\n            <td>\n                <QtySelector \n                    qty={item.qty}\n                    handleQtyChange={handleQtyChange}\n                    handleBtnClick={handleBtnClick}\n                />\n                {errorMessage && (\n                    <ErrorMsg>{errorMessage[index]}</ErrorMsg>\n                )}\n            </td>\n            <td>\n                <Price>\n                    ${addCommaToPrice(subtotal)}\n                </Price>\n            </td>\n            <td>\n                <Btn onClick={handleDeleteCart(index)}>\n                    <FontAwesomeIcon icon={faTrashAlt}/>\n                </Btn>\n            </td>\n        </tr>\n    )\n}\n\n\nexport const MobileCartItem = ({item, index}) => {\n\n    const url = `/product/${item.id}`\n\n    const subtotal = (item.is_sale ? item.price_sale : item.price_standard) * item.qty\n\n    const errorMessage = useSelector(state => state.cart.errorMessage)\n\n    const {\n        addCommaToPrice\n    } = useProduct()\n\n    const {\n        handleDeleteCart,\n        handleQtyChange,\n        handleBtnClick\n    } = useCart(item)\n\n    return (\n        <li>\n            <MobileItem>\n                <ItemTitle>\n                    <ItemImage>\n                        <Link to={url}>\n                            <Img image={{src: item.src, alt: item.alt}} />\n                        </Link>\n                    </ItemImage>\n                    <ItemName>\n                        {item.name}\n                        <NameNote>\n                            <p>尺寸 : {item.size}</p>\n                            <p>顏色 : {item.color}</p>\n                        </NameNote>\n                    </ItemName>\n                </ItemTitle>\n                <ItemContent>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>售價</th>\n                                <th>數量</th>\n                                <th>小計</th>\n                                <th></th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr>\n                                <td>\n                                    {item.is_sale ? (\n                                        <>\n                                            <SellingPrice>\n                                                ${addCommaToPrice(item.price_sale)}\n                                            </SellingPrice>\n                                            <div>\n                                                原價\n                                                <p>${addCommaToPrice(item.price_standard)}</p>\n                                            </div>\n                                        </>\n                                    ) : (\n                                        <Price>\n                                            ${addCommaToPrice(item.price_standard)}\n                                        </Price>\n                                    )}\n                                </td>\n                                <td>\n                                    <QtySelector \n                                        qty={item.qty}\n                                        handleQtyChange={handleQtyChange}\n                                        handleBtnClick={handleBtnClick}\n                                    />\n                                    {errorMessage && (\n                                        <ErrorMsg>{errorMessage[index]}</ErrorMsg>\n                                    )}\n                                </td>\n                                <td>\n                                    <Price>\n                                        ${addCommaToPrice(subtotal)}\n                                    </Price>\n                                </td>\n                                <td>\n                                    <Btn onClick={handleDeleteCart(index)}>\n                                        <FontAwesomeIcon icon={faTrashAlt}/>\n                                    </Btn>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </ItemContent>\n            </MobileItem>\n        </li>       \n    )\n}","import styled, { css } from \"styled-components\"\nimport { Link } from \"react-router-dom\"\nimport { useEffect } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\n\nimport { fontTheme, H2, MEDIA_QUERY, P, TextBtn, H4 } from \"../../constants/style\"\n\nimport useProduct from \"../../hooks/useProduct\"\nimport useCart from \"../../hooks/useCart\"\nimport { setErrorMessage } from \"../../features/cart/cartSlice\"\nimport { CheckoutFlow } from \"../../components/CheckoutFlow\"\nimport { CartItem, MobileCartItem } from \"./CartItem\"\n\n\nconst PageWrapper = styled.div``\n\nconst PageContainer = styled.div`\n    width: 90%;\n    ${MEDIA_QUERY.m} {\n        width: 95%;\n    }\n    margin: 0 auto;\n    //   display: flex;\n    //   align-items: flex-start;\n`\n\nconst TableContainer = styled.div`\n    & table {\n        width: 100%;\n        border: 1px solid #aaa;\n        & th, td {\n            ${fontTheme.p}\n            color: ${props => props.theme.color.black};\n            border-top: 1px solid #aaa;\n            border-bottom: 1px solid #aaa;\n        }\n        & tr {\n            vertical-align: top;\n            & th {\n                text-align: left;\n                padding: 5px 10px;\n                background-color: ${props => props.theme.color.lightGrey};\n                color: ${props => props.theme.color.white};\n                font-weight: ${props => props.theme.fontWeight.xl};\n            }\n            & td {\n                padding: 10px;\n            }\n        }\n    }\n`\n\nconst CartContainer = styled(TableContainer)`\n    padding: 10px 0;\n    & table {\n        & th, td {\n            ${MEDIA_QUERY.m} {\n                &:nth-child(3) {\n                    display: none;\n                }\n            }\n            &:nth-last-child(2) {\n                width: 15%;\n            }\n        }\n        & td:first-child {\n            width: 10%;\n            position: relative;\n            & img {\n                width: 100%;\n                min-width: 80px;\n            }\n        }\n    }\n    ${MEDIA_QUERY.s} {\n        display: none;\n    }\n`\n\nconst ADDSTYLE = css`\n    display: inline-block;\n    margin-left: 10px;\n    ${MEDIA_QUERY.s} {\n        display: block;\n        width: fit-content;\n        margin: 20px 0 0 auto;\n    }\n`\n\nconst TotalContainer = styled.div`\n    margin-bottom: 20px;\n    padding: 10px 0;\n    display: flex;\n    flex-direction: row-reverse;\n    justify-content: space-between;\n    align-items: baseline;\n    ${fontTheme.h4}\n    ${MEDIA_QUERY.s} {\n        display: block;\n        text-align: right;\n    }\n    & > a {\n        color: ${props => props.theme.color.black};\n        display: block;\n        margin: 10px 0;\n        & svg {\n            margin-right: 4px;\n        }\n    }\n    & > div {\n        color: ${props => props.theme.color.black};\n        & span {\n            ${fontTheme.h3}\n        }\n        & a {\n            ${ADDSTYLE}\n        }\n    }\n`\n\n\n\nconst ToCartBtn = styled(TextBtn)`\n    vertical-align: bottom;\n    padding: 5px 20px;\n    ${fontTheme.h4}\n    ${props => !props.$active && ADDSTYLE}\n`\n\nconst MobileCartContainer = styled.div`\n    display: none;\n    padding: 10px 0;\n    ${MEDIA_QUERY.s} {\n        display: block;\n    }\n    & > p {\n        ${fontTheme.span}\n        border-bottom: 1px solid #aaa;\n    }\n`\n\n\nexport default function CartPage () {\n\n    const dispatch = useDispatch()\n    const cart = useSelector(state => state.cart.cart)\n    const error = useSelector(state => state.product.error)\n    const errorMessage = useSelector(state => state.cart.errorMessage)\n\n    useEffect(() => {\n        if(!cart || !cart.length) return\n        const arr = Array(cart.length).fill('').map((element, index) => {\n            if(cart[index].qty > cart[index].total){\n                element = '選擇的數量超過庫存數量!'\n            }\n            if(cart[index].qty === 0){\n                element = '選擇的數量不可為0!'\n            }\n            return element\n        })\n        dispatch(setErrorMessage(arr))\n    }, [dispatch, cart])\n\n    const {\n        addCommaToPrice\n    } = useProduct()\n\n    const {\n        getTotal,\n        hasError\n    } = useCart()\n\n    return (\n        <PageWrapper>\n            <PageContainer>\n                <H2>購物車</H2>\n                <CheckoutFlow step={1}/>\n                <CartContainer>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th></th>\n                                <th>商品名稱</th>\n                                <th>尺寸 / 顏色</th>\n                                <th>售價</th>\n                                <th>數量</th>\n                                <th>小計</th>\n                                <th></th>\n                            </tr>\n                        </thead>\n                        {cart && cart.every(item => item.name) && !error && cart.length > 0 && (\n                            <tbody>\n                                {cart.map((item, index) => (\n                                    <CartItem \n                                        key={index}\n                                        item={item} \n                                        index={index}\n                                    />\n                                ))}\n                            </tbody>\n                        )}\n                    </table>\n                    {cart && cart.every(item => item.name) && !error && !cart.length > 0 && (<H4>購物車內暫無商品</H4>)}\n                    {(!cart || !cart.every(item => item.name)) && (\n                        error ? (\n                            <H4>{error}</H4>\n                        ) : (\n                            <H4>商品載入中...</H4>\n                        )\n                    )}\n                </CartContainer>\n                <MobileCartContainer>\n                    <P>全部商品 ({cart ? cart.length : '-'})</P>\n                    <ul>\n                        {(!cart || !cart.every(item => item.name)) && (\n                            error ? (\n                                <H4>{error}</H4>\n                            ) : (\n                                <H4>商品載入中...</H4>\n                            )\n                        )}\n                        {cart && cart.every(item => item.name) && !error && (\n                            cart.length > 0 ? (\n                                cart.map((item, index) => (\n                                    <MobileCartItem \n                                        key={index}\n                                        item={item} \n                                        index={index}\n                                    />\n                                ))\n                            ) : (\n                                <H4>購物車內暫無商品</H4>\n                            )\n                        )}\n                    </ul>\n                </MobileCartContainer>\n                <TotalContainer>\n                    {cart && !error && (\n                        <div>\n                            總金額 (不含運費) : \n                            <span>\n                                ${cart.length > 0 ? (\n                                    addCommaToPrice(getTotal(cart))\n                                ) : (\n                                    '-'\n                                )}\n                            </span>\n                            {hasError(errorMessage) ? (\n                                <ToCartBtn $active={!hasError(errorMessage)}>\n                                    前往結帳\n                                </ToCartBtn>\n                            ) : (\n                                <Link to=\"#\">\n                                    <ToCartBtn $active={!hasError(errorMessage)}>\n                                        前往結帳\n                                    </ToCartBtn>\n                                </Link>\n                            )}\n                        </div>\n                    )}\n                    <Link to=\"/collection\">\n                        <FontAwesomeIcon icon={faChevronDown} transform={{ rotate: 90 }}/>\n                        繼續選購\n                    </Link>\n                </TotalContainer>\n            </PageContainer>\n        </PageWrapper>\n    )\n}","import styled from \"styled-components\"\nimport { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTrashAlt, faPen, faPlus } from '@fortawesome/free-solid-svg-icons'\nimport { crumbMap } from \"../../../constants/mapping\";\nimport { Btn, fontTheme, H2, H4, P, TextBtn } from \"../../../constants/style\"\n\nimport { setPopupCode, setIsOpened } from \"../../../features/general/generalSlice\";\nimport { getProducts, setProduct, setProducts } from \"../../../features/product/productSlice\";\n\nimport { getProductAPI } from \"../../../webAPI/productAPI\";\n\nimport { Popup } from \"../../../components/Popup\";\n\n\nconst MainContainer = styled.main`\n    width: 70%;\n    flex-grow: 1;\n    & h2 {\n        padding: 0 10px;\n    }\n`\n\nconst TableContainer = styled.div`\n    padding: 10px;\n    overflow: auto;\n    & table {\n        width: 100%;\n        min-width: 1000px;\n        border: 1px solid #aaa;\n        & th, td {\n            ${fontTheme.span}\n            color: ${props => props.theme.color.black};\n            border-top: 1px solid #aaa;\n            border-bottom: 1px solid #aaa;\n        }\n        & tr {\n            vertical-align: top;\n            & th {\n                white-space: nowrap;\n                text-align: left;\n                padding: 5px 10px;\n                background-color: ${props => props.theme.color.lightGrey};\n                color: ${props => props.theme.color.white};\n                font-weight: ${props => props.theme.fontWeight.xl};\n            }\n            & td {\n                padding: 10px;\n            }\n        }\n    }\n`\n\nconst ToDetailBtn = styled(TextBtn)`\n    padding: 0 10px;\n`\n\nconst FilterContainer = styled.div`\n    padding: 10px;\n    display: flex;\n    justify-content: space-between;\n    // align-items: center;\n    ${fontTheme.p}\n    & > div {\n        display: flex;\n        & > div + div {\n            margin-left: 10px;\n        }\n        & > button {\n            margin-right: 10px;\n        }\n        & a {\n            color: ${props => props.theme.color.black};\n            & svg {\n                margin-right: 2px;\n                font-size: ${props => props.theme.fontSize.h4};\n            }\n        }\n    }\n`\n\nconst Item = ({product}) => {\n\n    const dispatch = useDispatch()\n    \n    const [info, setInfo] = useState()\n    \n    useEffect(() => {\n        getProductAPI(product.id)\n        .then(result => {\n            setInfo(result.data)\n        })\n    }, [product.id])\n\n    const handleIsOpened = e => {\n        dispatch(setProduct(info))\n        dispatch(setIsOpened(true))\n        dispatch(setPopupCode(e.currentTarget.name))\n    }\n\n    return (\n        <>\n            {info && (\n                <tr>\n                    <td>{product.id}</td>\n                    <td>{product.gender === 'M' ? '男裝' : '女裝'}</td>\n                    <td>{crumbMap[2][info.product.Category.name]}</td>\n                    <td>{product.name}</td>\n                    <td>{info.product.desc || '-'}</td>\n                    <td>{info.product.material || '-'}</td>\n                    <td>{info.product.washing || '-'}</td>\n                    <td>\n                        <ToDetailBtn name=\"size\" onClick={handleIsOpened} $white $active>查看</ToDetailBtn>\n                    </td>\n                    <td>\n                        <ToDetailBtn name=\"color\" onClick={handleIsOpened} $white $active>查看</ToDetailBtn>\n                    </td>\n                    <td>\n                        <Btn name=\"edit\" onClick={handleIsOpened}>\n                            <FontAwesomeIcon icon={faPen}/>\n                        </Btn>\n                    </td>\n                    <td>\n                        <Btn name=\"delete\" onClick={handleIsOpened}>\n                            <FontAwesomeIcon icon={faTrashAlt}/>\n                        </Btn>\n                    </td>\n                </tr>\n            )}\n        </>\n    )\n}\n\nexport const Information = () => {\n\n    const dispatch = useDispatch()\n\n    const products = useSelector(state => state.product.products)\n    const error = useSelector(state => state.product.error)\n    const popupCode = useSelector(state => state.general.popupCode)\n\n    const [gender, setGender] = useState('')\n    const [category, setCategory] = useState('')\n\n    useEffect(() => {\n        dispatch(getProducts([gender, category], ''))\n        return () => {\n            dispatch(setProducts(''))\n        }\n    }, [dispatch, gender, category])\n\n    const handleSelectChange = e => {\n        if(e.target.name === 'gender') return setGender(e.target.value)\n        if(e.target.name === 'category') return setCategory(e.target.value)\n        if(e.target.name === 'clearFilter'){\n            setGender('')\n            setCategory('')\n        }\n    }\n\n    return (\n        <>\n            <MainContainer>\n                <H2>新增及管理產品資訊</H2>\n                <FilterContainer>\n                    <div>\n                        <ToDetailBtn name=\"clearFilter\" onClick={handleSelectChange} $white $active>清除篩選</ToDetailBtn>\n                        <div>\n                            <label htmlFor=\"gender\">性別: </label>\n                            <select name=\"gender\" value={gender} onChange={handleSelectChange} id=\"gender\">\n                                <option value=\"\">-----</option>\n                                <option value=\"men\">男裝</option>\n                                <option value=\"women\">女裝</option>\n                            </select>\n                        </div>\n                        <div>\n                            <label htmlFor=\"category\">分類: </label>\n                            <select name=\"category\" value={category} onChange={handleSelectChange} id=\"category\">\n                                <option value=\"\">-----</option>\n                                <option value=\"tops\">上衣類</option>\n                                <option value=\"shirts\">襯衫類</option>\n                                <option value=\"knit\">針織衫 / 毛衣</option>\n                                <option value=\"one_piece\">洋裝類</option>\n                                <option value=\"outer\">外套類</option>\n                                <option value=\"bottoms\">褲裝類</option>\n                                <option value=\"skirts\">裙子類</option>\n                                <option value=\"general\">配件類</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div>\n                        <Link to=\"/admin/product/new\">\n                            <Btn>\n                                <FontAwesomeIcon icon={faPlus} />\n                            </Btn>\n                            <span>新增產品</span>\n                        </Link>\n                    </div>\n                </FilterContainer>\n                <TableContainer>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>id</th>\n                                <th>性別</th>\n                                <th>分類</th>\n                                <th>品名</th>\n                                <th>簡介</th>\n                                <th>材質</th>\n                                <th>洗滌方式</th>\n                                <th>尺寸資訊</th>\n                                <th>顏色資訊</th>\n                                <th>編輯</th>\n                                <th>刪除</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {products && !error && (\n                                products.length > 0 ? (\n                                    products.map(product => (\n                                        <Item key={product.id} product={product} />\n                                    ))\n                                ) : (\n                                    <H4>查無商品</H4>\n                                )\n                            )}\n                        </tbody>\n                    </table>\n                    {!products && (\n                        error ? (\n                            <P>{error}</P>\n                        ) : (\n                            <H4>商品載入中......</H4>\n                        )\n                    )}\n                </TableContainer>\n            </MainContainer>\n            <>\n                {popupCode !== 'color' && popupCode !== 'edit' && popupCode !== 'delete' && (\n                    <Popup type=\"size\" />\n                )}\n                {popupCode !== 'size' && popupCode !== 'edit' && popupCode !== 'delete' && (\n                    <Popup type=\"color\" />\n                )}\n                {popupCode !== 'size' && popupCode !== 'color' && popupCode !== 'delete' && (\n                    <Popup type=\"edit\" />\n                )}\n                {popupCode !== 'size' && popupCode !== 'color' && popupCode !== 'edit' && (\n                    <Popup type=\"delete\" />\n                )}\n            </>\n        </>\n        \n    )\n}","import { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\"\n\nimport { fontTheme, H2, H4, P, TextBtn } from \"../../../constants/style\"\nimport { getProducts, setProducts } from \"../../../features/product/productSlice\";\nimport { getProductAPI, updatePatternAPI } from \"../../../webAPI/productAPI\";\n\n\nconst MainContainer = styled.main`\n    width: 70%;\n    flex-grow: 1;\n    & h2 {\n        padding: 0 10px;\n    }\n`\n\nconst TableContainer = styled.div`\n    padding: 10px;\n    overflow: auto;\n    & table {\n        width: 100%;\n        min-width: 1000px;\n        border: 1px solid #aaa;\n        & th, td {\n            ${fontTheme.span}\n            color: ${props => props.theme.color.black};\n            border-top: 1px solid #aaa;\n            border-bottom: 1px solid #aaa;\n            &:nth-child(n+3):nth-child(-n+6){\n                width: 10%;\n            }\n\n            white-space: nowrap;\n\n            \n        }\n        & tr {\n            vertical-align: top;\n            & th {\n                // white-space: nowrap;\n                text-align: left;\n                padding: 5px 10px;\n                background-color: ${props => props.theme.color.lightGrey};\n                color: ${props => props.theme.color.white};\n                font-weight: ${props => props.theme.fontWeight.xl};\n            }\n            & td {\n                padding: 10px;\n            }\n        }\n    }\n`\n\n\nconst FilterBtn = styled(TextBtn)`\n    padding: 0 10px;\n`\n\nconst Input = styled.input`\n    &:last-child {\n        width: 50px;\n        padding: 0 5px;\n    }\n    margin-right: 2px;\n    & + label {\n        margin-right: 5px;\n    }\n`\n\nconst Form = styled.td`\n    & ${Input}:last-child {\n        border: ${props => props.$isError && '2px solid red'};\n    }\n    & + td > span {\n        color: ${props => props.$isError && props.theme.color.alert};\n    }\n`\n\nconst Total = styled.td`\n    background-color: ${props => props.$safe && props.theme.color.success};\n    background-color: ${props => props.$caution && props.theme.color.yellow};\n    background-color: ${props => props.$danger && props.theme.color.alert};\n`\n\nconst SubItem = ({pattern, group}) => {\n\n    const history = useHistory();\n\n    const [type, setType] = useState('')\n    const [qty, setQty] = useState(0)\n\n    const [isEditing, setIsEditing] = useState(false)\n    const [error, setError] = useState('')\n\n    const handleInputChange = e => {\n        switch (e.target.name) {\n            case 'type': {\n                return setType(e.target.id)\n            }\n            case 'qty': {\n                if(error) setError('')\n                return setQty(e.target.value)\n            }\n            default: break\n        }\n    }\n\n    const handleIsEditing = e => {\n        if(e.target.name === 'edit') return setIsEditing(true)\n        if(e.target.name === 'save') {\n            if(!type || !parseInt(qty)) {\n                setType('')\n                setQty(0)\n                return setIsEditing(false)\n            }\n            updatePatternAPI(pattern.id, {\n                type, \n                quantity: parseInt(qty)\n            }).then(result => {\n                if(!result.ok) return setError(result.message)\n                alert('更改存貨數量成功!')\n                return history.go()\n            })\n        }\n    }\n\n    return (\n        <tr>\n            <td></td>\n            <td></td>\n            <td>{pattern[group].size}</td>\n            <td>{pattern.Color.name}</td>\n            <Total \n                $safe={pattern.total >= 30}\n                $caution={pattern.total >= 10 && pattern.total < 30}\n                $danger={pattern.total < 10 && typeof pattern.total === 'number'}\n            >\n                {typeof pattern.total === 'number' ? pattern.total : '-'}\n            </Total>\n            <Form $isError={error}>\n                <Input \n                    checked={type === 'INC'} \n                    onChange={handleInputChange} \n                    type=\"radio\" \n                    name=\"type\" \n                    id=\"INC\" \n                    disabled={!isEditing} \n                />\n                <label htmlFor=\"increase\">增加</label>\n                <Input \n                    checked={type === 'DEC'} \n                    onChange={handleInputChange} \n                    type=\"radio\" \n                    name=\"type\" \n                    id=\"DEC\" \n                    disabled={!isEditing} \n                />\n                <label htmlFor=\"decrease\">減少</label>\n                <Input \n                    value={qty} \n                    onChange={handleInputChange} \n                    type=\"number\" \n                    name=\"qty\" \n                    min=\"0\" \n                    disabled={!isEditing} \n                />個\n            </Form>\n            <td>{isEditing ? (<span>{error}</span>) : pattern.updatedAt}</td>\n            <td>\n                {isEditing ? (\n                    <FilterBtn onClick={handleIsEditing} type=\"submit\" name=\"save\" $white $active>\n                        儲存\n                    </FilterBtn>\n                ) : (\n                    <FilterBtn onClick={handleIsEditing} type=\"button\" name=\"edit\" $white $active>\n                        編輯\n                    </FilterBtn>\n                )}\n            </td>\n            <td>\n                <FilterBtn type=\"button\" $white $active>\n                    查看\n                </FilterBtn>\n            </td>\n        </tr>\n    )\n}\n\nconst Item = ({product}) => {\n\n    const [item, setItem] = useState()\n\n    useEffect(() => {\n        getProductAPI(product.id)\n            .then(result => {\n                setItem({group: result.data.product.Category.group.slice(0, -1), patterns: result.data.patterns})\n            })\n    }, [product.id])\n\n    return (\n        <>\n            <tr>\n                <td>{product.id}</td>\n                <td>{product.name}</td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n            </tr>\n            {item && item.patterns.map(pattern => {\n                return (\n                    <SubItem \n                        key={pattern.id} \n                        pattern={pattern} \n                        group={item.group} \n                    />\n                )\n            })}\n        </>\n    )\n}\n\nexport const Quantity = () => {\n\n    const dispatch = useDispatch()\n\n    const products = useSelector(state => state.product.products)\n    const error = useSelector(state => state.product.error)\n\n    useEffect(() => {\n        dispatch(getProducts('', ''))\n        return () => {\n            dispatch(setProducts(''))\n        }\n    }, [dispatch])\n\n    return (\n        <>\n            <MainContainer>\n                <H2>管理存貨數量與紀錄</H2>\n                <TableContainer>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>id</th>\n                                <th>產品名稱</th>\n                                <th>尺寸</th>\n                                <th>顏色</th>\n                                <th>數量</th>\n                                <th></th>\n                                <th>更新時間</th>\n                                <th></th>\n                                <th>進出紀錄</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {products && !error && (\n                                products.length > 0 ? (\n                                    products.map(product => (\n                                        <Item key={product.id} product={product} />\n                                    ))\n                                ) : (\n                                    <H4>查無商品</H4>\n                                )\n                            )}\n                        </tbody>\n                    </table>\n                    {!products && (\n                        error ? (\n                            <P>{error}</P>\n                        ) : (\n                            <H4>商品載入中......</H4>\n                        )\n                    )}\n                </TableContainer>\n            </MainContainer>\n        </>\n        \n    )\n}","import styled from \"styled-components\"\nimport { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheck, faTimes } from '@fortawesome/free-solid-svg-icons'\n\nimport { fontTheme, H2, H4, P, TextBtn } from \"../../../constants/style\"\nimport { getProducts, setProducts } from \"../../../features/product/productSlice\";\nimport { updateProductAPI } from \"../../../webAPI/productAPI\";\n\n\nconst MainContainer = styled.main`\n    width: 70%;\n    flex-grow: 1;\n    & h2 {\n        padding: 0 10px;\n    }\n`\n\nconst TableContainer = styled.div`\n    padding: 10px;\n    overflow: auto;\n    & table {\n        width: 100%;\n        min-width: 1000px;\n        border: 1px solid #aaa;\n        & th, td {\n            ${fontTheme.span}\n            color: ${props => props.theme.color.black};\n            border-top: 1px solid #aaa;\n            border-bottom: 1px solid #aaa;\n            &:nth-child(n+3):nth-child(-n+6){\n                width: 8%;\n            }\n        }\n        & tr {\n            vertical-align: top;\n            & th {\n                white-space: nowrap;\n                text-align: left;\n                padding: 5px 10px;\n                background-color: ${props => props.theme.color.lightGrey};\n                color: ${props => props.theme.color.white};\n                font-weight: ${props => props.theme.fontWeight.xl};\n            }\n            & td {\n                padding: 10px;\n            }\n        }\n    }\n`\n\nconst FilterContainer = styled.div`\n    padding: 10px;\n    display: flex;\n    ${fontTheme.p}\n    & > div + div {\n        margin-left: 10px;\n    }\n    & > button {\n        margin-right: 20px;\n    }\n`\n\nconst SortBtn = styled.button`\n    ${fontTheme.span}\n    color: ${props => props.theme.color.white};\n    font-weight: ${props => props.theme.fontWeight.xl};\n\n    position: relative;\n    &::before {\n        content: '';\n        display: block;\n        width: 0;\n        height: 0;\n        position: absolute;\n        right: -15px;\n        top: -1px;\n        border-left: 5px solid transparent;\n        border-right: 5px solid transparent;\n        border-bottom: 10px solid ${props => props.theme.color.grey};\n    }\n    &::after {\n        content: '';\n        display: block;\n        width: 0;\n        height: 0;\n        position: absolute;\n        right: -15px;\n        bottom: -1px;\n        border-left: 5px solid transparent;\n        border-right: 5px solid transparent;\n        border-top: 10px solid ${props => props.theme.color.grey};\n    }\n`\n\nconst FilterBtn = styled(TextBtn)`\n    padding: 0 10px;\n`\n\nconst BooleanSvg = styled(FontAwesomeIcon)`\n    font-size: ${props => props.theme.fontSize.bodyLarge};\n    color: ${props => props.$active ? props.theme.color.success : props.theme.color.alert};\n`\n\nconst PriceInput = styled.input`\n    width: 50px;\n`\n\nconst Item = ({product}) => {\n\n    const [isOn, setIsOn] = useState(null)\n    const [isSale, setIsSale] = useState(null)\n    const [priceStandard, setPriceStandard] = useState(NaN)\n    const [priceSale, setPriceSale] = useState(NaN)\n\n    const [isEditing, setIsEditing] = useState(false)\n\n    useEffect(() => {\n        setIsOn(product.is_on)\n        setIsSale(product.is_sale)\n        setPriceStandard(product.price_standard || '')\n        setPriceSale(product.price_sale || '')\n    }, [product])\n\n    const handleInputChange = e => {\n        switch (e.target.name) {\n            case 'is_on': {\n                return setIsOn(e.target.checked)\n            }\n            case 'is_sale': {\n                return setIsSale(e.target.checked)\n            }\n            case 'price_standard': {\n                return setPriceStandard(e.target.value)\n            }\n            case 'price_sale': {\n                return setPriceSale(e.target.value)\n            }\n            default: break\n        }\n    }\n\n    const handleIsEditing = e => {\n        if(e.target.name === 'edit') return setIsEditing(true)\n        if(e.target.name === 'save') {\n            return updateProductAPI(product.id, {\n                is_on: isOn, \n                is_sale: isSale, \n                price_standard: parseInt(priceStandard), \n                price_sale: parseInt(priceSale)\n            }).then(result => {\n                if(!result.ok) return console.log(result.message)\n                setIsEditing(false)\n            })\n        }\n    }\n\n    return (\n        <tr>\n            <td>{product.id}</td>\n            <td>{product.name}</td>\n            <td>\n                {isEditing ? (\n                    <input \n                        onChange={handleInputChange} \n                        checked={isOn} \n                        type=\"checkbox\" \n                        name=\"is_on\" \n                    />\n                ) : (\n                    <BooleanSvg icon={isOn ? faCheck : faTimes} $active={isOn} />\n                )}\n            </td>\n            <td>\n                {isEditing ? (\n                    <input \n                        onChange={handleInputChange} \n                        checked={isSale} \n                        type=\"checkbox\" \n                        name=\"is_sale\" \n                    />\n                ) : (\n                    <BooleanSvg icon={isSale ? faCheck : faTimes} $active={isSale} />\n                )}\n            </td>\n            <td>\n                {isEditing ? (\n                    <PriceInput \n                        onChange={handleInputChange} \n                        value={priceStandard} \n                        type=\"number\" \n                        name=\"price_standard\" \n                        min=\"0\"\n                    />\n                ) : (\n                    priceStandard || '-'\n                )}\n            </td>\n            <td>\n                {isEditing ? (\n                    <PriceInput \n                        onChange={handleInputChange} \n                        value={priceSale} \n                        type=\"number\" \n                        name=\"price_sale\" \n                        min=\"0\"\n                    />\n                ) : (\n                    priceSale || '-'\n                )}\n            </td>\n            <td>{product.sold}</td>\n            <td>{product.updatedAt}</td>\n            <td>\n                {isEditing ? (\n                    <FilterBtn name=\"save\" onClick={handleIsEditing} $white $active>\n                        儲存\n                    </FilterBtn>\n                ) : (\n                    <FilterBtn name=\"edit\" onClick={handleIsEditing} $white $active>\n                        編輯\n                    </FilterBtn>\n                )}\n            </td>\n            <td>\n                <FilterBtn $white $active>\n                    查看\n                </FilterBtn>\n            </td>\n        </tr>\n    )\n}\n\nexport const Price = () => {\n\n    const dispatch = useDispatch()\n\n    const products = useSelector(state => state.product.products)\n    const error = useSelector(state => state.product.error)\n\n    const [isOn, setIsOn] = useState('')\n    const [isSale, setIsSale] = useState('')\n    const [order, setOrder] = useState('')\n\n    useEffect(() => {\n        const search = new URLSearchParams();\n        if(isOn !== '') search.set('is_on', isOn)\n        if(isSale !== '') search.set('is_sale', isSale)\n        if(order !== '') search.set('order', order)\n        dispatch(getProducts('', `?${search}`))\n        return () => {\n            dispatch(setProducts(''))\n        }\n    }, [dispatch, isOn, isSale, order])\n\n    const handleSelectChange = e => {\n        if(e.target.name === \"is_on\") return setIsOn(e.target.value)\n        if(e.target.name === \"is_sale\") return setIsSale(e.target.value)\n        if(e.target.name === \"clearFilter\"){\n            setIsOn('')\n            setIsSale('')\n        }\n    }\n\n    const handleSort = e => {\n        if (e.target.name === 'sold') {\n            if(order === 'sold_desc') return setOrder('sold_asc')\n            if(order === 'sold_asc') return setOrder('sold_desc')\n            setOrder('sold_desc')            \n        } else {\n            if(order === 'price_desc') return setOrder('price_asc')\n            if(order === 'price_asc') return setOrder('price_desc')\n            setOrder('price_asc')\n        }\n    }\n\n    return (\n        <MainContainer>\n            <H2>管理商品價格與紀錄</H2>\n            <FilterContainer>\n                <FilterBtn name=\"clearFilter\" onClick={handleSelectChange} $white $active>清除篩選</FilterBtn>\n                <div>\n                    <select name=\"is_on\" value={isOn} onChange={handleSelectChange}>\n                        <option value=\"\">-----</option>\n                        <option value=\"1\">已上架</option>\n                        <option value=\"0\">未上架</option>\n                    </select>\n                </div>\n                <div>\n                    <select name=\"is_sale\" value={isSale} onChange={handleSelectChange}>\n                        <option value=\"\">-----</option>\n                        <option value=\"1\">特價商品</option>\n                        <option value=\"0\">原價商品</option>\n                    </select>\n                </div>\n            </FilterContainer>\n            <TableContainer>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>id</th>\n                            <th>產品名稱</th>\n                            <th>上架中</th>\n                            <th>特價中</th>\n                            <th>\n                                <SortBtn name=\"price_standard\" onClick={handleSort}>原價</SortBtn>\n                            </th>\n                            <th>\n                                <SortBtn name=\"price_sale\" onClick={handleSort}>特價</SortBtn>\n                            </th>\n                            <th>\n                                <SortBtn name=\"sold\" onClick={handleSort}>已售出</SortBtn>\n                            </th>\n                            <th>更新時間</th>\n                            <th></th>\n                            <th>存貨紀錄</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {products && !error && (\n                            products.length > 0 ? (\n                                products.map(product => (\n                                    <Item key={product.id} product={product} />\n                                ))\n                            ) : (\n                                <H4>查無商品</H4>\n                            )\n                        )}\n                    </tbody>\n                </table>\n                {!products && (\n                    error ? (\n                        <P>{error}</P>\n                    ) : (\n                        <H4>商品載入中...</H4>\n                    )\n                )}\n            </TableContainer>\n        </MainContainer>        \n    )\n}","import styled from \"styled-components\";\nimport { Switch, Route, Link, useRouteMatch, useLocation } from \"react-router-dom\"\n\nimport { H3 } from \"../../../constants/style\";\n\nimport { Information } from \"./Information\";\nimport { Quantity } from \"./Quantity\";\nimport { Price } from \"./Price\";\nimport AddProduct from \"./AddProduct\";\n\n\nconst MainContainer = styled.main`\n    width: 70%;\n    flex-grow: 1;\n    & h3 {\n        padding: 10px;\n    }\n    & a {\n        color: ${props => props.theme.color.black};\n    }\n`\n\nexport default function AdminProductPage () {\n\n    const { path, url } = useRouteMatch();\n    const { pathname } = useLocation();\n\n    return (\n        <>\n            {path === pathname && (\n                <MainContainer>\n                    <H3>\n                        <Link to={`${url}/information`}>新增及管理產品資訊</Link>\n                    </H3>\n                    <H3>\n                        <Link to={`${url}/quantity`}>管理存貨數量與紀錄</Link>\n                    </H3>\n                    <H3>\n                        <Link to={`${url}/price`}>管理商品價格與紀錄</Link>\n                    </H3>\n                </MainContainer>\n            )}\n            <Switch>\n                <Route path={`${path}/information`}>\n                    <Information />\n                </Route>\n                <Route path={`${path}/quantity`}>\n                    <Quantity />\n                </Route>\n                <Route path={`${path}/price`}>\n                    <Price />\n                </Route>\n                <Route path={`${path}/new`}>\n                    <AddProduct />\n                </Route>\n                <Route path={`${path}/edit/:id`}>\n                    <AddProduct />\n                </Route>\n            </Switch>\n        </>\n    )\n}","import { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { Switch, Route, useRouteMatch, useLocation } from \"react-router-dom\"\n\nimport { CrumbNav } from \"../../components/CrumbNav\";\nimport { H4, LinkedTag, MEDIA_QUERY, P, PageContainer, PageWrapper } from \"../../constants/style\";\n\nimport AdminProductPage from \"./AdminProductPage\";\n\n\nconst AsideContainer = styled.aside`\n    width: 20%;\n    min-width: 250px;\n\n    & > div {\n        z-index: 1;\n        margin: 10px;\n        background-color: ${props => props.theme.color.white};\n    }\n\n    ${MEDIA_QUERY.main} {\n        position: fixed;\n        left: -240px;\n        z-index: 200;\n        transition: .3s;\n    }\n\n`\n\nconst AsideBlock = styled.div`\n    border: 1px solid ${props => props.theme.color.lightGrey}8;\n    & > h4 {\n        padding: 10px 15px;\n        font-weight: ${props => props.theme.fontWeight.xl};\n        background-color: #eee;\n    }\n    & > div {\n        padding: 5px 15px;\n    }\n`\n\nconst AsideContent = styled(P)`\n    ${LinkedTag}\n    line-height: 2em;\n    padding: ${props => props.$active ? '5px 0 7px' : '5px 0'};\n    font-weight: ${props => props.$active && props.theme.fontWeight.xl}\n`\n\n\n\nexport default function AdminPage () {\n\n    let { path, url } = useRouteMatch();\n\n    const { pathname } = useLocation();\n    const subPath = pathname.split('/').slice(2, 4)\n    const pathArr = ['', 'admin']\n    if(subPath) subPath.map(path => pathArr.push(path))\n\n\n    return (\n        <>\n            <CrumbNav pathArr={pathArr} />\n            <PageWrapper>\n                <PageContainer>\n                    <AsideContainer>\n                        <AsideBlock>\n                            <H4>商品管理</H4>\n                            <div>\n                                <AsideContent $active={subPath[1] === 'information'}>\n                                    {subPath[1] === 'information' ? (\n                                        <>新增及管理產品資訊</>\n                                    ) : (\n                                        <Link to={`${url}/product/information`}>新增及管理產品資訊</Link>\n                                    )}\n                                </AsideContent>\n                                <AsideContent $active={subPath[1] === 'quantity'}>\n                                    {subPath[1] === 'quantity' ? (\n                                        <>管理存貨數量與紀錄</>\n                                    ) : (\n                                        <Link to={`${url}/product/quantity`}>管理存貨數量與紀錄</Link>\n                                    )}\n                                </AsideContent>\n                                <AsideContent $active={subPath[1] === 'price'}>\n                                    {subPath[1] === 'price' ? (\n                                        <>管理商品價格與紀錄</>\n                                    ) : (\n                                        <Link to={`${url}/product/price`}>管理商品價格與紀錄</Link>\n                                    )}\n                                </AsideContent>\n                            </div>\n                        </AsideBlock>\n                        <AsideBlock>\n                            <H4>訂單管理</H4>\n                            <div>\n                                <AsideContent $active={subPath[0] === 'order'}>\n                                    {subPath[0] === 'order' ? (\n                                        <>管理所有訂單</>\n                                    ) : (\n                                        <Link to={`${url}/order`}>管理所有訂單</Link>\n                                    )}\n                                </AsideContent>\n                            </div>\n                        </AsideBlock>\n                        <AsideBlock>\n                            <H4>用戶管理</H4>\n                            <div>\n                                <AsideContent $active={subPath[0] === 'user'}>\n                                    {subPath[0] === 'user' ? (\n                                        <>管理所有用戶</>\n                                    ) : (\n                                        <Link to={`${url}/user`}>管理所有用戶</Link>\n                                    )}\n                                </AsideContent>\n                            </div>\n                        </AsideBlock>\n                    </AsideContainer>\n\n                    <Switch>\n                        <Route path={`${path}/product`}>\n                            <AdminProductPage />\n                        </Route>\n                        {/* <Route path={`${path}/order`}>\n                            <AdminProductPage />\n                        </Route>\n                        <Route path={`${path}/user`}>\n                            <AdminProductPage />\n                        </Route> */}\n                    </Switch>\n\n                </PageContainer>\n            </PageWrapper>\n        </>\n    )\n}","import './App.css';\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\"\nimport ScrollRestoration from 'react-scroll-restoration'\nimport styled from \"styled-components\"\n\nimport Header from './components/Header'\nimport Footer from './components/Footer'\nimport HomePage from './pages/HomePage'\nimport ListPage from './pages/ListPage'\nimport ProductPage from './pages/ProductPage'\nimport CartPage from './pages/CartPage'\nimport AdminProductPage from './pages/AdminPages/AdminProductPage'\n\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { fab } from '@fortawesome/free-brands-svg-icons'\nimport AdminPage from './pages/AdminPages/AdminPage';\n\nlibrary.add(fab)\n\nconst Layout = styled.div``\n\nfunction App() {\n\n  return (\n    <Router>\n      <Layout>\n        <ScrollRestoration />\n        <Header/>\n        <Switch>\n          <Route exact path=\"/\">\n            <HomePage />\n          </Route>\n          <Route path=\"/collection\">\n            <ListPage />\n          </Route>\n          <Route path=\"/product/:id\">\n            <ProductPage />\n          </Route>\n          <Route path=\"/cart\">\n            <CartPage />\n          </Route>\n          <Route path=\"/admin\">\n            <AdminPage />\n          </Route>\n        </Switch>\n        <Footer/>\n      </Layout>\n    </Router>\n  );\n}\n\nexport default App;\n","import { configureStore } from '@reduxjs/toolkit'\nimport productReducer from '../features/product/productSlice'\nimport generalReducer from '../features/general/generalSlice'\nimport cartReducer from '../features/cart/cartSlice'\n\nexport const store = configureStore({\n  reducer: {\n    product: productReducer,\n    general: generalReducer,\n    cart: cartReducer,\n  },\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport { ThemeProvider } from 'styled-components';\nimport { theme } from './constants/theme';\n\nimport { store } from './app/store'\nimport { Provider } from 'react-redux'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ThemeProvider theme={theme}>\n        <App />\n      </ThemeProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}